{"config":{"lang":["ja"],"separator":"[\\s\\-\u3000\u3001\u3002\uff0c\uff0e]+","pipeline":["stemmer"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"\u5b66\u7fd2\u30b3\u30f3\u30c6\u30f3\u30c4","text":"<p>\u30a8\u30f3\u30b8\u30cb\u30a2\u306e\u305f\u3081\u306e\u5b9f\u8df5\u7684\u306a\u5b66\u7fd2\u8cc7\u6599\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002</p>"},{"location":"#_2","title":"\u3053\u306e\u30b5\u30a4\u30c8\u306b\u3064\u3044\u3066","text":"<p>\u5b9f\u52d9\u3067\u5f79\u7acb\u3064\u6280\u8853\u77e5\u8b58\u3092\u4f53\u7cfb\u7684\u306b\u5b66\u3079\u308b\u5b66\u7fd2\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u63d0\u4f9b\u3057\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"#_3","title":"\u30b3\u30f3\u30c6\u30f3\u30c4","text":""},{"location":"#_4","title":"\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u30fb\u30a2\u30e9\u30fc\u30c8","text":"<p>\u30b7\u30b9\u30c6\u30e0\u306e\u5b89\u5b9a\u904b\u7528\u306b\u6b20\u304b\u305b\u306a\u3044\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u3068\u30a2\u30e9\u30fc\u30c8\u306e\u8a2d\u8a08\u306b\u3064\u3044\u3066\u5b66\u3079\u307e\u3059\u3002</p> <ul> <li>\u30a2\u30e9\u30fc\u30c8\u8a2d\u8a08: \u30e6\u30fc\u30b6\u30fc\u8996\u70b9\u3067\u306e\u30a2\u30e9\u30fc\u30c8\u5206\u985e\u3068\u30ec\u30d9\u30eb\u8a2d\u5b9a</li> <li>\u591a\u5c64\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0: \u30b7\u30b9\u30c6\u30e0\u3092\u591a\u5c64\u7684\u306b\u76e3\u8996\u3059\u308b\u91cd\u8981\u6027\u3068\u5b9f\u8df5\u65b9\u6cd5</li> <li>\u30af\u30e9\u30a6\u30c9\u74b0\u5883: \u30af\u30e9\u30a6\u30c9\u7279\u6709\u306e\u30ea\u30bd\u30fc\u30b9\u76e3\u8996\u3068\u30a2\u30e9\u30fc\u30c8\u306e\u8003\u3048\u65b9</li> </ul> <p>\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u30fb\u30a2\u30e9\u30fc\u30c8\u3092\u5b66\u3076 \u2192</p>"},{"location":"#infrastructure-as-code-iac","title":"Infrastructure as Code (IaC)","text":"<p>\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u3092\u30b3\u30fc\u30c9\u3067\u5b9a\u7fa9\u30fb\u7ba1\u7406\u3059\u308b\u624b\u6cd5\u306b\u3064\u3044\u3066\u5b66\u3079\u307e\u3059\u3002</p> <ul> <li>\u57fa\u790e\u77e5\u8b58: IaC\u306e\u30e1\u30ea\u30c3\u30c8\u3001\u5ba3\u8a00\u7684\u5b9a\u7fa9\u3068\u547d\u4ee4\u7684\u5b9a\u7fa9\u306e\u9055\u3044</li> <li>\u5b9f\u8df5\u30b9\u30ad\u30eb: \u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u539f\u5247\u3001\u30c6\u30b9\u30c8\u3001\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\u306e\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9</li> <li>\u5b9f\u4f8b: AWS CDK\u3092\u4f7f\u3063\u305f\u57fa\u672c\u304b\u3089\u5fdc\u7528\u307e\u3067</li> </ul> <p>IaC\u3092\u5b66\u3076 \u2192</p>"},{"location":"iac/","title":"Infrastructure as Code (IaC)","text":"<p>Infrastructure as Code\uff08IaC\uff09\u306f\u3001\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u3092\u30b3\u30fc\u30c9\u3067\u5b9a\u7fa9\u30fb\u7ba1\u7406\u3059\u308b\u624b\u6cd5\u3067\u3059\u3002\u624b\u4f5c\u696d\u3067\u306e\u8a2d\u5b9a\u3084\u30af\u30ea\u30c3\u30af\u30aa\u30da\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u4ee3\u308f\u308a\u306b\u3001\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u8a00\u8a9e\u3084\u5ba3\u8a00\u7684\u306a\u8a18\u8ff0\u3067\u30a4\u30f3\u30d5\u30e9\u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002</p>"},{"location":"iac/#_1","title":"\u3053\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u3067\u5b66\u3079\u308b\u3053\u3068","text":"<p>\u3053\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u3067\u306f\u3001IaC\u306e\u57fa\u790e\u304b\u3089\u5b9f\u8df5\u307e\u3067\u3092\u4f53\u7cfb\u7684\u306b\u5b66\u3079\u307e\u3059\u3002</p>"},{"location":"iac/#_2","title":"\ud83d\udcda \u57fa\u790e\u77e5\u8b58","text":"<ul> <li>IaC\u306e\u30e1\u30ea\u30c3\u30c8: \u306a\u305cIaC\u304c\u5fc5\u8981\u306a\u306e\u304b\u3001\u5f93\u6765\u306e\u624b\u6cd5\u3068\u306e\u9055\u3044</li> <li>\u5ba3\u8a00\u7684\u5b9a\u7fa9 vs \u547d\u4ee4\u7684\u5b9a\u7fa9: IaC\u306e\u6838\u5fc3\u6982\u5ff5\u3092\u7406\u89e3\u3059\u308b</li> </ul>"},{"location":"iac/#_3","title":"\ud83d\udee0\ufe0f \u5b9f\u8df5\u30b9\u30ad\u30eb","text":"<ul> <li>\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u539f\u5247: \u4fdd\u5b88\u6027\u306e\u9ad8\u3044IaC\u30b3\u30fc\u30c9\u3092\u66f8\u304f\u305f\u3081\u306e\u539f\u5247</li> <li>\u30c6\u30b9\u30c8\u306e\u91cd\u8981\u6027: \u30a4\u30f3\u30d5\u30e9\u30b3\u30fc\u30c9\u306e\u54c1\u8cea\u3092\u4fdd\u8a3c\u3059\u308b\u30c6\u30b9\u30c8\u624b\u6cd5</li> <li>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210: \u5b9f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u306e\u63a8\u5968\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210</li> <li>\u7ba1\u7406\u5358\u4f4d\u306e\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9: \u30b9\u30bf\u30c3\u30af/state\u306e\u9069\u5207\u306a\u5206\u5272\u65b9\u6cd5 \ud83d\udea7 \u7de8\u96c6\u4e2d</li> </ul>"},{"location":"iac/#_4","title":"\ud83d\udca1 \u5b9f\u4f8b\u3067\u5b66\u3076","text":"<ul> <li>CDK\u57fa\u672c\u4f8b: \u30b7\u30f3\u30d7\u30eb\u306a\u69cb\u6210\u304b\u3089\u59cb\u3081\u308b \ud83d\udea7 \u7de8\u96c6\u4e2d</li> <li>CDK\u5fdc\u7528\u4f8b: \u672c\u756a\u30ec\u30d9\u30eb\u306e\u8907\u96d1\u306a\u69cb\u6210 \ud83d\udea7 \u7de8\u96c6\u4e2d</li> <li>Terraform\u57fa\u672c\u4f8b: \u30b7\u30f3\u30d7\u30eb\u306a\u69cb\u6210\u304b\u3089\u59cb\u3081\u308b \ud83d\udea7 \u7de8\u96c6\u4e2d</li> <li>Terraform\u5fdc\u7528\u4f8b: \u672c\u756a\u30ec\u30d9\u30eb\u306e\u8907\u96d1\u306a\u69cb\u6210 \ud83d\udea7 \u7de8\u96c6\u4e2d</li> </ul>"},{"location":"iac/#iac","title":"IaC\u30c4\u30fc\u30eb\u306e\u4f4d\u7f6e\u3065\u3051","text":"<p>\u3053\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u3067\u306f\u4e3b\u306b\u4ee5\u4e0b\u306e\u30c4\u30fc\u30eb\u3092\u53d6\u308a\u6271\u3044\u307e\u3059:</p>"},{"location":"iac/#aws-cdk-cloud-development-kit","title":"AWS CDK (Cloud Development Kit)","text":"<ul> <li>\u8a00\u8a9e: TypeScript, Python, Java\u7b49\u306e\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u8a00\u8a9e</li> <li>\u5bfe\u8c61: AWS\u5c02\u7528</li> <li>\u7279\u5fb4: \u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u8a00\u8a9e\u306e\u8868\u73fe\u529b\u3092\u6d3b\u304b\u305b\u308b\u3001\u578b\u5b89\u5168\u6027</li> </ul>"},{"location":"iac/#terraform","title":"Terraform","text":"<ul> <li>\u8a00\u8a9e: HCL (HashiCorp Configuration Language)</li> <li>\u5bfe\u8c61: \u30de\u30eb\u30c1\u30af\u30e9\u30a6\u30c9\u5bfe\u5fdc</li> <li>\u7279\u5fb4: \u8c4a\u5bcc\u306a\u30d7\u30ed\u30d0\u30a4\u30c0\u30fc\u3001\u5e83\u7bc4\u306a\u30b3\u30df\u30e5\u30cb\u30c6\u30a3</li> </ul>"},{"location":"iac/#iac_1","title":"\u306a\u305cIaC\u3092\u5b66\u3076\u306e\u304b","text":"<p>\u73fe\u4ee3\u306e\u30af\u30e9\u30a6\u30c9\u30a4\u30f3\u30d5\u30e9\u904b\u7528\u306b\u304a\u3044\u3066\u3001IaC\u306f\u4ee5\u4e0b\u306e\u7406\u7531\u304b\u3089\u5fc5\u9808\u306e\u30b9\u30ad\u30eb\u3068\u306a\u3063\u3066\u3044\u307e\u3059:</p> <ul> <li>\u518d\u73fe\u6027: \u540c\u3058\u30b3\u30fc\u30c9\u304b\u3089\u540c\u3058\u30a4\u30f3\u30d5\u30e9\u3092\u4f55\u5ea6\u3067\u3082\u69cb\u7bc9\u53ef\u80fd</li> <li>\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406: Git\u3067\u5909\u66f4\u5c65\u6b74\u3092\u8ffd\u8de1\u3001\u30ec\u30d3\u30e5\u30fc\u3001\u30ed\u30fc\u30eb\u30d0\u30c3\u30af</li> <li>\u81ea\u52d5\u5316: CI/CD\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u306b\u7d71\u5408\u3057\u3001\u30c7\u30d7\u30ed\u30a4\u3092\u81ea\u52d5\u5316</li> <li>\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8: \u30b3\u30fc\u30c9\u81ea\u4f53\u304c\u6700\u65b0\u306e\u30a4\u30f3\u30d5\u30e9\u69cb\u6210\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8</li> <li>\u30b3\u30e9\u30dc\u30ec\u30fc\u30b7\u30e7\u30f3: \u30c1\u30fc\u30e0\u958b\u767a\u306b\u304a\u3051\u308b\u30ec\u30d3\u30e5\u30fc\u3068\u5171\u540c\u4f5c\u696d</li> </ul> <p>\u6b21\u306e\u30da\u30fc\u30b8\u3067\u3001\u3053\u308c\u3089\u306e\u30e1\u30ea\u30c3\u30c8\u3092\u8a73\u3057\u304f\u898b\u3066\u3044\u304d\u307e\u3057\u3087\u3046\u3002</p> <p>IaC\u306e\u30e1\u30ea\u30c3\u30c8\u3092\u5b66\u3076 \u2192</p>"},{"location":"iac/benefits/","title":"IaC\u306e\u30e1\u30ea\u30c3\u30c8","text":"<p>Infrastructure as Code (IaC) \u3092\u5c0e\u5165\u3059\u308b\u3053\u3068\u3067\u3001\u5f93\u6765\u306e\u624b\u4f5c\u696d\u306b\u3088\u308b\u30a4\u30f3\u30d5\u30e9\u7ba1\u7406\u3068\u6bd4\u8f03\u3057\u3066\u591a\u304f\u306e\u30e1\u30ea\u30c3\u30c8\u304c\u5f97\u3089\u308c\u307e\u3059\u3002</p>"},{"location":"iac/benefits/#1","title":"1. \u518d\u73fe\u6027\u3068\u4e00\u8cab\u6027","text":""},{"location":"iac/benefits/#_1","title":"\u5f93\u6765\u306e\u8ab2\u984c","text":"<p>\u624b\u4f5c\u696d\u3067\u306e\u30a4\u30f3\u30d5\u30e9\u69cb\u7bc9\u3067\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u554f\u984c\u304c\u767a\u751f\u3057\u307e\u3059:</p> <ul> <li>\u540c\u3058\u624b\u9806\u66f8\u3092\u898b\u3066\u3082\u3001\u4eba\u306b\u3088\u3063\u3066\u5fae\u5999\u306b\u7570\u306a\u308b\u8a2d\u5b9a\u306b\u306a\u308b</li> <li>\u74b0\u5883\u3054\u3068(\u958b\u767a\u3001\u30b9\u30c6\u30fc\u30b8\u30f3\u30b0\u3001\u672c\u756a)\u306b\u8a2d\u5b9a\u306e\u5dee\u7570\u304c\u751f\u307e\u308c\u308b</li> <li>\u300c\u3053\u306e\u8a2d\u5b9a\u3001\u8ab0\u304c\u3044\u3064\u5909\u66f4\u3057\u305f\u3093\u3060\u3063\u3051?\u300d\u304c\u5206\u304b\u3089\u306a\u3044</li> </ul>"},{"location":"iac/benefits/#iac_1","title":"IaC\u306b\u3088\u308b\u89e3\u6c7a","text":"<pre><code>// \u540c\u3058\u30b3\u30fc\u30c9\u304b\u3089\u540c\u3058\u30a4\u30f3\u30d5\u30e9\u304c\u5fc5\u305a\u4f5c\u3089\u308c\u308b\nconst bucket = new s3.Bucket(this, 'DataBucket', {\n  versioned: true,\n  encryption: s3.BucketEncryption.S3_MANAGED,\n  lifecycleRules: [{\n    expiration: Duration.days(90),\n  }],\n});\n</code></pre> <ul> <li>\u540c\u3058\u30b3\u30fc\u30c9\u304b\u3089\u306f\u5fc5\u305a\u540c\u3058\u30a4\u30f3\u30d5\u30e9\u304c\u751f\u6210\u3055\u308c\u308b</li> <li>\u74b0\u5883\u5dee\u5206\u306f\u30d1\u30e9\u30e1\u30fc\u30bf\u3067\u660e\u793a\u7684\u306b\u7ba1\u7406</li> <li>\u300c\u3044\u3064\u30fb\u8ab0\u304c\u30fb\u4f55\u3092\u300d\u5909\u66f4\u3057\u305f\u304b\u304cGit\u5c65\u6b74\u3067\u660e\u78ba</li> </ul>"},{"location":"iac/benefits/#2","title":"2. \u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u3068\u5c65\u6b74\u8ffd\u8de1","text":""},{"location":"iac/benefits/#git","title":"Git\u306b\u3088\u308b\u5909\u66f4\u7ba1\u7406","text":"<p>IaC\u30b3\u30fc\u30c9\u3092Git\u3067\u7ba1\u7406\u3059\u308b\u3053\u3068\u3067\u3001\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u3068\u540c\u3058\u30e1\u30ea\u30c3\u30c8\u304c\u5f97\u3089\u308c\u307e\u3059:</p> <pre><code># \u5909\u66f4\u5c65\u6b74\u306e\u78ba\u8a8d\n$ git log --oneline\na1b2c3d Add lifecycle policy to S3 bucket\nd4e5f6g Update Lambda memory to 512MB\ng7h8i9j Initial infrastructure setup\n\n# \u5dee\u5206\u306e\u78ba\u8a8d\n$ git diff\n- memory: 256,\n+ memory: 512,\n\n# \u554f\u984c\u304c\u3042\u308c\u3070\u5373\u5ea7\u306b\u30ed\u30fc\u30eb\u30d0\u30c3\u30af\n$ git revert a1b2c3d\n</code></pre>"},{"location":"iac/benefits/#_2","title":"\u30e1\u30ea\u30c3\u30c8","text":"<ul> <li>\u5909\u66f4\u7406\u7531\u306e\u8a18\u9332: \u30b3\u30df\u30c3\u30c8\u30e1\u30c3\u30bb\u30fc\u30b8\u3067\u300c\u306a\u305c\u300d\u5909\u66f4\u3057\u305f\u304b\u3092\u8a18\u9332</li> <li>\u30ec\u30d3\u30e5\u30fc\u306e\u5b9f\u65bd: Pull Request\u3067\u30a4\u30f3\u30d5\u30e9\u5909\u66f4\u3092\u30ec\u30d3\u30e5\u30fc</li> <li>\u30ed\u30fc\u30eb\u30d0\u30c3\u30af: \u554f\u984c\u767a\u751f\u6642\u306b\u7c21\u5358\u306b\u4ee5\u524d\u306e\u72b6\u614b\u306b\u623b\u305b\u308b</li> <li>\u30d6\u30e9\u30f3\u30c1\u6226\u7565: feature/fix \u30d6\u30e9\u30f3\u30c1\u3067\u5b89\u5168\u306b\u5909\u66f4\u3092\u8a66\u305b\u308b</li> </ul>"},{"location":"iac/benefits/#3","title":"3. \u30ec\u30d3\u30e5\u30fc\u53ef\u80fd\u6027","text":""},{"location":"iac/benefits/#_3","title":"\u30b3\u30fc\u30c9\u30ec\u30d3\u30e5\u30fc\u306b\u3088\u308b\u54c1\u8cea\u5411\u4e0a","text":"<p>\u624b\u4f5c\u696d\u3067\u306e\u5909\u66f4\u306f\u4e8b\u5f8c\u78ba\u8a8d\u304c\u56f0\u96e3\u3067\u3059\u304c\u3001IaC\u3067\u306fPull Request\u306b\u3088\u308b\u4e8b\u524d\u30ec\u30d3\u30e5\u30fc\u304c\u53ef\u80fd\u3067\u3059\u3002</p> <pre><code>// \u30ec\u30d3\u30e5\u30ef\u30fc\u304c\u6307\u6458\u3067\u304d\u308b\u4f8b\nconst database = new rds.DatabaseInstance(this, 'Database', {\n  engine: rds.DatabaseInstanceEngine.postgres({ version: rds.PostgresEngineVersion.VER_15 }),\n  instanceType: ec2.InstanceType.of(ec2.InstanceClass.T3, ec2.InstanceSize.MICRO),\n  vpc,\n  // \u274c \u30ec\u30d3\u30e5\u30fc\u6307\u6458: \u672c\u756a\u74b0\u5883\u3067\u306f\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u304c\u5fc5\u9808\n  // backupRetention: Duration.days(7),\n});\n</code></pre> <p>\u30ec\u30d3\u30e5\u30fc\u3067\u78ba\u8a8d\u3067\u304d\u308b\u9805\u76ee:</p> <ul> <li>\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a\u306e\u4e0d\u5099(\u30d1\u30d6\u30ea\u30c3\u30af\u30a2\u30af\u30bb\u30b9\u3001\u6697\u53f7\u5316etc)</li> <li>\u30b3\u30b9\u30c8\u6700\u9069\u5316\u306e\u6a5f\u4f1a</li> <li>\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u304b\u3089\u306e\u9038\u8131</li> <li>\u547d\u540d\u898f\u5247\u306e\u9075\u5b88</li> </ul>"},{"location":"iac/benefits/#4-cicd","title":"4. \u81ea\u52d5\u5316\u3068CI/CD\u7d71\u5408","text":""},{"location":"iac/benefits/#cicd","title":"CI/CD\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u3067\u306e\u30c7\u30d7\u30ed\u30a4","text":"<p>IaC\u30b3\u30fc\u30c9\u3092CI/CD\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u306b\u7d71\u5408\u3059\u308b\u3053\u3068\u3067\u3001\u5b8c\u5168\u81ea\u52d5\u5316\u304c\u5b9f\u73fe\u3067\u304d\u307e\u3059\u3002</p> <pre><code># GitHub Actions \u306e\u4f8b\nname: Deploy Infrastructure\non:\n  push:\n    branches: [main]\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n      - name: Setup Node.js\n        uses: actions/setup-node@v3\n      - name: Install dependencies\n        run: npm ci\n      - name: Run tests\n        run: npm test\n      - name: Deploy to AWS\n        run: npm run cdk deploy\n</code></pre>"},{"location":"iac/benefits/#_4","title":"\u81ea\u52d5\u5316\u306e\u30e1\u30ea\u30c3\u30c8","text":"<ul> <li>\u4eba\u7684\u30df\u30b9\u306e\u524a\u6e1b: \u624b\u4f5c\u696d\u306b\u3088\u308b\u30b3\u30d4\u30da\u30df\u30b9\u3084\u8a2d\u5b9a\u6f0f\u308c\u3092\u9632\u6b62</li> <li>\u9ad8\u901f\u306a\u30c7\u30d7\u30ed\u30a4: \u6570\u5206\u301c\u6570\u5341\u5206\u3067\u5b8c\u5168\u306a\u30a4\u30f3\u30d5\u30e9\u3092\u69cb\u7bc9</li> <li>\u30c6\u30b9\u30c8\u306e\u81ea\u52d5\u5b9f\u884c: \u30c7\u30d7\u30ed\u30a4\u524d\u306b\u5fc5\u305a\u54c1\u8cea\u30c1\u30a7\u30c3\u30af</li> <li>\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b9\u30ad\u30e3\u30f3: \u8106\u5f31\u6027\u691c\u51fa\u3092\u81ea\u52d5\u5316</li> </ul>"},{"location":"iac/benefits/#5","title":"5. \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3068\u3057\u3066\u306e\u5f79\u5272","text":""},{"location":"iac/benefits/#_5","title":"\u6700\u65b0\u72b6\u614b\u304c\u5e38\u306b\u660e\u78ba","text":"<p>IaC\u30b3\u30fc\u30c9\u306f\u300c\u5b9f\u884c\u53ef\u80fd\u306a\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u300d\u3068\u3057\u3066\u6a5f\u80fd\u3057\u307e\u3059\u3002</p> <pre><code>// \u3053\u306e\u30b3\u30fc\u30c9\u3092\u8aad\u3081\u3070\u3001\u73fe\u5728\u306e\u30a4\u30f3\u30d5\u30e9\u69cb\u6210\u304c\u5206\u304b\u308b\nexport class NetworkStack extends Stack {\n  constructor(scope: Construct, id: string, props?: StackProps) {\n    super(scope, id, props);\n\n    // VPC: 10.0.0.0/16\n    const vpc = new ec2.Vpc(this, 'MainVpc', {\n      maxAzs: 2,\n      natGateways: 1,\n      subnetConfiguration: [\n        {\n          name: 'Public',\n          subnetType: ec2.SubnetType.PUBLIC,\n          cidrMask: 24,\n        },\n        {\n          name: 'Private',\n          subnetType: ec2.SubnetType.PRIVATE_WITH_EGRESS,\n          cidrMask: 24,\n        },\n      ],\n    });\n  }\n}\n</code></pre>"},{"location":"iac/benefits/#_6","title":"\u5f93\u6765\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u7ba1\u7406\u306e\u8ab2\u984c","text":"<ul> <li>\u66f4\u65b0\u6f0f\u308c: Excel\u3084confluence\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u53e4\u304f\u306a\u308a\u304c\u3061</li> <li>\u5b9f\u614b\u3068\u306e\u4e56\u96e2: \u300c\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u306f\u66f8\u3044\u3066\u3042\u308b\u3051\u3069\u3001\u5b9f\u969b\u306f\u9055\u3046\u300d</li> <li>\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u30b3\u30b9\u30c8: \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u66f4\u65b0\u306b\u6642\u9593\u304c\u304b\u304b\u308b</li> </ul>"},{"location":"iac/benefits/#iac_2","title":"IaC\u306b\u3088\u308b\u89e3\u6c7a","text":"<ul> <li>\u5e38\u306b\u6700\u65b0: \u30b3\u30fc\u30c9=\u5b9f\u614b\u306a\u306e\u3067\u4e56\u96e2\u3057\u306a\u3044</li> <li>\u7406\u89e3\u3057\u3084\u3059\u3044: \u30b3\u30e1\u30f3\u30c8\u3068\u5408\u308f\u305b\u3066\u8a2d\u8a08\u610f\u56f3\u3092\u660e\u793a</li> <li>\u81ea\u52d5\u751f\u6210: \u30b3\u30fc\u30c9\u304b\u3089\u56f3\u3084\u4e00\u89a7\u8868\u3092\u81ea\u52d5\u751f\u6210\u53ef\u80fd</li> </ul>"},{"location":"iac/benefits/#6","title":"6. \u30b3\u30b9\u30c8\u6700\u9069\u5316","text":""},{"location":"iac/benefits/#_7","title":"\u74b0\u5883\u306e\u8fc5\u901f\u306a\u4f5c\u6210\u30fb\u7834\u68c4","text":"<pre><code># \u958b\u767a\u74b0\u5883\u3092\u4e00\u6642\u7684\u306b\u4f5c\u6210\n$ cdk deploy DevEnvironment\n\n# \u4f5c\u696d\u5b8c\u4e86\u5f8c\u3001\u5373\u5ea7\u306b\u524a\u9664\u3057\u3066\u30b3\u30b9\u30c8\u524a\u6e1b\n$ cdk destroy DevEnvironment\n</code></pre> <ul> <li>\u4e0d\u8981\u74b0\u5883\u306e\u5373\u5ea7\u524a\u9664: \u4f7f\u308f\u306a\u3044\u6642\u306f\u524a\u9664\u3057\u3066\u30b3\u30b9\u30c8\u524a\u6e1b</li> <li>\u30b3\u30b9\u30c8\u8a66\u7b97: \u30c7\u30d7\u30ed\u30a4\u524d\u306b\u30b3\u30b9\u30c8\u3092\u898b\u7a4d\u3082\u308a</li> <li>\u30ea\u30bd\u30fc\u30b9\u6700\u9069\u5316: \u30b3\u30fc\u30c9\u30ec\u30d3\u30e5\u30fc\u3067\u30b3\u30b9\u30c8\u9762\u3082\u691c\u8a0e</li> </ul>"},{"location":"iac/benefits/#7","title":"7. \u30b3\u30e9\u30dc\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u4fc3\u9032","text":""},{"location":"iac/benefits/#_8","title":"\u30c1\u30fc\u30e0\u958b\u767a\u3067\u306e\u6069\u6075","text":"<ul> <li>\u4e26\u884c\u958b\u767a: \u8907\u6570\u30e1\u30f3\u30d0\u30fc\u304c\u7570\u306a\u308b\u30d6\u30e9\u30f3\u30c1\u3067\u540c\u6642\u306b\u4f5c\u696d</li> <li>\u77e5\u8b58\u306e\u5171\u6709: \u30b3\u30fc\u30c9\u30ec\u30d3\u30e5\u30fc\u3092\u901a\u3058\u3066\u8a2d\u8a08\u77e5\u8b58\u304c\u5171\u6709\u3055\u308c\u308b</li> <li>\u6a19\u6e96\u5316: \u30c1\u30fc\u30e0\u5171\u901a\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3084Constructs\u3067\u4e00\u8cab\u6027\u3092\u4fdd\u3064</li> <li>\u30aa\u30f3\u30dc\u30fc\u30c7\u30a3\u30f3\u30b0: \u65b0\u30e1\u30f3\u30d0\u30fc\u304c\u30b3\u30fc\u30c9\u3092\u8aad\u3081\u3070\u69cb\u6210\u3092\u7406\u89e3\u3067\u304d\u308b</li> </ul>"},{"location":"iac/benefits/#_9","title":"\u307e\u3068\u3081","text":"\u89b3\u70b9 \u5f93\u6765\u306e\u624b\u4f5c\u696d IaC \u518d\u73fe\u6027 \u274c \u4eba\u306b\u3088\u308a\u7570\u306a\u308b \u2705 \u5e38\u306b\u540c\u3058\u7d50\u679c \u5c65\u6b74\u7ba1\u7406 \u274c \u5909\u66f4\u5c65\u6b74\u304c\u4e0d\u660e\u77ad \u2705 Git\u5c65\u6b74\u3067\u5b8c\u5168\u8ffd\u8de1 \u30ec\u30d3\u30e5\u30fc \u274c \u4e8b\u5f8c\u78ba\u8a8d\u306e\u307f \u2705 \u4e8b\u524d\u30ec\u30d3\u30e5\u30fc\u53ef\u80fd \u81ea\u52d5\u5316 \u274c \u624b\u4f5c\u696d\u304c\u5fc5\u9808 \u2705 \u5b8c\u5168\u81ea\u52d5\u5316\u53ef\u80fd \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 \u274c \u66f4\u65b0\u6f0f\u308c\u30fb\u4e56\u96e2 \u2705 \u30b3\u30fc\u30c9=\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 \u30b3\u30b9\u30c8 \u274c \u524a\u9664\u5fd8\u308c\u30ea\u30b9\u30af \u2705 \u7c21\u5358\u306b\u4f5c\u6210\u30fb\u7834\u68c4 <p>\u6b21\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u3067\u306f\u3001IaC\u306e\u6838\u5fc3\u6982\u5ff5\u3067\u3042\u308b\u300c\u5ba3\u8a00\u7684\u5b9a\u7fa9\u300d\u306b\u3064\u3044\u3066\u3001\u547d\u4ee4\u7684\u5b9a\u7fa9\u3068\u6bd4\u8f03\u3057\u306a\u304c\u3089\u5b66\u3073\u307e\u3059\u3002</p> <p>\u5ba3\u8a00\u7684\u5b9a\u7fa9 vs \u547d\u4ee4\u7684\u5b9a\u7fa9 \u2192</p>"},{"location":"iac/coding-principles/","title":"\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u539f\u5247\u3068\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9","text":"<p>\u4fdd\u5b88\u6027\u304c\u9ad8\u304f\u3001\u30c1\u30fc\u30e0\u3067\u904b\u7528\u3057\u3084\u3059\u3044IaC\u30b3\u30fc\u30c9\u3092\u66f8\u304f\u305f\u3081\u306e\u539f\u5247\u3068\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002</p>"},{"location":"iac/coding-principles/#_2","title":"\u57fa\u672c\u539f\u5247","text":""},{"location":"iac/coding-principles/#1-dry-dont-repeat-yourself","title":"1. DRY\u539f\u5247 (Don't Repeat Yourself)","text":"<p>\u540c\u3058\u30b3\u30fc\u30c9\u3092\u7e70\u308a\u8fd4\u3057\u66f8\u304b\u305a\u3001\u518d\u5229\u7528\u53ef\u80fd\u306a\u69cb\u9020\u306b\u307e\u3068\u3081\u307e\u3059\u3002</p> <p>\u274c \u60aa\u3044\u4f8b: \u91cd\u8907\u3057\u305f\u30b3\u30fc\u30c9</p> CDK (TypeScript)Terraform (HCL) <pre><code>// \u958b\u767a\u74b0\u5883\u306e\u30d0\u30b1\u30c3\u30c8\nconst devBucket = new s3.Bucket(this, 'DevBucket', {\n  bucketName: 'myapp-dev-data',\n  versioned: true,\n  encryption: s3.BucketEncryption.S3_MANAGED,\n  lifecycleRules: [{\n    noncurrentVersionExpiration: cdk.Duration.days(30),\n  }],\n});\n\n// \u672c\u756a\u74b0\u5883\u306e\u30d0\u30b1\u30c3\u30c8 (\u307b\u307c\u540c\u3058\u30b3\u30fc\u30c9)\nconst prodBucket = new s3.Bucket(this, 'ProdBucket', {\n  bucketName: 'myapp-prod-data',\n  versioned: true,\n  encryption: s3.BucketEncryption.S3_MANAGED,\n  lifecycleRules: [{\n    noncurrentVersionExpiration: cdk.Duration.days(90),\n  }],\n});\n</code></pre> <pre><code># \u958b\u767a\u74b0\u5883\u306e\u30d0\u30b1\u30c3\u30c8\nresource \"aws_s3_bucket\" \"dev_bucket\" {\n  bucket = \"myapp-dev-data\"\n}\n\nresource \"aws_s3_bucket_versioning\" \"dev_bucket\" {\n  bucket = aws_s3_bucket.dev_bucket.id\n  versioning_configuration {\n    status = \"Enabled\"\n  }\n}\n\nresource \"aws_s3_bucket_server_side_encryption_configuration\" \"dev_bucket\" {\n  bucket = aws_s3_bucket.dev_bucket.id\n  rule {\n    apply_server_side_encryption_by_default {\n      sse_algorithm = \"AES256\"\n    }\n  }\n}\n\nresource \"aws_s3_bucket_lifecycle_configuration\" \"dev_bucket\" {\n  bucket = aws_s3_bucket.dev_bucket.id\n  rule {\n    id     = \"delete-old-versions\"\n    status = \"Enabled\"\n    noncurrent_version_expiration {\n      noncurrent_days = 30\n    }\n  }\n}\n\n# \u672c\u756a\u74b0\u5883\u306e\u30d0\u30b1\u30c3\u30c8 (\u307b\u307c\u540c\u3058\u30b3\u30fc\u30c9)\nresource \"aws_s3_bucket\" \"prod_bucket\" {\n  bucket = \"myapp-prod-data\"\n}\n\nresource \"aws_s3_bucket_versioning\" \"prod_bucket\" {\n  bucket = aws_s3_bucket.prod_bucket.id\n  versioning_configuration {\n    status = \"Enabled\"\n  }\n}\n\nresource \"aws_s3_bucket_server_side_encryption_configuration\" \"prod_bucket\" {\n  bucket = aws_s3_bucket.prod_bucket.id\n  rule {\n    apply_server_side_encryption_by_default {\n      sse_algorithm = \"AES256\"\n    }\n  }\n}\n\nresource \"aws_s3_bucket_lifecycle_configuration\" \"prod_bucket\" {\n  bucket = aws_s3_bucket.prod_bucket.id\n  rule {\n    id     = \"delete-old-versions\"\n    status = \"Enabled\"\n    noncurrent_version_expiration {\n      noncurrent_days = 90\n    }\n  }\n}\n</code></pre> <p>\u2705 \u826f\u3044\u4f8b: \u518d\u5229\u7528\u53ef\u80fd\u306a\u30e2\u30b8\u30e5\u30fc\u30eb</p> CDK (TypeScript)Terraform (HCL) <pre><code>// \u518d\u5229\u7528\u53ef\u80fd\u306a\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30c8\u3092\u5b9a\u7fa9\nexport class DataBucket extends Construct {\n  public readonly bucket: s3.Bucket;\n\n  constructor(scope: Construct, id: string, props: {\n    environment: string;\n    retentionDays: number;\n  }) {\n    super(scope, id);\n\n    this.bucket = new s3.Bucket(this, 'Bucket', {\n      bucketName: `myapp-${props.environment}-data`,\n      versioned: true,\n      encryption: s3.BucketEncryption.S3_MANAGED,\n      lifecycleRules: [{\n        noncurrentVersionExpiration: cdk.Duration.days(props.retentionDays),\n      }],\n    });\n  }\n}\n\n// \u4f7f\u7528\u4f8b\nconst devBucket = new DataBucket(this, 'DevBucket', {\n  environment: 'dev',\n  retentionDays: 30,\n});\n\nconst prodBucket = new DataBucket(this, 'ProdBucket', {\n  environment: 'prod',\n  retentionDays: 90,\n});\n</code></pre> <pre><code># modules/data_bucket/main.tf (\u518d\u5229\u7528\u53ef\u80fd\u306a\u30e2\u30b8\u30e5\u30fc\u30eb)\nvariable \"environment\" {\n  type = string\n}\n\nvariable \"retention_days\" {\n  type = number\n}\n\nresource \"aws_s3_bucket\" \"this\" {\n  bucket = \"myapp-${var.environment}-data\"\n}\n\nresource \"aws_s3_bucket_versioning\" \"this\" {\n  bucket = aws_s3_bucket.this.id\n  versioning_configuration {\n    status = \"Enabled\"\n  }\n}\n\nresource \"aws_s3_bucket_server_side_encryption_configuration\" \"this\" {\n  bucket = aws_s3_bucket.this.id\n  rule {\n    apply_server_side_encryption_by_default {\n      sse_algorithm = \"AES256\"\n    }\n  }\n}\n\nresource \"aws_s3_bucket_lifecycle_configuration\" \"this\" {\n  bucket = aws_s3_bucket.this.id\n  rule {\n    id     = \"delete-old-versions\"\n    status = \"Enabled\"\n    noncurrent_version_expiration {\n      noncurrent_days = var.retention_days\n    }\n  }\n}\n\noutput \"bucket_name\" {\n  value = aws_s3_bucket.this.bucket\n}\n\n# \u4f7f\u7528\u4f8b (main.tf)\nmodule \"dev_bucket\" {\n  source = \"./modules/data_bucket\"\n\n  environment    = \"dev\"\n  retention_days = 30\n}\n\nmodule \"prod_bucket\" {\n  source = \"./modules/data_bucket\"\n\n  environment    = \"prod\"\n  retention_days = 90\n}\n</code></pre>"},{"location":"iac/coding-principles/#2","title":"2. \u9069\u5207\u306a\u7ba1\u7406\u5358\u4f4d\u306e\u5206\u5272","text":"<p>\u7ba1\u7406\u5358\u4f4d(CDK\u306eStack\u3001Terraform\u306eState)\u306f\u8cac\u4efb\u3084\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u306a\u3069\u3092\u8003\u616e\u3057\u3066\u5206\u5272\u3057\u307e\u3059\u3002</p>"},{"location":"iac/coding-principles/#_3","title":"\u5206\u5272\u306e\u57fa\u6e96","text":"<p>\u8cac\u4efb\u306b\u3088\u308b\u5206\u5272</p> <ul> <li>\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306a\u3069\u6a5f\u80fd\u5358\u4f4d\u3067\u5206\u96e2</li> </ul> <p>\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u306b\u3088\u308b\u5206\u5272</p> <ul> <li>\u5909\u66f4\u983b\u5ea6\u304c\u7570\u306a\u308b\u30ea\u30bd\u30fc\u30b9\u3092\u5206\u96e2</li> <li>\u30c7\u30d7\u30ed\u30a4\u30ea\u30b9\u30af\u304c\u7570\u306a\u308b\u30ea\u30bd\u30fc\u30b9\u3092\u5206\u96e2</li> <li>\u524a\u9664\u30fb\u518d\u4f5c\u6210\u306e\u5bb9\u6613\u6027\u3092\u8003\u616e</li> </ul> <p>\u274c \u60aa\u3044\u4f8b: \u5168\u3066\u30921\u3064\u306e\u7ba1\u7406\u5358\u4f4d\u306b</p> CDK (TypeScript)Terraform (HCL) <pre><code>export class MonolithStack extends Stack {\n  constructor(scope: Construct, id: string) {\n    super(scope, id);\n\n    // \u30cd\u30c3\u30c8\u30ef\u30fc\u30af (\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb: \u307b\u307c\u5909\u66f4\u3057\u306a\u3044)\n    const vpc = new ec2.Vpc(this, 'Vpc');\n\n    // \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9 (\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb: \u307e\u308c\u306b\u5909\u66f4\u3001\u524a\u9664\u306f\u5371\u967a)\n    const database = new rds.DatabaseInstance(this, 'Database', { /*...*/ });\n\n    // Lambda\u95a2\u6570 (\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb: \u983b\u7e41\u306b\u5909\u66f4)\n    const lambda = new lambda.Function(this, 'Function', { /*...*/ });\n\n    // API Gateway (\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb: \u983b\u7e41\u306b\u5909\u66f4)\n    const api = new apigateway.RestApi(this, 'Api', { /*...*/ });\n\n    // \u554f\u984c:\n    // - \u5168\u3066\u304c\u5bc6\u7d50\u5408\u3001\u5909\u66f4\u6642\u306e\u5f71\u97ff\u7bc4\u56f2\u304c\u5927\u304d\u3044\n    // - Lambda\u5909\u66f4\u306e\u305f\u3073\u306bVPC\u30fbDB\u3082\u518d\u8a55\u4fa1\u3055\u308c\u308b\n    // - \u958b\u767a\u74b0\u5883\u3067\u8a66\u884c\u932f\u8aa4\u3057\u306b\u304f\u3044\n  }\n}\n</code></pre> <pre><code># main.tf (\u5168\u3066\u304c1\u3064\u306e\u30d5\u30a1\u30a4\u30eb/state)\n\n# \u30cd\u30c3\u30c8\u30ef\u30fc\u30af (\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb: \u307b\u307c\u5909\u66f4\u3057\u306a\u3044)\nresource \"aws_vpc\" \"main\" {\n  cidr_block = \"10.0.0.0/16\"\n}\n\n# \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9 (\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb: \u307e\u308c\u306b\u5909\u66f4\u3001\u524a\u9664\u306f\u5371\u967a)\nresource \"aws_db_instance\" \"main\" {\n  allocated_storage = 20\n  engine            = \"mysql\"\n  # ...\n}\n\n# Lambda\u95a2\u6570 (\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb: \u983b\u7e41\u306b\u5909\u66f4)\nresource \"aws_lambda_function\" \"main\" {\n  function_name = \"myapp-function\"\n  # ...\n}\n\n# API Gateway (\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb: \u983b\u7e41\u306b\u5909\u66f4)\nresource \"aws_api_gateway_rest_api\" \"main\" {\n  name = \"myapp-api\"\n  # ...\n}\n\n# \u554f\u984c:\n# - \u5168\u3066\u304c1\u3064\u306estate\u30d5\u30a1\u30a4\u30eb\u3067\u7ba1\u7406\u3055\u308c\u308b\n# - Lambda\u5909\u66f4\u306e\u305f\u3073\u306bVPC\u30fbDB\u3082plan\u306b\u542b\u307e\u308c\u308b\n# - \u958b\u767a\u74b0\u5883\u3067\u8a66\u884c\u932f\u8aa4\u3057\u306b\u304f\u3044\n</code></pre> <p>\u2705 \u826f\u3044\u4f8b: \u8cac\u4efb\u3068\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u3067\u7ba1\u7406\u5358\u4f4d\u3092\u5206\u5272</p> CDK (TypeScript)Terraform (HCL) <pre><code>// \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5c64 (\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb: \u9577\u671f\u9593\u5b89\u5b9a)\nexport class NetworkStack extends Stack {\n  public readonly vpc: ec2.Vpc;\n\n  constructor(scope: Construct, id: string) {\n    super(scope, id);\n    this.vpc = new ec2.Vpc(this, 'Vpc', {\n      maxAzs: 2,\n      // \u4e00\u5ea6\u69cb\u7bc9\u3057\u305f\u3089\u307b\u307c\u5909\u66f4\u3057\u306a\u3044\n    });\n  }\n}\n\n// \u30c7\u30fc\u30bf\u5c64 (\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb: \u5909\u66f4\u307e\u308c\u3001\u6c38\u7d9a\u5316\u304c\u91cd\u8981)\nexport class DatabaseStack extends Stack {\n  constructor(scope: Construct, id: string, props: {\n    vpc: ec2.Vpc;\n  }) {\n    super(scope, id);\n    new rds.DatabaseInstance(this, 'Database', {\n      vpc: props.vpc,\n      deletionProtection: true,  // \u524a\u9664\u4fdd\u8b77\n      // \u30c7\u30fc\u30bf\u306f\u6c38\u7d9a\u5316\u3001\u614e\u91cd\u306a\u5909\u66f4\u304c\u5fc5\u8981\n    });\n  }\n}\n\n// \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64 (\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb: \u983b\u7e41\u306b\u5909\u66f4)\nexport class ApplicationStack extends Stack {\n  constructor(scope: Construct, id: string, props: {\n    vpc: ec2.Vpc;\n  }) {\n    super(scope, id);\n    // Lambda, API Gateway \u306a\u3069\n    // \u983b\u7e41\u306b\u30c7\u30d7\u30ed\u30a4\u3001\u958b\u767a\u74b0\u5883\u3067\u306f\u524a\u9664\u30fb\u518d\u4f5c\u6210\u3082\u5bb9\u6613\n  }\n}\n</code></pre> <pre><code># network/main.tf (\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb: \u9577\u671f\u9593\u5b89\u5b9a)\nresource \"aws_vpc\" \"main\" {\n  cidr_block = \"10.0.0.0/16\"\n  # \u4e00\u5ea6\u69cb\u7bc9\u3057\u305f\u3089\u307b\u307c\u5909\u66f4\u3057\u306a\u3044\n}\n\noutput \"vpc_id\" {\n  value = aws_vpc.main.id\n}\n\n# database/main.tf (\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb: \u5909\u66f4\u307e\u308c\u3001\u6c38\u7d9a\u5316\u304c\u91cd\u8981)\ndata \"terraform_remote_state\" \"network\" {\n  backend = \"s3\"\n  config = {\n    bucket = \"myapp-terraform-state\"\n    key    = \"network/terraform.tfstate\"\n  }\n}\n\nresource \"aws_db_instance\" \"main\" {\n  vpc_security_group_ids = [data.terraform_remote_state.network.outputs.vpc_id]\n  # \u30c7\u30fc\u30bf\u306f\u6c38\u7d9a\u5316\u3001\u614e\u91cd\u306a\u5909\u66f4\u304c\u5fc5\u8981\n  # ...\n}\n\n# application/main.tf (\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb: \u983b\u7e41\u306b\u5909\u66f4)\ndata \"terraform_remote_state\" \"network\" {\n  backend = \"s3\"\n  config = {\n    bucket = \"myapp-terraform-state\"\n    key    = \"network/terraform.tfstate\"\n  }\n}\n\nresource \"aws_lambda_function\" \"main\" {\n  function_name = \"myapp-function\"\n  # \u983b\u7e41\u306b\u30c7\u30d7\u30ed\u30a4\u3001\u958b\u767a\u74b0\u5883\u3067\u306f\u524a\u9664\u30fb\u518d\u4f5c\u6210\u3082\u5bb9\u6613\n  # ...\n}\n\nresource \"aws_api_gateway_rest_api\" \"main\" {\n  name = \"myapp-api\"\n  # ...\n}\n</code></pre> <p>\u30e1\u30ea\u30c3\u30c8:</p> <ul> <li>\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5909\u66f4\u306a\u3057\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30c7\u30d7\u30ed\u30a4\u53ef\u80fd</li> <li>\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u4fdd\u8b77\u3057\u3064\u3064\u3001\u30a2\u30d7\u30ea\u306f\u81ea\u7531\u306b\u5909\u66f4\u53ef\u80fd</li> <li>\u958b\u767a\u74b0\u5883\u3067\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\u306e\u307f\u524a\u9664\u30fb\u518d\u4f5c\u6210\u53ef\u80fd</li> </ul>"},{"location":"iac/coding-principles/#_4","title":"\u547d\u540d\u898f\u5247","text":""},{"location":"iac/coding-principles/#_5","title":"\u30ea\u30bd\u30fc\u30b9\u540d","text":"<p>\u4e00\u8cab\u3057\u305f\u547d\u540d\u30d1\u30bf\u30fc\u30f3\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002</p> <pre><code>// \u30d1\u30bf\u30fc\u30f3: {\u30d7\u30ed\u30b8\u30a7\u30af\u30c8}-{\u74b0\u5883}-{\u7528\u9014}-{\u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7}\nconst bucketName = `myapp-${environment}-data-bucket`;\nconst functionName = `myapp-${environment}-processor-function`;\nconst tableName = `myapp-${environment}-users-table`;\n</code></pre>"},{"location":"iac/coding-principles/#_6","title":"\u30e2\u30b8\u30e5\u30fc\u30eb/\u30af\u30e9\u30b9\u540d","text":"<p>\u5404\u30c4\u30fc\u30eb\u306e\u547d\u540d\u898f\u5247\u306b\u5f93\u3044\u3001\u7528\u9014\u304c\u660e\u78ba\u306a\u540d\u524d\u306b\u3057\u307e\u3059\u3002</p> CDK (TypeScript)Terraform (HCL) <p>PascalCase\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002</p> <pre><code>// \u2705 \u826f\u3044\u4f8b\nexport class UserAuthenticationStack extends Stack { }\nexport class DataProcessingPipeline extends Construct { }\nexport class MonitoringDashboard extends Construct { }\n\n// \u274c \u60aa\u3044\u4f8b\nexport class Stack1 extends Stack { }  // \u7528\u9014\u4e0d\u660e\nexport class mystack extends Stack { }  // \u547d\u540d\u898f\u5247\u9055\u53cd\n</code></pre> <p>snake_case\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002</p> <pre><code># \u2705 \u826f\u3044\u4f8b: \u30e2\u30b8\u30e5\u30fc\u30eb\u540d\u3084\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u540d\nmodules/user_authentication/\nmodules/data_processing_pipeline/\nmodules/monitoring_dashboard/\n\n# \u274c \u60aa\u3044\u4f8b\nmodules/module1/  # \u7528\u9014\u4e0d\u660e\nmodules/MyModule/ # snake_case\u304c\u63a8\u5968\n</code></pre>"},{"location":"iac/coding-principles/#_7","title":"\u5909\u6570\u540d","text":"<pre><code>// \u2705 \u826f\u3044\u4f8b: \u7528\u9014\u304c\u660e\u78ba\nconst userDataBucket = new s3.Bucket(/*...*/);\nconst orderProcessorFunction = new lambda.Function(/*...*/);\nconst customerTable = new dynamodb.Table(/*...*/);\n\n// \u274c \u60aa\u3044\u4f8b: \u7528\u9014\u4e0d\u660e\nconst bucket1 = new s3.Bucket(/*...*/);\nconst func = new lambda.Function(/*...*/);\nconst tbl = new dynamodb.Table(/*...*/);\n</code></pre>"},{"location":"iac/coding-principles/#_8","title":"\u30d1\u30e9\u30e1\u30fc\u30bf\u5316","text":"<p>\u74b0\u5883\u3054\u3068\u306e\u5dee\u5206\u306f\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067\u7ba1\u7406\u3057\u307e\u3059\u3002</p>"},{"location":"iac/coding-principles/#_9","title":"\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u5206\u96e2","text":"<pre><code>// config/dev.ts\nexport const devConfig = {\n  environment: 'dev',\n  instanceType: ec2.InstanceType.of(ec2.InstanceClass.T3, ec2.InstanceSize.SMALL),\n  minCapacity: 1,\n  maxCapacity: 2,\n  dbBackupRetention: 7,\n};\n\n// config/prod.ts\nexport const prodConfig = {\n  environment: 'prod',\n  instanceType: ec2.InstanceType.of(ec2.InstanceClass.M5, ec2.InstanceSize.LARGE),\n  minCapacity: 2,\n  maxCapacity: 10,\n  dbBackupRetention: 30,\n};\n</code></pre>"},{"location":"iac/coding-principles/#_10","title":"\u8a2d\u5b9a\u306e\u4f7f\u7528","text":"<pre><code>import { devConfig } from './config/dev';\nimport { prodConfig } from './config/prod';\n\nconst config = process.env.ENV === 'prod' ? prodConfig : devConfig;\n\nexport class ApplicationStack extends Stack {\n  constructor(scope: Construct, id: string) {\n    super(scope, id);\n\n    new rds.DatabaseInstance(this, 'Database', {\n      instanceType: config.instanceType,\n      backupRetention: cdk.Duration.days(config.dbBackupRetention),\n    });\n  }\n}\n</code></pre>"},{"location":"iac/coding-principles/#_11","title":"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9","text":""},{"location":"iac/coding-principles/#_12","title":"\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u7ba1\u7406","text":"<p>\u6700\u91cd\u8981\u539f\u5247</p> <p>\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u60c5\u5831\u306f\u7d76\u5bfe\u306bIaC\u30b3\u30fc\u30c9\u306b\u542b\u3081\u305a\u3001VCS(Git)\u306b\u30b3\u30df\u30c3\u30c8\u3057\u306a\u3044</p> <ul> <li>\u30d1\u30b9\u30ef\u30fc\u30c9\u3001API\u30ad\u30fc\u3001\u30c8\u30fc\u30af\u30f3\u306a\u3069\u306f\u30b3\u30fc\u30c9\u306b\u66f8\u304b\u306a\u3044</li> <li><code>.env</code>\u30d5\u30a1\u30a4\u30eb\u306a\u3069\u3082Git\u306b\u30b3\u30df\u30c3\u30c8\u3057\u306a\u3044(<code>.gitignore</code>\u306b\u8ffd\u52a0)</li> <li>\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u306f\u5c02\u7528\u306e\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u7ba1\u7406\u30b5\u30fc\u30d3\u30b9\u3067\u7ba1\u7406\u3059\u308b</li> </ul> <p>\u274c \u7d76\u5bfe\u306b\u3084\u3063\u3066\u306f\u3044\u3051\u306a\u3044</p> CDK (TypeScript)Terraform (HCL) <pre><code>// \u274c \u30b3\u30fc\u30c9\u306b\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u30cf\u30fc\u30c9\u30b3\u30fc\u30c9\nconst apiKey = 'sk-1234567890abcdef';  // \u7d76\u5bfeNG! Git\u306b\u30b3\u30df\u30c3\u30c8\u3055\u308c\u308b!\n\n// \u274c \u74b0\u5883\u5909\u6570\u306b\u76f4\u63a5\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u8a2d\u5b9a\nenvironment: {\n  DATABASE_PASSWORD: 'MyP@ssw0rd',  // \u7d76\u5bfeNG! VCS\u5c65\u6b74\u306b\u6b8b\u308b!\n}\n</code></pre> <pre><code># \u274c \u30b3\u30fc\u30c9\u306b\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u30cf\u30fc\u30c9\u30b3\u30fc\u30c9\nvariable \"api_key\" {\n  default = \"sk-1234567890abcdef\"  # \u7d76\u5bfeNG! Git\u306b\u30b3\u30df\u30c3\u30c8\u3055\u308c\u308b!\n}\n\n# \u274c \u74b0\u5883\u5909\u6570\u306b\u76f4\u63a5\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u8a2d\u5b9a\nresource \"aws_lambda_function\" \"main\" {\n  environment {\n    variables = {\n      DATABASE_PASSWORD = \"MyP@ssw0rd\"  # \u7d76\u5bfeNG! VCS\u5c65\u6b74\u306b\u6b8b\u308b!\n    }\n  }\n}\n</code></pre> <p>\u2705 \u6b63\u3057\u3044\u65b9\u6cd5: \u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u7ba1\u7406\u30b5\u30fc\u30d3\u30b9\u3092\u4f7f\u7528</p> <p>IaC\u30b3\u30fc\u30c9\u3067\u306f\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u7ba1\u7406\u30b5\u30fc\u30d3\u30b9\u306e\u30ea\u30bd\u30fc\u30b9\u3092\u5b9a\u7fa9\u3059\u308b\u306e\u307f\u3067\u3001\u5b9f\u969b\u306e\u5024\u306f\u30b3\u30fc\u30c9\u306b\u542b\u3081\u307e\u305b\u3093\u3002</p> CDK (TypeScript)Terraform (HCL) <pre><code>// Secrets Manager\u3092\u4f7f\u7528 (\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u5024\u81ea\u4f53\u306f\u30b3\u30fc\u30c9\u306b\u542b\u307e\u308c\u306a\u3044)\nconst dbSecret = new secretsmanager.Secret(this, 'DBSecret', {\n  generateSecretString: {\n    secretStringTemplate: JSON.stringify({ username: 'admin' }),\n    generateStringKey: 'password',  // \u3053\u306e\u30ad\u30fc\u306e\u5024\u304c\u81ea\u52d5\u751f\u6210\u3055\u308c\u308b\n    excludeCharacters: '\"@/\\\\',\n  },\n});\n\n// Lambda\u95a2\u6570\u304b\u3089\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u53c2\u7167\nconst lambda = new lambda.Function(this, 'Function', {\n  environment: {\n    SECRET_ARN: dbSecret.secretArn,  // ARN\u306e\u307f\u6e21\u3059(\u5024\u3067\u306f\u306a\u3044)\n  },\n});\n\ndbSecret.grantRead(lambda);  // \u8aad\u307f\u53d6\u308a\u6a29\u9650\u3092\u4ed8\u4e0e\n</code></pre> <pre><code># Secrets Manager\u3092\u4f7f\u7528 (\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u5024\u81ea\u4f53\u306f\u30b3\u30fc\u30c9\u306b\u542b\u307e\u308c\u306a\u3044)\nresource \"aws_secretsmanager_secret\" \"db_secret\" {\n  name = \"myapp-db-secret\"\n}\n\nresource \"aws_secretsmanager_secret_version\" \"db_secret\" {\n  secret_id = aws_secretsmanager_secret.db_secret.id\n  secret_string = jsonencode({\n    username = \"admin\"\n    password = random_password.db_password.result  # \u30e9\u30f3\u30c0\u30e0\u751f\u6210\n  })\n}\n\n# \u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u30e9\u30f3\u30c0\u30e0\u751f\u6210\nresource \"random_password\" \"db_password\" {\n  length  = 16\n  special = true\n}\n\n# Lambda\u95a2\u6570\u304b\u3089\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u53c2\u7167\nresource \"aws_lambda_function\" \"main\" {\n  function_name = \"myapp-function\"\n\n  environment {\n    variables = {\n      SECRET_ARN = aws_secretsmanager_secret.db_secret.arn  # ARN\u306e\u307f\u6e21\u3059\n    }\n  }\n}\n\n# \u8aad\u307f\u53d6\u308a\u6a29\u9650\u3092\u4ed8\u4e0e\nresource \"aws_iam_role_policy\" \"lambda_secrets\" {\n  role = aws_iam_role.lambda_role.id\n\n  policy = jsonencode({\n    Version = \"2012-10-17\"\n    Statement = [{\n      Effect = \"Allow\"\n      Action = [\n        \"secretsmanager:GetSecretValue\"\n      ]\n      Resource = aws_secretsmanager_secret.db_secret.arn\n    }]\n  })\n}\n</code></pre> <p>\u30dd\u30a4\u30f3\u30c8:</p> <ul> <li>IaC\u30b3\u30fc\u30c9\u306b\u306f\u300c\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u7ba1\u7406\u3059\u308b\u30ea\u30bd\u30fc\u30b9\u306e\u5b9a\u7fa9\u300d\u306e\u307f\u3092\u8a18\u8ff0</li> <li>\u5b9f\u969b\u306e\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u5024\u306fAWS Secrets Manager\u304c\u81ea\u52d5\u751f\u6210\u30fb\u5b89\u5168\u306b\u4fdd\u7ba1</li> <li>\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f\u5b9f\u884c\u6642\u306b\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u53d6\u5f97\u3059\u308b</li> </ul>"},{"location":"iac/coding-principles/#_13","title":"\u30e2\u30b8\u30e5\u30fc\u30eb\u5316\u3068\u518d\u5229\u7528\u6027","text":"<p>DRY\u539f\u5247\u3092\u5b9f\u8df5\u3059\u308b\u4e0a\u3067\u3001\u3069\u3053\u307e\u3067\u30e2\u30b8\u30e5\u30fc\u30eb\u5316\u3059\u3079\u304d\u304b\u306e\u5224\u65ad\u304c\u91cd\u8981\u3067\u3059\u3002</p> <p>\u95a2\u9023\u30bb\u30af\u30b7\u30e7\u30f3</p> <p>\u5b9f\u969b\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u914d\u7f6e\u65b9\u6cd5\u306b\u3064\u3044\u3066\u306f\u3001\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210 - \u30e2\u30b8\u30e5\u30fc\u30eb/Construct\u306e\u7c92\u5ea6\u3082\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"iac/coding-principles/#_14","title":"\u30e2\u30b8\u30e5\u30fc\u30eb\u5316\u3059\u3079\u304d\u30b1\u30fc\u30b9","text":"<p>\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u5834\u5408\u306f\u3001\u7a4d\u6975\u7684\u306b\u30e2\u30b8\u30e5\u30fc\u30eb\u5316\u3092\u691c\u8a0e\u3059\u3079\u304d\u3067\u3059:</p> <p>1. \u7d44\u7e54\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30dd\u30ea\u30b7\u30fc\u3084\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u3092\u5f37\u5236\u3057\u305f\u3044</p> <ul> <li>\u300c\u5168\u3066\u306eS3\u30d0\u30b1\u30c3\u30c8\u306f\u6697\u53f7\u5316\u5fc5\u9808\u300d\u306a\u3069\u306e\u30dd\u30ea\u30b7\u30fc\u3092\u30b3\u30fc\u30c9\u3067\u5f37\u5236</li> <li>\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u5b89\u5168\u306a\u8a2d\u5b9a\u3092\u9069\u7528\u3057\u3001\u8a2d\u5b9a\u6f0f\u308c\u3092\u9632\u3050</li> </ul> <p>2. \u8907\u6570\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u5171\u901a\u5229\u7528\u3059\u308b</p> <ul> <li>\u793e\u5185\u306e\u8907\u6570\u30c1\u30fc\u30e0\u3067\u540c\u3058\u30d1\u30bf\u30fc\u30f3\u3092\u4f7f\u3044\u56de\u3059</li> <li>\u4e00\u5ea6\u4f5c\u6210\u3057\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u5225\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u3082\u518d\u5229\u7528</li> </ul> <p>3. \u8907\u96d1\u306a\u69cb\u6210\u3092\u30ab\u30d7\u30bb\u30eb\u5316\u3057\u3066\u30b7\u30f3\u30d7\u30eb\u306b\u3057\u305f\u3044</p> <ul> <li>\u8907\u6570\u30ea\u30bd\u30fc\u30b9\u306e\u7d44\u307f\u5408\u308f\u305b\u30921\u3064\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u306b\u307e\u3068\u3081\u308b</li> <li>\u5229\u7528\u5074\u306f\u8a73\u7d30\u3092\u6c17\u306b\u305b\u305a\u4f7f\u3048\u308b</li> </ul>"},{"location":"iac/coding-principles/#s3","title":"\u30e2\u30b8\u30e5\u30fc\u30eb\u5316\u306e\u4f8b: \u30bb\u30ad\u30e5\u30a2\u306aS3\u30d0\u30b1\u30c3\u30c8","text":"<p>\u7d44\u7e54\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30dd\u30ea\u30b7\u30fc\u3092\u6e80\u305f\u3059S3\u30d0\u30b1\u30c3\u30c8\u3092\u6bce\u56de\u5b9a\u7fa9\u3059\u308b\u306e\u306f\u624b\u9593\u304c\u304b\u304b\u308a\u3001\u8a2d\u5b9a\u6f0f\u308c\u306e\u30ea\u30b9\u30af\u3082\u3042\u308a\u307e\u3059\u3002</p> CDK (TypeScript)Terraform (HCL) <pre><code>// constructs/secure-bucket.ts\n// \u7d44\u7e54\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30dd\u30ea\u30b7\u30fc\u3092\u5f37\u5236\u3059\u308b\u30e2\u30b8\u30e5\u30fc\u30eb\nexport class SecureBucket extends Construct {\n  public readonly bucket: s3.Bucket;\n\n  constructor(scope: Construct, id: string, props?: s3.BucketProps) {\n    super(scope, id);\n\n    // \u30bb\u30ad\u30e5\u30a2\u306a\u8a2d\u5b9a\u3092\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u9069\u7528(\u4e0a\u66f8\u304d\u4e0d\u53ef)\n    this.bucket = new s3.Bucket(this, 'Resource', {\n      ...props,\n      // \u4ee5\u4e0b\u306f\u7d44\u7e54\u30dd\u30ea\u30b7\u30fc\u3068\u3057\u3066\u5f37\u5236\n      encryption: s3.BucketEncryption.S3_MANAGED,\n      blockPublicAccess: s3.BlockPublicAccess.BLOCK_ALL,\n      versioned: true,\n      enforceSSL: true,\n    });\n\n    // \u30a2\u30af\u30bb\u30b9\u30ed\u30b0\u3092\u81ea\u52d5\u3067\u6709\u52b9\u5316\n    const logBucket = new s3.Bucket(this, 'LogBucket', {\n      encryption: s3.BucketEncryption.S3_MANAGED,\n      blockPublicAccess: s3.BlockPublicAccess.BLOCK_ALL,\n    });\n\n    this.bucket.logToBucket(logBucket);\n  }\n}\n\n// \u4f7f\u7528\u4f8b: \u958b\u767a\u8005\u306f\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a\u3092\u6c17\u306b\u305b\u305a\u5229\u7528\u3067\u304d\u308b\nconst dataBucket = new SecureBucket(this, 'DataBucket');\n</code></pre> <pre><code># modules/secure_bucket/main.tf\n# \u7d44\u7e54\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30dd\u30ea\u30b7\u30fc\u3092\u5f37\u5236\u3059\u308b\u30e2\u30b8\u30e5\u30fc\u30eb\nvariable \"bucket_name\" {\n  type = string\n}\n\n# \u30e1\u30a4\u30f3\u30d0\u30b1\u30c3\u30c8(\u30bb\u30ad\u30e5\u30a2\u306a\u8a2d\u5b9a\u3092\u5f37\u5236)\nresource \"aws_s3_bucket\" \"this\" {\n  bucket = var.bucket_name\n}\n\n# \u30d0\u30fc\u30b8\u30e7\u30cb\u30f3\u30b0(\u7d44\u7e54\u30dd\u30ea\u30b7\u30fc\u3067\u5fc5\u9808)\nresource \"aws_s3_bucket_versioning\" \"this\" {\n  bucket = aws_s3_bucket.this.id\n  versioning_configuration {\n    status = \"Enabled\"\n  }\n}\n\n# \u6697\u53f7\u5316(\u7d44\u7e54\u30dd\u30ea\u30b7\u30fc\u3067\u5fc5\u9808)\nresource \"aws_s3_bucket_server_side_encryption_configuration\" \"this\" {\n  bucket = aws_s3_bucket.this.id\n  rule {\n    apply_server_side_encryption_by_default {\n      sse_algorithm = \"AES256\"\n    }\n  }\n}\n\n# \u30d1\u30d6\u30ea\u30c3\u30af\u30a2\u30af\u30bb\u30b9\u30d6\u30ed\u30c3\u30af(\u7d44\u7e54\u30dd\u30ea\u30b7\u30fc\u3067\u5fc5\u9808)\nresource \"aws_s3_bucket_public_access_block\" \"this\" {\n  bucket = aws_s3_bucket.this.id\n\n  block_public_acls       = true\n  block_public_policy     = true\n  ignore_public_acls      = true\n  restrict_public_buckets = true\n}\n\n# \u30a2\u30af\u30bb\u30b9\u30ed\u30b0\u30d0\u30b1\u30c3\u30c8\nresource \"aws_s3_bucket\" \"logs\" {\n  bucket = \"${var.bucket_name}-logs\"\n}\n\nresource \"aws_s3_bucket_logging\" \"this\" {\n  bucket        = aws_s3_bucket.this.id\n  target_bucket = aws_s3_bucket.logs.id\n  target_prefix = \"log/\"\n}\n\noutput \"bucket_name\" {\n  value = aws_s3_bucket.this.bucket\n}\n\n# \u4f7f\u7528\u4f8b (main.tf)\n# \u958b\u767a\u8005\u306f\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a\u3092\u6c17\u306b\u305b\u305a\u5229\u7528\u3067\u304d\u308b\nmodule \"data_bucket\" {\n  source = \"./modules/secure_bucket\"\n\n  bucket_name = \"myapp-data\"\n}\n</code></pre>"},{"location":"iac/coding-principles/#_15","title":"\u30e2\u30b8\u30e5\u30fc\u30eb\u5316\u3057\u3059\u304e\u306a\u3044","text":"<p>\u4e00\u65b9\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u5834\u5408\u306f\u7121\u7406\u306b\u30e2\u30b8\u30e5\u30fc\u30eb\u5316\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093:</p> <p>\u274c \u5358\u4e00\u30ea\u30bd\u30fc\u30b9\u3060\u3051\u306e\u8584\u3044\u30e9\u30c3\u30d1\u30fc</p> <p>\u5358\u4e00\u306e\u30ea\u30bd\u30fc\u30b9\u3092\u305d\u306e\u307e\u307e\u30e2\u30b8\u30e5\u30fc\u30eb\u306b\u3059\u308b\u306e\u306f\u3001\u304b\u3048\u3063\u3066\u8907\u96d1\u3055\u3092\u5897\u3059\u3060\u3051\u3067\u3059\u3002</p> CDK (TypeScript)Terraform (HCL) <pre><code>// \u274c \u60aa\u3044\u4f8b: \u5358\u4e00\u30ea\u30bd\u30fc\u30b9\u3092\u30e2\u30b8\u30e5\u30fc\u30eb\u5316(\u3084\u308a\u3059\u304e)\nexport class MyBucket extends Construct {\n  public readonly bucket: s3.Bucket;\n\n  constructor(scope: Construct, id: string, props: s3.BucketProps) {\n    super(scope, id);\n    // \u5358\u306bBucket\u3092\u4f5c\u308b\u3060\u3051(\u4f55\u3082\u4ed8\u52a0\u4fa1\u5024\u304c\u306a\u3044)\n    this.bucket = new s3.Bucket(this, 'Bucket', props);\n  }\n}\n\n// \u2705 \u826f\u3044\u4f8b: \u76f4\u63a5\u66f8\u304f\nconst bucket = new s3.Bucket(this, 'MyBucket', {\n  bucketName: 'myapp-data',\n  versioned: true,\n});\n</code></pre> <pre><code># \u274c \u60aa\u3044\u4f8b: \u5358\u4e00\u30ea\u30bd\u30fc\u30b9\u3092\u30e2\u30b8\u30e5\u30fc\u30eb\u5316(\u3084\u308a\u3059\u304e)\n# modules/simple_bucket/main.tf\nvariable \"bucket_name\" {\n  type = string\n}\n\nresource \"aws_s3_bucket\" \"this\" {\n  bucket = var.bucket_name\n}\n\n# \u4f7f\u7528\u5074 (main.tf)\nmodule \"my_bucket\" {\n  source = \"./modules/simple_bucket\"\n  bucket_name = \"myapp-data\"\n}\n\n# \u2705 \u826f\u3044\u4f8b: \u76f4\u63a5\u66f8\u304f\nresource \"aws_s3_bucket\" \"my_bucket\" {\n  bucket = \"myapp-data\"\n}\n</code></pre> <p>\u306a\u305c\u30c0\u30e1\u304b: \u30e2\u30b8\u30e5\u30fc\u30eb\u5316\u306b\u3088\u308b\u8907\u96d1\u3055(\u30d5\u30a1\u30a4\u30eb\u5206\u5272\u3001\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u5b9a\u7fa9)\u304c\u3001\u518d\u5229\u7528\u306e\u30e1\u30ea\u30c3\u30c8\u3092\u4e0a\u56de\u3089\u306a\u3044\u3002</p> <p>\u274c 1\u56de\u3057\u304b\u4f7f\u308f\u306a\u3044\u69cb\u6210</p> <ul> <li>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u56fa\u6709\u306e\u69cb\u6210\u3092\u7121\u7406\u306b\u62bd\u8c61\u5316\u3057\u306a\u3044</li> <li>\u62bd\u8c61\u5316\u306e\u30b3\u30b9\u30c8\u304c\u518d\u5229\u7528\u306e\u30e1\u30ea\u30c3\u30c8\u3092\u4e0a\u56de\u308b</li> </ul> <p>\u274c \u8981\u4ef6\u304c\u983b\u7e41\u306b\u5909\u308f\u308b\u90e8\u5206</p> <ul> <li>\u30e2\u30b8\u30e5\u30fc\u30eb\u5316\u3059\u308b\u3068\u5909\u66f4\u6642\u306e\u5f71\u97ff\u7bc4\u56f2\u304c\u5e83\u304c\u308b</li> <li>\u67d4\u8edf\u6027\u304c\u5931\u308f\u308c\u308b</li> </ul> <p>\u30dd\u30a4\u30f3\u30c8: \u30e2\u30b8\u30e5\u30fc\u30eb\u5316\u306f\u300c3\u56de\u540c\u3058\u30d1\u30bf\u30fc\u30f3\u304c\u51fa\u3066\u304d\u305f\u3089\u300d\u691c\u8a0e\u3059\u308b\u3001\u3068\u3044\u3046\u7d4c\u9a13\u5247\u304c\u6709\u52b9\u3067\u3059\u3002</p>"},{"location":"iac/coding-principles/#_16","title":"\u30b3\u30e1\u30f3\u30c8\u3068\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8","text":""},{"location":"iac/coding-principles/#_17","title":"\u610f\u56f3\u3092\u8a18\u8ff0\u3059\u308b","text":"<p>\u30b3\u30fc\u30c9\u306e\u300c\u4f55\u3092\u3057\u3066\u3044\u308b\u304b\u300d\u3067\u306f\u306a\u304f\u3001\u300c\u306a\u305c\u305d\u3046\u3057\u305f\u304b\u300d(\u8a2d\u8a08\u610f\u56f3\u30fb\u30d3\u30b8\u30cd\u30b9\u8981\u4ef6)\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002</p> <pre><code>/**\n * \u30ed\u30b0\u30d5\u30a1\u30a4\u30eb\u4fdd\u7ba1\u7528\u30d0\u30b1\u30c3\u30c8\n *\n * \u80cc\u666f:\n * - \u76e3\u67fb\u8981\u4ef6\u306b\u3088\u308a90\u65e5\u9593\u306e\u30ed\u30b0\u4fdd\u7ba1\u304c\u7fa9\u52d9\u4ed8\u3051\u3089\u308c\u3066\u3044\u308b\n * - \u30b3\u30b9\u30c8\u524a\u6e1b\u306e\u305f\u3081\u3001\u53e4\u3044\u30ed\u30b0\u306f\u4f4e\u983b\u5ea6\u30a2\u30af\u30bb\u30b9\u30b9\u30c8\u30ec\u30fc\u30b8\u3078\u79fb\u884c\u3057\u305f\u3044\n *\n * \u8a2d\u8a08\u5224\u65ad:\n * - 30\u65e5\u7d4c\u904e\u5f8c\u306e\u30ed\u30b0\u306f\u307b\u3068\u3093\u3069\u30a2\u30af\u30bb\u30b9\u3055\u308c\u306a\u3044\u305f\u3081Glacier\u3078\u79fb\u884c\n * - \u904b\u7528\u30c1\u30fc\u30e0\u306e\u30aa\u30da\u30ec\u30fc\u30b7\u30e7\u30f3\u30df\u30b9\u306b\u3088\u308b\u8aa4\u524a\u9664\u3092\u9632\u3050\u305f\u3081\u30d0\u30fc\u30b8\u30e7\u30cb\u30f3\u30b0\u6709\u52b9\u5316\n */\nconst logBucket = new s3.Bucket(this, 'LogBucket', {\n  lifecycleRules: [{\n    // 30\u65e5\u7d4c\u904e\u5f8c\u306fGlacier\u3078\u79fb\u884c(\u76e3\u67fb\u8981\u4ef6\u306f\u6e80\u305f\u3057\u3064\u3064\u30b3\u30b9\u30c8\u524a\u6e1b)\n    transitions: [{\n      storageClass: s3.StorageClass.GLACIER,\n      transitionAfter: cdk.Duration.days(30),\n    }],\n    // 90\u65e5\u7d4c\u904e\u5f8c\u306f\u524a\u9664(\u76e3\u67fb\u8981\u4ef6\u306e\u4fdd\u7ba1\u671f\u9593)\n    expiration: cdk.Duration.days(90),\n  }],\n\n  // \u904b\u7528\u30c1\u30fc\u30e0\u306e\u30aa\u30da\u30ec\u30fc\u30b7\u30e7\u30f3\u30df\u30b9(aws s3 rm\u8aa4\u5b9f\u884c\u306a\u3069)\u304b\u3089\u306e\u4fdd\u8b77\n  versioned: true,\n});\n</code></pre>"},{"location":"iac/coding-principles/#_18","title":"\u8a2d\u8a08\u5224\u65ad\u306e\u8a18\u9332","text":"<pre><code>// NOTE: RDS\u3067\u306f\u306a\u304fAurora Serverless\u3092\u9078\u629e\u3057\u305f\u7406\u7531:\n// - \u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u304c\u4e0d\u5b9a\u671f\u3067\u81ea\u52d5\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u304c\u5fc5\u8981\n// - \u4f7f\u7528\u3057\u3066\u3044\u306a\u3044\u6642\u9593\u5e2f\u306f\u30b3\u30b9\u30c8\u524a\u6e1b\u3057\u305f\u3044\n// - \u30de\u30eb\u30c1AZ\u69cb\u6210\u3067\u9ad8\u53ef\u7528\u6027\u3092\u78ba\u4fdd\nconst cluster = new rds.ServerlessCluster(this, 'Database', {\n  engine: rds.DatabaseClusterEngine.AURORA_MYSQL,\n  scaling: {\n    minCapacity: rds.AuroraCapacityUnit.ACU_2,\n    maxCapacity: rds.AuroraCapacityUnit.ACU_16,\n    autoPause: cdk.Duration.minutes(10),\n  },\n});\n</code></pre>"},{"location":"iac/coding-principles/#_19","title":"\u307e\u3068\u3081","text":"<p>IaC\u30b3\u30fc\u30c9\u306e\u54c1\u8cea\u3092\u9ad8\u3081\u308b\u305f\u3081\u306e\u91cd\u8981\u306a\u539f\u5247:</p> <ul> <li>DRY\u539f\u5247: \u91cd\u8907\u3092\u907f\u3051\u3001\u518d\u5229\u7528\u53ef\u80fd\u306a\u69cb\u9020\u306b</li> <li>\u9069\u5207\u306a\u5206\u5272: \u7ba1\u7406\u5358\u4f4d(Stack/State)\u3084\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u8cac\u52d9\u3092\u660e\u78ba\u306b</li> <li>\u547d\u540d\u898f\u5247: \u4e00\u8cab\u3057\u305f\u30d1\u30bf\u30fc\u30f3\u3067\u53ef\u8aad\u6027\u5411\u4e0a</li> <li>\u30d1\u30e9\u30e1\u30fc\u30bf\u5316: \u74b0\u5883\u5dee\u5206\u3092\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067\u7ba1\u7406</li> <li>\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3: \u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u7ba1\u7406\u306e\u5fb9\u5e95</li> <li>\u30e2\u30b8\u30e5\u30fc\u30eb\u5316: \u5171\u901a\u30d1\u30bf\u30fc\u30f3\u306f\u518d\u5229\u7528\u53ef\u80fd\u306a\u30e2\u30b8\u30e5\u30fc\u30eb\u306b</li> <li>\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8: \u8a2d\u8a08\u610f\u56f3\u3092\u30b3\u30e1\u30f3\u30c8\u3067\u8a18\u9332</li> </ul> <p>\u3053\u308c\u3089\u306e\u539f\u5247\u3092\u5b88\u308b\u3053\u3068\u3067\u3001\u4fdd\u5b88\u6027\u304c\u9ad8\u304f\u3001\u30c1\u30fc\u30e0\u3067\u904b\u7528\u3057\u3084\u3059\u3044IaC\u30b3\u30fc\u30c9\u3092\u5b9f\u73fe\u3067\u304d\u307e\u3059\u3002</p> <p>\u6b21\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u3067\u306f\u3001IaC\u30b3\u30fc\u30c9\u306e\u54c1\u8cea\u3092\u4fdd\u8a3c\u3059\u308b\u30c6\u30b9\u30c8\u306b\u3064\u3044\u3066\u5b66\u3073\u307e\u3059\u3002</p> <p>\u30c6\u30b9\u30c8\u306e\u91cd\u8981\u6027 \u2192</p>"},{"location":"iac/declarative-vs-imperative/","title":"\u5ba3\u8a00\u7684\u5b9a\u7fa9 vs \u547d\u4ee4\u7684\u5b9a\u7fa9","text":"<p>IaC\u3092\u7406\u89e3\u3059\u308b\u4e0a\u3067\u6700\u3082\u91cd\u8981\u306a\u6982\u5ff5\u306e\u4e00\u3064\u304c\u3001\u5ba3\u8a00\u7684\u5b9a\u7fa9(Declarative)\u3068\u547d\u4ee4\u7684\u5b9a\u7fa9(Imperative)\u306e\u9055\u3044\u3067\u3059\u3002</p>"},{"location":"iac/declarative-vs-imperative/#_1","title":"\u547d\u4ee4\u7684\u30a2\u30d7\u30ed\u30fc\u30c1\u3068\u306f","text":"<p>\u547d\u4ee4\u7684\u30a2\u30d7\u30ed\u30fc\u30c1\u3067\u306f\u3001\u300c\u3069\u3046\u3084\u3063\u3066\u300d\u5b9f\u73fe\u3059\u308b\u304b\u3092\u4e00\u3064\u4e00\u3064\u306e\u624b\u9806\u3068\u3057\u3066\u8a18\u8ff0\u3057\u307e\u3059\u3002</p>"},{"location":"iac/declarative-vs-imperative/#aws-cli","title":"AWS CLI\u3067\u306e\u4f8b(\u547d\u4ee4\u7684)","text":"<p>S3\u30d0\u30b1\u30c3\u30c8\u3092\u4f5c\u6210\u3057\u3001\u30d0\u30fc\u30b8\u30e7\u30cb\u30f3\u30b0\u3068\u6697\u53f7\u5316\u3092\u6709\u52b9\u306b\u3059\u308b\u5834\u5408:</p> <pre><code># 1. \u30d0\u30b1\u30c3\u30c8\u3092\u4f5c\u6210\naws s3api create-bucket \\\n  --bucket my-app-data-bucket \\\n  --region ap-northeast-1 \\\n  --create-bucket-configuration LocationConstraint=ap-northeast-1\n\n# 2. \u30d0\u30fc\u30b8\u30e7\u30cb\u30f3\u30b0\u3092\u6709\u52b9\u5316\naws s3api put-bucket-versioning \\\n  --bucket my-app-data-bucket \\\n  --versioning-configuration Status=Enabled\n\n# 3. \u6697\u53f7\u5316\u3092\u8a2d\u5b9a\naws s3api put-bucket-encryption \\\n  --bucket my-app-data-bucket \\\n  --server-side-encryption-configuration '{\n    \"Rules\": [{\n      \"ApplyServerSideEncryptionByDefault\": {\n        \"SSEAlgorithm\": \"AES256\"\n      }\n    }]\n  }'\n\n# 4. \u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u30dd\u30ea\u30b7\u30fc\u3092\u8a2d\u5b9a\naws s3api put-bucket-lifecycle-configuration \\\n  --bucket my-app-data-bucket \\\n  --lifecycle-configuration '{\n    \"Rules\": [{\n      \"Id\": \"DeleteOldVersions\",\n      \"Status\": \"Enabled\",\n      \"NoncurrentVersionExpiration\": {\n        \"NoncurrentDays\": 90\n      }\n    }]\n  }'\n</code></pre>"},{"location":"iac/declarative-vs-imperative/#_2","title":"\u547d\u4ee4\u7684\u30a2\u30d7\u30ed\u30fc\u30c1\u306e\u8ab2\u984c","text":"<p>\u274c \u624b\u9806\u306e\u9806\u5e8f\u4f9d\u5b58</p> <ul> <li>\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u9806\u5e8f\u3092\u9593\u9055\u3048\u308b\u3068\u30a8\u30e9\u30fc\u306b\u306a\u308b</li> <li>\u30d0\u30b1\u30c3\u30c8\u304c\u5b58\u5728\u3057\u306a\u3044\u3068\u30d0\u30fc\u30b8\u30e7\u30cb\u30f3\u30b0\u8a2d\u5b9a\u306f\u3067\u304d\u306a\u3044</li> </ul> <p>\u274c \u51aa\u7b49\u6027\u304c\u306a\u3044</p> <ul> <li>\u540c\u3058\u30b3\u30de\u30f3\u30c9\u30922\u56de\u5b9f\u884c\u3059\u308b\u3068\u30a8\u30e9\u30fc\u306b\u306a\u308b\u53ef\u80fd\u6027</li> <li>\u65e2\u306b\u5b58\u5728\u3059\u308b\u30ea\u30bd\u30fc\u30b9\u3078\u306e\u5bfe\u5fdc\u304c\u5fc5\u8981</li> </ul> <p>\u274c \u73fe\u5728\u306e\u72b6\u614b\u304c\u4e0d\u660e</p> <ul> <li>\u300c\u4eca\u3001\u3069\u3046\u3044\u3046\u72b6\u614b\u304b\u300d\u3092\u628a\u63e1\u3059\u308b\u306b\u306f\u5225\u9014\u78ba\u8a8d\u304c\u5fc5\u8981</li> <li>\u8a2d\u5b9a\u6f0f\u308c\u3084\u8a2d\u5b9a\u30df\u30b9\u306b\u6c17\u3065\u304d\u306b\u304f\u3044</li> </ul> <p>\u274c \u5909\u66f4\u7ba1\u7406\u304c\u56f0\u96e3</p> <ul> <li>\u300c\u4f55\u3092\u5909\u66f4\u3057\u305f\u304b\u300d\u306e\u8a18\u9332\u304c\u6b8b\u3089\u306a\u3044</li> <li>\u30ed\u30fc\u30eb\u30d0\u30c3\u30af\u304c\u96e3\u3057\u3044</li> </ul>"},{"location":"iac/declarative-vs-imperative/#_3","title":"\u5ba3\u8a00\u7684\u30a2\u30d7\u30ed\u30fc\u30c1\u3068\u306f","text":"<p>\u5ba3\u8a00\u7684\u30a2\u30d7\u30ed\u30fc\u30c1\u3067\u306f\u3001\u300c\u4f55\u304c\u6b32\u3057\u3044\u304b\u300d(\u3042\u308b\u3079\u304d\u59ff)\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\u300c\u3069\u3046\u3084\u3063\u3066\u300d\u5b9f\u73fe\u3059\u308b\u304b\u306f\u30c4\u30fc\u30eb\u304c\u81ea\u52d5\u3067\u5224\u65ad\u3057\u307e\u3059\u3002</p>"},{"location":"iac/declarative-vs-imperative/#cdk","title":"CDK\u3067\u306e\u4f8b(\u5ba3\u8a00\u7684)","text":"<p>\u540c\u3058S3\u30d0\u30b1\u30c3\u30c8\u3092CDK\u3067\u5b9a\u7fa9:</p> <pre><code>import * as cdk from 'aws-cdk-lib';\nimport * as s3 from 'aws-cdk-lib/aws-s3';\nimport { Construct } from 'constructs';\n\nexport class StorageStack extends cdk.Stack {\n  constructor(scope: Construct, id: string, props?: cdk.StackProps) {\n    super(scope, id, props);\n\n    // \u3042\u308b\u3079\u304d\u59ff\u3092\u5ba3\u8a00\u3059\u308b\u3060\u3051\n    const bucket = new s3.Bucket(this, 'DataBucket', {\n      bucketName: 'my-app-data-bucket',\n      versioned: true,\n      encryption: s3.BucketEncryption.S3_MANAGED,\n      lifecycleRules: [\n        {\n          noncurrentVersionExpiration: cdk.Duration.days(90),\n        },\n      ],\n    });\n  }\n}\n</code></pre>"},{"location":"iac/declarative-vs-imperative/#terraform","title":"Terraform\u3067\u306e\u4f8b(\u5ba3\u8a00\u7684)","text":"<p>\u540c\u3058\u69cb\u6210\u3092Terraform\u3067\u5b9a\u7fa9:</p> <pre><code>resource \"aws_s3_bucket\" \"data_bucket\" {\n  bucket = \"my-app-data-bucket\"\n}\n\nresource \"aws_s3_bucket_versioning\" \"data_bucket\" {\n  bucket = aws_s3_bucket.data_bucket.id\n\n  versioning_configuration {\n    status = \"Enabled\"\n  }\n}\n\nresource \"aws_s3_bucket_server_side_encryption_configuration\" \"data_bucket\" {\n  bucket = aws_s3_bucket.data_bucket.id\n\n  rule {\n    apply_server_side_encryption_by_default {\n      sse_algorithm = \"AES256\"\n    }\n  }\n}\n\nresource \"aws_s3_bucket_lifecycle_configuration\" \"data_bucket\" {\n  bucket = aws_s3_bucket.data_bucket.id\n\n  rule {\n    id     = \"delete-old-versions\"\n    status = \"Enabled\"\n\n    noncurrent_version_expiration {\n      noncurrent_days = 90\n    }\n  }\n}\n</code></pre>"},{"location":"iac/declarative-vs-imperative/#_4","title":"\u5ba3\u8a00\u7684\u5b9a\u7fa9\u306e\u30e1\u30ea\u30c3\u30c8","text":""},{"location":"iac/declarative-vs-imperative/#1","title":"1. \u51aa\u7b49\u6027\u306e\u4fdd\u8a3c","text":"<p>\u4f55\u5ea6\u5b9f\u884c\u3057\u3066\u3082\u540c\u3058\u7d50\u679c\u306b\u306a\u308a\u307e\u3059\u3002</p> <pre><code>// 1\u56de\u76ee: \u30d0\u30b1\u30c3\u30c8\u3092\u4f5c\u6210\ncdk deploy\n\n// 2\u56de\u76ee: \u5909\u66f4\u304c\u306a\u3044\u306e\u3067\u4f55\u3082\u3057\u306a\u3044\ncdk deploy\n\n// \u8a2d\u5b9a\u3092\u5909\u66f4\u3057\u3066\u30c7\u30d7\u30ed\u30a4: \u5dee\u5206\u3060\u3051\u3092\u9069\u7528\nbucket.lifecycleRules[0].noncurrentVersionExpiration = cdk.Duration.days(60);\ncdk deploy  // \u2190 \u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u30eb\u30fc\u30eb\u306e\u307f\u66f4\u65b0\n</code></pre>"},{"location":"iac/declarative-vs-imperative/#2","title":"2. \u72b6\u614b\u7ba1\u7406\u306e\u81ea\u52d5\u5316","text":"<p>\u73fe\u5728\u306e\u72b6\u614b\u3068\u3042\u308b\u3079\u304d\u59ff\u3092\u6bd4\u8f03\u3057\u3001\u5dee\u5206\u3060\u3051\u3092\u9069\u7528\u3057\u307e\u3059\u3002</p> <pre><code># CDK\u306e\u5834\u5408\n$ cdk diff\nStack StorageStack\nResources\n[~] AWS::S3::Bucket DataBucket\n \u2514\u2500 [~] LifecycleConfiguration\n     \u2514\u2500 [~] .Rules[0].NoncurrentVersionExpiration.NoncurrentDays:\n         - 90\n         + 60\n</code></pre> <pre><code># Terraform\u306e\u5834\u5408\n$ terraform plan\nTerraform will perform the following actions:\n\n  # aws_s3_bucket_lifecycle_configuration.data_bucket will be updated in-place\n  ~ resource \"aws_s3_bucket_lifecycle_configuration\" \"data_bucket\" {\n      ~ rule {\n          ~ noncurrent_version_expiration {\n              ~ noncurrent_days = 90 -&gt; 60\n            }\n        }\n    }\n\nPlan: 0 to add, 1 to change, 0 to destroy.\n</code></pre>"},{"location":"iac/declarative-vs-imperative/#3","title":"3. \u9806\u5e8f\u3092\u6c17\u306b\u3057\u306a\u304f\u3066\u826f\u3044","text":"<p>\u30c4\u30fc\u30eb\u304c\u4f9d\u5b58\u95a2\u4fc2\u3092\u89e3\u6c7a\u3057\u3001\u6b63\u3057\u3044\u9806\u5e8f\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002</p> <pre><code>// \u3053\u306e\u9806\u5e8f\u3067\u3082\u52d5\u304f\nconst bucket = new s3.Bucket(this, 'DataBucket', {\n  versioned: true,\n  encryption: s3.BucketEncryption.S3_MANAGED,\n});\n\n// Lambda\u304c\u30d0\u30b1\u30c3\u30c8\u3092\u53c2\u7167\u3057\u3066\u3044\u3066\u3082\u3001\n// CDK\u304c\u81ea\u52d5\u7684\u306b\u30d0\u30b1\u30c3\u30c8\u2192Lambda \u306e\u9806\u5e8f\u3067\u30c7\u30d7\u30ed\u30a4\nconst lambda = new lambda.Function(this, 'Processor', {\n  environment: {\n    BUCKET_NAME: bucket.bucketName,  // \u4f9d\u5b58\u95a2\u4fc2\u3092\u81ea\u52d5\u691c\u51fa\n  },\n});\n</code></pre>"},{"location":"iac/declarative-vs-imperative/#4","title":"4. \u53ef\u8aad\u6027\u306e\u5411\u4e0a","text":"<p>\u30b3\u30fc\u30c9\u3092\u8aad\u3081\u3070\u3001\u73fe\u5728\u306e\u30a4\u30f3\u30d5\u30e9\u69cb\u6210\u304c\u4e00\u76ee\u3067\u308f\u304b\u308a\u307e\u3059\u3002</p> <pre><code>// \u3053\u306e\u30b3\u30fc\u30c9\u3092\u8aad\u3081\u3070\u3001\u4ee5\u4e0b\u304c\u5206\u304b\u308b:\n// - \u30d0\u30b1\u30c3\u30c8\u540d\n// - \u30d0\u30fc\u30b8\u30e7\u30cb\u30f3\u30b0\u6709\u52b9\n// - \u6697\u53f7\u5316\u6709\u52b9\n// - 90\u65e5\u3067\u30d0\u30fc\u30b8\u30e7\u30f3\u524a\u9664\nconst bucket = new s3.Bucket(this, 'DataBucket', {\n  bucketName: 'my-app-data-bucket',\n  versioned: true,\n  encryption: s3.BucketEncryption.S3_MANAGED,\n  lifecycleRules: [{\n    noncurrentVersionExpiration: cdk.Duration.days(90),\n  }],\n});\n</code></pre>"},{"location":"iac/declarative-vs-imperative/#5","title":"5. \u5909\u66f4\u306e\u5b89\u5168\u6027","text":"<p>\u5909\u66f4\u524d\u306b\u5dee\u5206\u78ba\u8a8d\u304c\u3067\u304d\u3001\u610f\u56f3\u3057\u306a\u3044\u5909\u66f4\u3092\u9632\u3052\u307e\u3059\u3002</p> <pre><code># \u5909\u66f4\u5185\u5bb9\u3092\u4e8b\u524d\u78ba\u8a8d\n$ cdk diff\n\n# \u554f\u984c\u306a\u3051\u308c\u3070\u30c7\u30d7\u30ed\u30a4\n$ cdk deploy\n\n# \u554f\u984c\u304c\u3042\u308c\u3070\u5373\u5ea7\u306b\u30ed\u30fc\u30eb\u30d0\u30c3\u30af\n$ git revert HEAD\n$ cdk deploy\n</code></pre>"},{"location":"iac/declarative-vs-imperative/#_5","title":"\u6bd4\u8f03\u8868","text":"\u89b3\u70b9 \u547d\u4ee4\u7684(CLI) \u5ba3\u8a00\u7684(IaC) \u8a18\u8ff0\u5185\u5bb9 \u624b\u9806(How) \u3042\u308b\u3079\u304d\u59ff(What) \u51aa\u7b49\u6027 \u274c \u306a\u3057 \u2705 \u3042\u308a \u72b6\u614b\u7ba1\u7406 \u274c \u624b\u52d5 \u2705 \u81ea\u52d5 \u5dee\u5206\u78ba\u8a8d \u274c \u56f0\u96e3 \u2705 \u7c21\u5358(<code>diff</code>\u30b3\u30de\u30f3\u30c9) \u30ed\u30fc\u30eb\u30d0\u30c3\u30af \u274c \u624b\u52d5\u3067\u9006\u64cd\u4f5c \u2705 \u524d\u306e\u30b3\u30fc\u30c9\u3092\u30c7\u30d7\u30ed\u30a4 \u53ef\u8aad\u6027 \u274c \u4f4e\u3044(\u30ed\u30b0\u3092\u8ffd\u3046\u5fc5\u8981) \u2705 \u9ad8\u3044(\u30b3\u30fc\u30c9\u3092\u8aad\u3081\u3070\u5206\u304b\u308b) \u518d\u73fe\u6027 \u274c \u4f4e\u3044 \u2705 \u9ad8\u3044"},{"location":"iac/declarative-vs-imperative/#_6","title":"\u5b9f\u969b\u306e\u904b\u7528\u4f8b","text":""},{"location":"iac/declarative-vs-imperative/#_7","title":"\u30b7\u30ca\u30ea\u30aa: \u30d0\u30b1\u30c3\u30c8\u306e\u6697\u53f7\u5316\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3092\u5909\u66f4\u3057\u305f\u3044","text":""},{"location":"iac/declarative-vs-imperative/#cli","title":"\u547d\u4ee4\u7684\u30a2\u30d7\u30ed\u30fc\u30c1(CLI)\u306e\u5834\u5408","text":"<pre><code># 1. \u73fe\u5728\u306e\u8a2d\u5b9a\u3092\u78ba\u8a8d\naws s3api get-bucket-encryption --bucket my-app-data-bucket\n\n# 2. \u65b0\u3057\u3044\u8a2d\u5b9a\u3092\u9069\u7528\naws s3api put-bucket-encryption \\\n  --bucket my-app-data-bucket \\\n  --server-side-encryption-configuration '{\n    \"Rules\": [{\n      \"ApplyServerSideEncryptionByDefault\": {\n        \"SSEAlgorithm\": \"aws:kms\",\n        \"KMSMasterKeyID\": \"arn:aws:kms:ap-northeast-1:123456789012:key/xxx\"\n      }\n    }]\n  }'\n\n# 3. \u5909\u66f4\u3055\u308c\u305f\u304b\u78ba\u8a8d\naws s3api get-bucket-encryption --bucket my-app-data-bucket\n\n# \u554f\u984c: \u3053\u306e\u5909\u66f4\u5c65\u6b74\u306f\u3069\u3053\u306b\u3082\u6b8b\u3089\u306a\u3044\n</code></pre>"},{"location":"iac/declarative-vs-imperative/#cdk_1","title":"\u5ba3\u8a00\u7684\u30a2\u30d7\u30ed\u30fc\u30c1(CDK)\u306e\u5834\u5408","text":"<pre><code>// \u30b3\u30fc\u30c9\u3092\u5909\u66f4\nconst bucket = new s3.Bucket(this, 'DataBucket', {\n  bucketName: 'my-app-data-bucket',\n  versioned: true,\n  encryption: s3.BucketEncryption.KMS,  // \u2190 \u3053\u3053\u3092\u5909\u66f4\n  encryptionKey: kmsKey,\n  lifecycleRules: [{\n    noncurrentVersionExpiration: cdk.Duration.days(90),\n  }],\n});\n\n// \u5dee\u5206\u3092\u78ba\u8a8d\n// $ cdk diff\n\n// \u30c7\u30d7\u30ed\u30a4\n// $ cdk deploy\n\n// Git\u3067\u5909\u66f4\u5c65\u6b74\u304c\u6b8b\u308b\n// $ git log --oneline\n// abc123 Change S3 encryption to KMS\n</code></pre>"},{"location":"iac/declarative-vs-imperative/#_8","title":"\u307e\u3068\u3081","text":"<ul> <li>\u547d\u4ee4\u7684\u5b9a\u7fa9: \u300c\u3069\u3046\u3084\u308b\u304b\u300d\u3092\u624b\u9806\u3068\u3057\u3066\u8a18\u8ff0\u3002\u67d4\u8edf\u3060\u304c\u7ba1\u7406\u304c\u5927\u5909</li> <li>\u5ba3\u8a00\u7684\u5b9a\u7fa9: \u300c\u4f55\u304c\u6b32\u3057\u3044\u304b\u300d\u3092\u8a18\u8ff0\u3002\u30c4\u30fc\u30eb\u304c\u72b6\u614b\u7ba1\u7406\u3092\u81ea\u52d5\u5316</li> </ul> <p>IaC\u3067\u306f\u5ba3\u8a00\u7684\u5b9a\u7fa9\u3092\u63a1\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u30a4\u30f3\u30d5\u30e9\u306e\u518d\u73fe\u6027\u30fb\u53ef\u8996\u6027\u30fb\u4fdd\u5b88\u6027\u304c\u5927\u5e45\u306b\u5411\u4e0a\u3057\u307e\u3059\u3002</p> <p>\u6b21\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u3067\u306f\u3001\u5ba3\u8a00\u7684\u5b9a\u7fa9\u3067\u66f8\u304b\u308c\u305fIaC\u30b3\u30fc\u30c9\u306e\u54c1\u8cea\u3092\u9ad8\u3081\u308b\u305f\u3081\u306e\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u539f\u5247\u306b\u3064\u3044\u3066\u5b66\u3073\u307e\u3059\u3002</p> <p>\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u539f\u5247 \u2192</p>"},{"location":"iac/directory-structure/","title":"\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210","text":"<p>IaC\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u306f\u3001\u9069\u5207\u306a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\u304c\u4fdd\u5b88\u6027\u3068\u62e1\u5f35\u6027\u3092\u5927\u304d\u304f\u5de6\u53f3\u3057\u307e\u3059\u3002\u3053\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u3067\u306f\u3001CDK\u3068Terraform\u305d\u308c\u305e\u308c\u306e\u63a8\u5968\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002</p>"},{"location":"iac/directory-structure/#_2","title":"\u306a\u305c\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\u304c\u91cd\u8981\u306a\u306e\u304b","text":""},{"location":"iac/directory-structure/#_3","title":"\u30b3\u30fc\u30c9\u306e\u898b\u901a\u3057\u304c\u826f\u304f\u306a\u308b","text":"<ul> <li>\u5f79\u5272\u306e\u660e\u78ba\u5316: \u30d5\u30a1\u30a4\u30eb\u306e\u914d\u7f6e\u5834\u6240\u304b\u3089\u5f79\u5272\u304c\u7406\u89e3\u3067\u304d\u308b</li> <li>\u5909\u66f4\u7b87\u6240\u306e\u7279\u5b9a: \u4fee\u6b63\u304c\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u3059\u3050\u306b\u898b\u3064\u3051\u3089\u308c\u308b</li> <li>\u30c1\u30fc\u30e0\u958b\u767a: \u30e1\u30f3\u30d0\u30fc\u5168\u54e1\u304c\u540c\u3058\u69cb\u9020\u3092\u7406\u89e3\u3067\u304d\u308b</li> </ul>"},{"location":"iac/directory-structure/#_4","title":"\u30b9\u30b1\u30fc\u30e9\u30d3\u30ea\u30c6\u30a3","text":"<ul> <li>\u6bb5\u968e\u7684\u306a\u6210\u9577: \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u62e1\u5927\u306b\u5bfe\u5fdc\u3067\u304d\u308b</li> <li>\u30e2\u30b8\u30e5\u30fc\u30eb\u5316: \u518d\u5229\u7528\u53ef\u80fd\u306a\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u6574\u7406</li> <li>\u74b0\u5883\u5206\u96e2: \u958b\u767a\u30fb\u30b9\u30c6\u30fc\u30b8\u30f3\u30b0\u30fb\u672c\u756a\u3092\u660e\u78ba\u306b\u5206\u96e2</li> </ul>"},{"location":"iac/directory-structure/#_5","title":"\u904b\u7528\u306e\u5b89\u5168\u6027","text":"<ul> <li>\u8cac\u4efb\u7bc4\u56f2\u306e\u660e\u78ba\u5316: \u3069\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u3069\u306e\u30ea\u30bd\u30fc\u30b9\u3092\u7ba1\u7406\u3057\u3066\u3044\u308b\u304b\u660e\u78ba</li> <li>\u5909\u66f4\u306e\u5f71\u97ff\u7bc4\u56f2: \u4fee\u6b63\u304c\u4ed6\u306e\u74b0\u5883\u306b\u5f71\u97ff\u3057\u306a\u3044\u3053\u3068\u3092\u4fdd\u8a3c</li> <li>\u30ec\u30d3\u30e5\u30fc\u3057\u3084\u3059\u3055: Pull Request\u3067\u306e\u5909\u66f4\u7bc4\u56f2\u304c\u7406\u89e3\u3057\u3084\u3059\u3044</li> </ul>"},{"location":"iac/directory-structure/#cdk","title":"CDK\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210","text":""},{"location":"iac/directory-structure/#_6","title":"\u57fa\u672c\u69cb\u6210 (\u5b66\u7fd2\u30fb\u6982\u5ff5\u7406\u89e3\u7528)","text":"<p>\u5b9f\u52d9\u3067\u306e\u4f4d\u7f6e\u3065\u3051</p> <p>\u3053\u306e\u69cb\u6210\u306f\u5b66\u7fd2\u7528\u3084CDK\u306e\u6982\u5ff5\u7406\u89e3\u306b\u9069\u3057\u3066\u3044\u307e\u3059\u3002\u5b9f\u52d9\u3067\u306f\u3001\u307b\u307c\u5fc5\u305a\u8907\u6570\u74b0\u5883(dev/staging/prod)\u304c\u5fc5\u8981\u306b\u306a\u308b\u305f\u3081\u3001\u30de\u30eb\u30c1\u74b0\u5883\u5bfe\u5fdc\u69cb\u6210\u304b\u3089\u59cb\u3081\u308b\u3053\u3068\u3092\u5f37\u304f\u63a8\u5968\u3057\u307e\u3059\u3002</p> <pre><code>my-cdk-project/\n\u251c\u2500\u2500 bin/\n\u2502   \u2514\u2500\u2500 app.ts                    # CDK\u30a2\u30d7\u30ea\u306e\u30a8\u30f3\u30c8\u30ea\u30fc\u30dd\u30a4\u30f3\u30c8\n\u251c\u2500\u2500 lib/\n\u2502   \u251c\u2500\u2500 stacks/\n\u2502   \u2502   \u251c\u2500\u2500 network-stack.ts      # VPC\u3001\u30b5\u30d6\u30cd\u30c3\u30c8\u306a\u3069\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\n\u2502   \u2502   \u251c\u2500\u2500 database-stack.ts     # RDS\u3001DynamoDB\u306a\u3069\n\u2502   \u2502   \u2514\u2500\u2500 application-stack.ts  # Lambda\u3001API Gateway\u306a\u3069\n\u2502   \u2514\u2500\u2500 constructs/\n\u2502       \u251c\u2500\u2500 secure-bucket.ts      # \u518d\u5229\u7528\u53ef\u80fd\u306aS3\u30d0\u30b1\u30c3\u30c8\n\u2502       \u2514\u2500\u2500 monitoring.ts         # CloudWatch\u3001\u30a2\u30e9\u30fc\u30e0\u8a2d\u5b9a\n\u251c\u2500\u2500 test/\n\u2502   \u251c\u2500\u2500 stacks/\n\u2502   \u2502   \u2514\u2500\u2500 network-stack.test.ts\n\u2502   \u2514\u2500\u2500 constructs/\n\u2502       \u2514\u2500\u2500 secure-bucket.test.ts\n\u251c\u2500\u2500 cdk.json                      # CDK\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\n\u251c\u2500\u2500 package.json\n\u251c\u2500\u2500 tsconfig.json\n\u2514\u2500\u2500 README.md\n</code></pre> <p>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u5f79\u5272:</p> <ul> <li><code>bin/</code>: CDK\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30a8\u30f3\u30c8\u30ea\u30fc\u30dd\u30a4\u30f3\u30c8\u3002\u74b0\u5883\u5909\u6570\u306e\u8aad\u307f\u8fbc\u307f\u3084\u30b9\u30bf\u30c3\u30af\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\u3092\u884c\u3046</li> <li><code>lib/stacks/</code>: CloudFormation\u30b9\u30bf\u30c3\u30af\u5b9a\u7fa9\u3002\u8cac\u52d9\u3054\u3068\u306b\u5206\u5272</li> <li><code>lib/constructs/</code>: \u518d\u5229\u7528\u53ef\u80fd\u306a\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8(L2/L3 Construct)</li> <li><code>test/</code>: \u5358\u4f53\u30c6\u30b9\u30c8\u3002\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3068\u540c\u3058\u69cb\u9020\u3067\u914d\u7f6e</li> </ul>"},{"location":"iac/directory-structure/#_7","title":"\u30de\u30eb\u30c1\u74b0\u5883\u5bfe\u5fdc\u69cb\u6210 (\u5b9f\u52d9\u63a8\u5968)","text":"<p>\u5b9f\u52d9\u3067\u6700\u3082\u4e00\u822c\u7684\u306b\u63a1\u7528\u3055\u308c\u308b\u69cb\u6210\u3067\u3059\u3002\u74b0\u5883\u3054\u3068\u306e\u8a2d\u5b9a\u3092<code>lib/config/</code>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067\u7ba1\u7406\u3057\u307e\u3059\u3002</p> <p>\u5b9f\u52d9\u3067\u306e\u63a8\u5968</p> <p>\u5b9f\u52d9\u3067\u306f\u3001\u307b\u307c\u5fc5\u305a\u8907\u6570\u74b0\u5883(dev/staging/prod)\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\u3053\u306e\u69cb\u6210\u3092\u7fd2\u5f97\u3059\u308c\u3070\u3001\u5b9f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u3059\u3050\u306b\u6d3b\u7528\u3067\u304d\u307e\u3059\u3002</p> <pre><code>my-cdk-project/\n\u251c\u2500\u2500 bin/\n\u2502   \u2514\u2500\u2500 app.ts\n\u251c\u2500\u2500 lib/\n\u2502   \u251c\u2500\u2500 stacks/\n\u2502   \u2502   \u251c\u2500\u2500 network-stack.ts\n\u2502   \u2502   \u251c\u2500\u2500 database-stack.ts\n\u2502   \u2502   \u2514\u2500\u2500 application-stack.ts\n\u2502   \u251c\u2500\u2500 constructs/\n\u2502   \u2502   \u251c\u2500\u2500 secure-bucket.ts\n\u2502   \u2502   \u2514\u2500\u2500 monitoring.ts\n\u2502   \u2514\u2500\u2500 config/\n\u2502       \u251c\u2500\u2500 types.ts              # \u74b0\u5883\u8a2d\u5b9a\u306e\u578b\u5b9a\u7fa9\n\u2502       \u251c\u2500\u2500 dev.ts                # \u958b\u767a\u74b0\u5883\u8a2d\u5b9a\n\u2502       \u251c\u2500\u2500 staging.ts            # \u30b9\u30c6\u30fc\u30b8\u30f3\u30b0\u74b0\u5883\u8a2d\u5b9a\n\u2502       \u2514\u2500\u2500 prod.ts               # \u672c\u756a\u74b0\u5883\u8a2d\u5b9a\n\u251c\u2500\u2500 test/\n\u2502   \u251c\u2500\u2500 stacks/\n\u2502   \u2514\u2500\u2500 constructs/\n\u251c\u2500\u2500 cdk.json\n\u251c\u2500\u2500 package.json\n\u251c\u2500\u2500 tsconfig.json\n\u2514\u2500\u2500 README.md\n</code></pre> <p>\u74b0\u5883\u8a2d\u5b9a\u306e\u4f8b:</p> lib/config/types.tslib/config/prod.tsbin/app.ts (CDK Context\u4f7f\u7528)bin/app.ts (\u74b0\u5883\u5909\u6570\u4f7f\u7528)package.json (npm scripts) <pre><code>export interface EnvironmentConfig {\n  env: {\n    account: string;\n    region: string;\n  };\n  database: {\n    instanceType: string;\n    multiAz: boolean;\n  };\n  monitoring: {\n    enableDetailedMonitoring: boolean;\n    alarmEmail: string;\n  };\n}\n</code></pre> <pre><code>import { EnvironmentConfig } from './types';\n\nexport const prodConfig: EnvironmentConfig = {\n  env: {\n    account: process.env.CDK_PROD_ACCOUNT!,\n    region: 'ap-northeast-1',\n  },\n  database: {\n    instanceType: 't3.medium',\n    multiAz: true,\n  },\n  monitoring: {\n    enableDetailedMonitoring: true,\n    alarmEmail: 'prod-alerts@example.com',\n  },\n};\n</code></pre> <pre><code>#!/usr/bin/env node\nimport 'source-map-support/register';\nimport * as cdk from 'aws-cdk-lib';\nimport { NetworkStack } from '../lib/stacks/network-stack';\nimport { DatabaseStack } from '../lib/stacks/database-stack';\nimport { devConfig } from '../lib/config/dev';\nimport { prodConfig } from '../lib/config/prod';\n\nconst app = new cdk.App();\n\n// CDK Context\u304b\u3089\u74b0\u5883\u3092\u53d6\u5f97\nconst environment = app.node.tryGetContext('environment') || 'dev';\nconst config = environment === 'prod' ? prodConfig : devConfig;\n\n// \u30b9\u30bf\u30c3\u30af\u306e\u30c7\u30d7\u30ed\u30a4\nconst networkStack = new NetworkStack(app, `${environment}-NetworkStack`, {\n  env: config.env,\n});\n\nnew DatabaseStack(app, `${environment}-DatabaseStack`, {\n  env: config.env,\n  vpc: networkStack.vpc,\n  config: config.database,\n});\n</code></pre> <pre><code>#!/usr/bin/env node\nimport 'source-map-support/register';\nimport * as cdk from 'aws-cdk-lib';\nimport { NetworkStack } from '../lib/stacks/network-stack';\nimport { DatabaseStack } from '../lib/stacks/database-stack';\nimport { devConfig } from '../lib/config/dev';\nimport { prodConfig } from '../lib/config/prod';\n\nconst app = new cdk.App();\n\n// \u74b0\u5883\u5909\u6570\u304b\u3089\u74b0\u5883\u3092\u53d6\u5f97\nconst environment = process.env.ENV || 'dev';\nconst config = environment === 'prod' ? prodConfig : devConfig;\n\n// \u30b9\u30bf\u30c3\u30af\u306e\u30c7\u30d7\u30ed\u30a4\nconst networkStack = new NetworkStack(app, `${environment}-NetworkStack`, {\n  env: config.env,\n});\n\nnew DatabaseStack(app, `${environment}-DatabaseStack`, {\n  env: config.env,\n  vpc: networkStack.vpc,\n  config: config.database,\n});\n</code></pre> <pre><code>{\n  \"name\": \"my-cdk-project\",\n  \"scripts\": {\n    \"deploy:dev\": \"ENV=dev cdk deploy --all\",\n    \"deploy:staging\": \"ENV=staging cdk deploy --all\",\n    \"deploy:prod\": \"ENV=prod cdk deploy --all\",\n    \"diff:dev\": \"ENV=dev cdk diff\",\n    \"diff:prod\": \"ENV=prod cdk diff\"\n  }\n}\n</code></pre> <p>\u30c7\u30d7\u30ed\u30a4\u30b3\u30de\u30f3\u30c9:</p> CDK Context\u74b0\u5883\u5909\u6570npm scripts (\u63a8\u5968) <pre><code># \u958b\u767a\u74b0\u5883\ncdk deploy --context environment=dev --all\n\n# \u672c\u756a\u74b0\u5883\ncdk deploy --context environment=prod --all\n</code></pre> <pre><code># \u958b\u767a\u74b0\u5883\nENV=dev cdk deploy --all\n\n# \u672c\u756a\u74b0\u5883\nENV=prod cdk deploy --all\n</code></pre> <pre><code># \u958b\u767a\u74b0\u5883\nnpm run deploy:dev\n\n# \u672c\u756a\u74b0\u5883\nnpm run deploy:prod\n\n# \u5dee\u5206\u78ba\u8a8d\nnpm run diff:prod\n</code></pre>"},{"location":"iac/directory-structure/#_8","title":"\u5927\u898f\u6a21\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u69cb\u6210","text":"<p>\u8907\u6570\u306e\u30b5\u30fc\u30d3\u30b9\u3084\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u3092\u7ba1\u7406\u3059\u308b\u5834\u5408\u306e\u69cb\u6210\u3067\u3059\u3002</p> <pre><code>my-cdk-monorepo/\n\u251c\u2500\u2500 packages/\n\u2502   \u251c\u2500\u2500 common/                   # \u5171\u901a\u30e9\u30a4\u30d6\u30e9\u30ea\n\u2502   \u2502   \u251c\u2500\u2500 lib/\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 constructs/\n\u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 secure-bucket.ts\n\u2502   \u2502   \u2502   \u2502   \u2514\u2500\u2500 monitoring.ts\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 utils/\n\u2502   \u2502   \u2502       \u2514\u2500\u2500 naming.ts\n\u2502   \u2502   \u251c\u2500\u2500 test/\n\u2502   \u2502   \u2514\u2500\u2500 package.json\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 infrastructure/           # \u57fa\u76e4\u30a4\u30f3\u30d5\u30e9\n\u2502   \u2502   \u251c\u2500\u2500 bin/\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 app.ts\n\u2502   \u2502   \u251c\u2500\u2500 lib/\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 stacks/\n\u2502   \u2502   \u2502       \u251c\u2500\u2500 network-stack.ts\n\u2502   \u2502   \u2502       \u2514\u2500\u2500 security-stack.ts\n\u2502   \u2502   \u251c\u2500\u2500 test/\n\u2502   \u2502   \u251c\u2500\u2500 cdk.json\n\u2502   \u2502   \u2514\u2500\u2500 package.json\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 service-a/                # \u30b5\u30fc\u30d3\u30b9A\n\u2502   \u2502   \u251c\u2500\u2500 bin/\n\u2502   \u2502   \u251c\u2500\u2500 lib/\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 stacks/\n\u2502   \u2502   \u2502       \u251c\u2500\u2500 api-stack.ts\n\u2502   \u2502   \u2502       \u2514\u2500\u2500 database-stack.ts\n\u2502   \u2502   \u251c\u2500\u2500 test/\n\u2502   \u2502   \u251c\u2500\u2500 cdk.json\n\u2502   \u2502   \u2514\u2500\u2500 package.json\n\u2502   \u2502\n\u2502   \u2514\u2500\u2500 service-b/                # \u30b5\u30fc\u30d3\u30b9B\n\u2502       \u251c\u2500\u2500 bin/\n\u2502       \u251c\u2500\u2500 lib/\n\u2502       \u251c\u2500\u2500 test/\n\u2502       \u251c\u2500\u2500 cdk.json\n\u2502       \u2514\u2500\u2500 package.json\n\u251c\u2500\u2500 package.json                  # \u30eb\u30fc\u30c8package.json (workspace\u8a2d\u5b9a)\n\u2514\u2500\u2500 README.md\n</code></pre> <p>\u30eb\u30fc\u30c8package.json\u306e\u4f8b:</p> <pre><code>{\n  \"name\": \"my-cdk-monorepo\",\n  \"private\": true,\n  \"workspaces\": [\n    \"packages/*\"\n  ],\n  \"scripts\": {\n    \"build\": \"npm run build --workspaces\",\n    \"test\": \"npm run test --workspaces\"\n  }\n}\n</code></pre>"},{"location":"iac/directory-structure/#terraform","title":"Terraform\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210","text":""},{"location":"iac/directory-structure/#_9","title":"\u57fa\u672c\u69cb\u6210 (\u5b66\u7fd2\u30fb\u6982\u5ff5\u7406\u89e3\u7528)","text":"<p>\u5b9f\u52d9\u3067\u306e\u4f4d\u7f6e\u3065\u3051</p> <p>\u3053\u306e\u69cb\u6210\u306f\u5b66\u7fd2\u7528\u3084Terraform\u306e\u6982\u5ff5\u7406\u89e3\u306b\u9069\u3057\u3066\u3044\u307e\u3059\u3002\u5b9f\u52d9\u3067\u306f\u3001\u307b\u307c\u5fc5\u305a\u8907\u6570\u74b0\u5883(dev/staging/prod)\u304c\u5fc5\u8981\u306b\u306a\u308b\u305f\u3081\u3001\u30de\u30eb\u30c1\u74b0\u5883\u5bfe\u5fdc\u69cb\u6210(\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5206\u96e2\u307e\u305f\u306fWorkspaces)\u304b\u3089\u59cb\u3081\u308b\u3053\u3068\u3092\u5f37\u304f\u63a8\u5968\u3057\u307e\u3059\u3002</p> <pre><code>my-terraform-project/\n\u251c\u2500\u2500 main.tf                       # \u30e1\u30a4\u30f3\u306e\u69cb\u6210\u5b9a\u7fa9\n\u251c\u2500\u2500 variables.tf                  # \u5165\u529b\u5909\u6570\u306e\u5b9a\u7fa9\n\u251c\u2500\u2500 outputs.tf                    # \u51fa\u529b\u5024\u306e\u5b9a\u7fa9\n\u251c\u2500\u2500 providers.tf                  # \u30d7\u30ed\u30d0\u30a4\u30c0\u30fc\u8a2d\u5b9a\n\u251c\u2500\u2500 terraform.tfvars              # \u5909\u6570\u306e\u5024(Gitignore\u63a8\u5968)\n\u251c\u2500\u2500 versions.tf                   # Terraform\u3068\u30d7\u30ed\u30d0\u30a4\u30c0\u30fc\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u5236\u7d04\n\u251c\u2500\u2500 modules/\n\u2502   \u251c\u2500\u2500 network/\n\u2502   \u2502   \u251c\u2500\u2500 main.tf\n\u2502   \u2502   \u251c\u2500\u2500 variables.tf\n\u2502   \u2502   \u2514\u2500\u2500 outputs.tf\n\u2502   \u2514\u2500\u2500 database/\n\u2502       \u251c\u2500\u2500 main.tf\n\u2502       \u251c\u2500\u2500 variables.tf\n\u2502       \u2514\u2500\u2500 outputs.tf\n\u251c\u2500\u2500 tests/\n\u2502   \u251c\u2500\u2500 network.tftest.hcl\n\u2502   \u2514\u2500\u2500 database.tftest.hcl\n\u2514\u2500\u2500 README.md\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u306e\u5f79\u5272:</p> <ul> <li><code>main.tf</code>: \u30e1\u30a4\u30f3\u306e\u30ea\u30bd\u30fc\u30b9\u5b9a\u7fa9</li> <li><code>variables.tf</code>: \u5165\u529b\u5909\u6570\u306e\u5ba3\u8a00</li> <li><code>outputs.tf</code>: \u4ed6\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3084\u5916\u90e8\u304b\u3089\u53c2\u7167\u3059\u308b\u5024</li> <li><code>providers.tf</code>: AWS\u30d7\u30ed\u30d0\u30a4\u30c0\u30fc\u306a\u3069\u306e\u8a2d\u5b9a</li> <li><code>versions.tf</code>: Terraform\u3068\u30d7\u30ed\u30d0\u30a4\u30c0\u30fc\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u6307\u5b9a</li> <li><code>modules/</code>: \u518d\u5229\u7528\u53ef\u80fd\u306a\u30e2\u30b8\u30e5\u30fc\u30eb</li> </ul>"},{"location":"iac/directory-structure/#_10","title":"\u30de\u30eb\u30c1\u74b0\u5883\u5bfe\u5fdc\u69cb\u6210 (\u5b9f\u52d9\u63a8\u5968)","text":"<p>\u5b9f\u52d9\u3067\u6700\u3082\u4e00\u822c\u7684\u306b\u63a1\u7528\u3055\u308c\u308b\u69cb\u6210\u3067\u3059\u3002\u74b0\u5883\u3054\u3068\u306b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u5206\u96e2\u3057\u3001\u3055\u3089\u306b\u30ec\u30a4\u30e4\u30fc(network/database/application)\u3054\u3068\u306bstate\u3092\u5206\u5272\u3057\u307e\u3059\u3002</p> <p>state\u306e\u5206\u5272</p> <p>\u3053\u306e\u4f8b\u3067\u306f\u3001\u30ec\u30a4\u30e4\u30fc\u3054\u3068\u306bstate\u30d5\u30a1\u30a4\u30eb\u3092\u5206\u5272\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u3042\u308b\u30ec\u30a4\u30e4\u30fc\u306e\u5909\u66f4\u304c\u4ed6\u306e\u30ec\u30a4\u30e4\u30fc\u306estate\u306b\u5f71\u97ff\u3092\u4e0e\u3048\u305a\u3001\u4e26\u884c\u4f5c\u696d\u3084\u30ea\u30b9\u30af\u5206\u96e2\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\u8a73\u7d30\u306f\u7ba1\u7406\u5358\u4f4d\u306e\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <pre><code>my-terraform-project/\n\u251c\u2500\u2500 modules/                      # \u5171\u901a\u30e2\u30b8\u30e5\u30fc\u30eb\n\u2502   \u251c\u2500\u2500 network/\n\u2502   \u2502   \u251c\u2500\u2500 main.tf\n\u2502   \u2502   \u251c\u2500\u2500 variables.tf\n\u2502   \u2502   \u2514\u2500\u2500 outputs.tf\n\u2502   \u251c\u2500\u2500 database/\n\u2502   \u2502   \u251c\u2500\u2500 main.tf\n\u2502   \u2502   \u251c\u2500\u2500 variables.tf\n\u2502   \u2502   \u2514\u2500\u2500 outputs.tf\n\u2502   \u2514\u2500\u2500 application/\n\u2502       \u251c\u2500\u2500 main.tf\n\u2502       \u251c\u2500\u2500 variables.tf\n\u2502       \u2514\u2500\u2500 outputs.tf\n\u2502\n\u251c\u2500\u2500 environments/\n\u2502   \u251c\u2500\u2500 dev/\n\u2502   \u2502   \u251c\u2500\u2500 network/              # \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5c64\u306estate\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 main.tf\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 variables.tf\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 outputs.tf\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 providers.tf\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 backend.tf\n\u2502   \u2502   \u251c\u2500\u2500 database/             # \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u5c64\u306estate\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 main.tf\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 variables.tf\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 outputs.tf\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 providers.tf\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 backend.tf\n\u2502   \u2502   \u2514\u2500\u2500 application/          # \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\u306estate\n\u2502   \u2502       \u251c\u2500\u2500 main.tf\n\u2502   \u2502       \u251c\u2500\u2500 variables.tf\n\u2502   \u2502       \u251c\u2500\u2500 outputs.tf\n\u2502   \u2502       \u251c\u2500\u2500 providers.tf\n\u2502   \u2502       \u2514\u2500\u2500 backend.tf\n\u2502   \u2502\n\u2502   \u2514\u2500\u2500 prod/\n\u2502       \u251c\u2500\u2500 network/\n\u2502       \u2502   \u251c\u2500\u2500 main.tf\n\u2502       \u2502   \u251c\u2500\u2500 variables.tf\n\u2502       \u2502   \u251c\u2500\u2500 outputs.tf\n\u2502       \u2502   \u251c\u2500\u2500 providers.tf\n\u2502       \u2502   \u2514\u2500\u2500 backend.tf\n\u2502       \u251c\u2500\u2500 database/\n\u2502       \u2502   \u251c\u2500\u2500 main.tf\n\u2502       \u2502   \u251c\u2500\u2500 variables.tf\n\u2502       \u2502   \u251c\u2500\u2500 outputs.tf\n\u2502       \u2502   \u251c\u2500\u2500 providers.tf\n\u2502       \u2502   \u2514\u2500\u2500 backend.tf\n\u2502       \u2514\u2500\u2500 application/\n\u2502           \u251c\u2500\u2500 main.tf\n\u2502           \u251c\u2500\u2500 variables.tf\n\u2502           \u251c\u2500\u2500 outputs.tf\n\u2502           \u251c\u2500\u2500 providers.tf\n\u2502           \u2514\u2500\u2500 backend.tf\n\u2502\n\u251c\u2500\u2500 tests/\n\u2502   \u2514\u2500\u2500 modules/\n\u2502       \u251c\u2500\u2500 network.tftest.hcl\n\u2502       \u2514\u2500\u2500 database.tftest.hcl\n\u2514\u2500\u2500 README.md\n</code></pre> <p>\u30ec\u30a4\u30e4\u30fc\u3054\u3068\u306emain.tf\u306e\u4f8b:</p> environments/prod/network/main.tfenvironments/prod/database/main.tfenvironments/prod/application/main.tf <pre><code>terraform {\n  required_version = \"&gt;= 1.6.0\"\n}\n\nmodule \"network\" {\n  source = \"../../../modules/network\"\n\n  vpc_cidr          = var.vpc_cidr\n  environment       = \"prod\"\n  enable_nat        = true\n  nat_gateway_count = 3  # \u672c\u756a\u306f3AZ\n}\n</code></pre> <pre><code>terraform {\n  required_version = \"&gt;= 1.6.0\"\n}\n\n# \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5c64\u306eoutput\u3092\u53c2\u7167\ndata \"terraform_remote_state\" \"network\" {\n  backend = \"s3\"\n  config = {\n    bucket = \"my-company-terraform-state-prod\"\n    key    = \"prod/network/terraform.tfstate\"\n    region = \"ap-northeast-1\"\n  }\n}\n\nmodule \"database\" {\n  source = \"../../../modules/database\"\n\n  vpc_id         = data.terraform_remote_state.network.outputs.vpc_id\n  subnet_ids     = data.terraform_remote_state.network.outputs.database_subnet_ids\n  instance_class = \"db.t3.medium\"\n  multi_az       = true\n  environment    = \"prod\"\n}\n</code></pre> <pre><code>terraform {\n  required_version = \"&gt;= 1.6.0\"\n}\n\n# \u4ed6\u306e\u30ec\u30a4\u30e4\u30fc\u306eoutput\u3092\u53c2\u7167\ndata \"terraform_remote_state\" \"network\" {\n  backend = \"s3\"\n  config = {\n    bucket = \"my-company-terraform-state-prod\"\n    key    = \"prod/network/terraform.tfstate\"\n    region = \"ap-northeast-1\"\n  }\n}\n\ndata \"terraform_remote_state\" \"database\" {\n  backend = \"s3\"\n  config = {\n    bucket = \"my-company-terraform-state-prod\"\n    key    = \"prod/database/terraform.tfstate\"\n    region = \"ap-northeast-1\"\n  }\n}\n\nmodule \"application\" {\n  source = \"../../../modules/application\"\n\n  vpc_id              = data.terraform_remote_state.network.outputs.vpc_id\n  subnet_ids          = data.terraform_remote_state.network.outputs.app_subnet_ids\n  database_endpoint   = data.terraform_remote_state.database.outputs.endpoint\n  environment         = \"prod\"\n}\n</code></pre> <p>backend.tf\u306e\u4f8b:</p> <pre><code># environments/prod/network/backend.tf\nterraform {\n  backend \"s3\" {\n    bucket         = \"my-company-terraform-state-prod\"\n    key            = \"prod/network/terraform.tfstate\"\n    region         = \"ap-northeast-1\"\n    encrypt        = true\n    dynamodb_table = \"terraform-state-lock-prod\"\n  }\n}\n</code></pre> <pre><code># environments/prod/database/backend.tf\nterraform {\n  backend \"s3\" {\n    bucket         = \"my-company-terraform-state-prod\"\n    key            = \"prod/database/terraform.tfstate\"\n    region         = \"ap-northeast-1\"\n    encrypt        = true\n    dynamodb_table = \"terraform-state-lock-prod\"\n  }\n}\n</code></pre> <p>\u30c7\u30d7\u30ed\u30a4\u30b3\u30de\u30f3\u30c9:</p> <pre><code># \u672c\u756a\u74b0\u5883\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5c64\u3092\u30c7\u30d7\u30ed\u30a4\ncd environments/prod/network\nterraform init\nterraform plan\nterraform apply\n\n# \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5c64\u306b\u4f9d\u5b58\u3059\u308b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u5c64\u3092\u30c7\u30d7\u30ed\u30a4\ncd ../database\nterraform init\nterraform plan\nterraform apply\n\n# \u4e21\u65b9\u306b\u4f9d\u5b58\u3059\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\u3092\u30c7\u30d7\u30ed\u30a4\ncd ../application\nterraform init\nterraform plan\nterraform apply\n</code></pre>"},{"location":"iac/directory-structure/#_11","title":"\u30ef\u30fc\u30af\u30b9\u30da\u30fc\u30b9\u5229\u7528\u69cb\u6210","text":"<p>Terraform Workspaces\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\u306e\u69cb\u6210\u3067\u3059\u3002</p> <pre><code>my-terraform-project/\n\u251c\u2500\u2500 main.tf\n\u251c\u2500\u2500 variables.tf\n\u251c\u2500\u2500 outputs.tf\n\u251c\u2500\u2500 providers.tf\n\u251c\u2500\u2500 versions.tf\n\u251c\u2500\u2500 backend.tf                    # \u5171\u901a\u306e\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u8a2d\u5b9a\n\u251c\u2500\u2500 configs/\n\u2502   \u251c\u2500\u2500 dev.tfvars\n\u2502   \u251c\u2500\u2500 staging.tfvars\n\u2502   \u2514\u2500\u2500 prod.tfvars\n\u251c\u2500\u2500 modules/\n\u2502   \u251c\u2500\u2500 network/\n\u2502   \u2514\u2500\u2500 database/\n\u2514\u2500\u2500 tests/\n    \u2514\u2500\u2500 *.tftest.hcl\n</code></pre> <p>\u74b0\u5883\u5225\u5909\u6570\u30d5\u30a1\u30a4\u30eb\u306e\u4f8b:</p> configs/prod.tfvarsconfigs/dev.tfvars <pre><code>environment       = \"prod\"\nvpc_cidr          = \"10.0.0.0/16\"\ninstance_class    = \"db.t3.medium\"\nmulti_az          = true\nenable_monitoring = true\n</code></pre> <pre><code>environment       = \"dev\"\nvpc_cidr          = \"10.10.0.0/16\"\ninstance_class    = \"db.t3.micro\"\nmulti_az          = false\nenable_monitoring = false\n</code></pre> <p>\u30ef\u30fc\u30af\u30b9\u30da\u30fc\u30b9\u306e\u4f7f\u7528\u65b9\u6cd5:</p> <pre><code># \u958b\u767a\u74b0\u5883\u7528\u30ef\u30fc\u30af\u30b9\u30da\u30fc\u30b9\nterraform workspace new dev\nterraform workspace select dev\nterraform apply -var-file=\"configs/dev.tfvars\"\n\n# \u672c\u756a\u74b0\u5883\u7528\u30ef\u30fc\u30af\u30b9\u30da\u30fc\u30b9\nterraform workspace new prod\nterraform workspace select prod\nterraform apply -var-file=\"configs/prod.tfvars\"\n</code></pre>"},{"location":"iac/directory-structure/#_12","title":"\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9","text":""},{"location":"iac/directory-structure/#1","title":"1. \u74b0\u5883\u5206\u96e2\u306e\u9078\u629e","text":"CDKTerraform <p>\u63a8\u5968: \u74b0\u5883\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067\u306e\u5206\u96e2</p> <ul> <li>\u74b0\u5883\u3054\u3068\u306e\u8a2d\u5b9a\u3092\u660e\u793a\u7684\u306b\u7ba1\u7406</li> <li>\u30b9\u30bf\u30c3\u30af\u540d\u306b\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u3092\u4ed8\u4e0e(<code>dev-</code>, <code>prod-</code>)</li> <li>CDK Context\u307e\u305f\u306fnpmScripts\uff0b\u74b0\u5883\u5909\u6570\u3067\u74b0\u5883\u3092\u5207\u308a\u66ff\u3048</li> </ul> <p>\u74b0\u5883\u5207\u308a\u66ff\u3048\u65b9\u6cd5\u306e\u6bd4\u8f03:</p> \u65b9\u6cd5 \u30e1\u30ea\u30c3\u30c8 \u30c7\u30e1\u30ea\u30c3\u30c8 CDK Context CDK\u516c\u5f0f\u306e\u63a8\u5968\u65b9\u6cd5\u3001<code>cdk.json</code>\u306b\u4fdd\u5b58\u53ef\u80fd \u30b3\u30de\u30f3\u30c9\u304c\u9577\u304f\u306a\u308a\u304c\u3061 \u74b0\u5883\u5909\u6570 \u30b7\u30f3\u30d7\u30eb\u3001CI/CD\u3068\u306e\u7d71\u5408\u304c\u5bb9\u6613 typo\u306b\u6c17\u3065\u304d\u306b\u304f\u3044 npm scripts (\u63a8\u5968) \u308f\u304b\u308a\u3084\u3059\u3044\u3001typo\u3092\u9632\u3052\u308b package.json\u306e\u8a2d\u5b9a\u304c\u5fc5\u8981 <p>\u63a8\u5968: \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5206\u96e2 or Workspaces</p> <p>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5206\u96e2:</p> <ul> <li>\u2705 \u74b0\u5883\u3054\u3068\u306estate\u304c\u5b8c\u5168\u306b\u5206\u96e2</li> <li>\u2705 \u74b0\u5883\u3054\u3068\u306b\u7570\u306a\u308b\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u8a2d\u5b9a\u304c\u53ef\u80fd</li> <li>\u274c \u30b3\u30fc\u30c9\u306e\u91cd\u8907\u304c\u767a\u751f\u3057\u3084\u3059\u3044</li> </ul> <p>Workspaces:</p> <ul> <li>\u2705 \u30b3\u30fc\u30c9\u306e\u91cd\u8907\u3092\u524a\u6e1b</li> <li>\u2705 \u74b0\u5883\u306e\u5207\u308a\u66ff\u3048\u304c\u5bb9\u6613</li> <li>\u274c \u540c\u3058\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u3092\u5171\u6709(\u8aa4\u64cd\u4f5c\u306e\u30ea\u30b9\u30af)</li> </ul>"},{"location":"iac/directory-structure/#2-construct","title":"2. \u30e2\u30b8\u30e5\u30fc\u30eb/Construct\u306e\u7c92\u5ea6","text":"<p>\u9069\u5207\u306a\u7c92\u5ea6:</p> <ul> <li>\u5358\u4e00\u8cac\u4efb\u306e\u539f\u5247\u306b\u5f93\u3046</li> <li>\u72ec\u7acb\u3057\u3066\u518d\u5229\u7528\u53ef\u80fd</li> <li>\u30c6\u30b9\u30c8\u3057\u3084\u3059\u3044\u5358\u4f4d</li> </ul> <p>\u95a2\u9023\u30bb\u30af\u30b7\u30e7\u30f3</p> <p>\u30e2\u30b8\u30e5\u30fc\u30eb\u5316\u306e\u8a73\u7d30\u3068DRY\u539f\u5247\u306b\u3064\u3044\u3066\u306f\u3001\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u539f\u5247\u3082\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u4f8b:</p> <pre><code>\u2705 \u826f\u3044\u4f8b: secure-bucket (\u30bb\u30ad\u30e5\u30a2\u306aS3\u30d0\u30b1\u30c3\u30c8\u306e\u8a2d\u5b9a\u4e00\u5f0f)\n\u2705 \u826f\u3044\u4f8b: monitoring (CloudWatch\u30a2\u30e9\u30fc\u30e0\u3068\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9)\n\n\u274c \u60aa\u3044\u4f8b: aws-resources (\u69d8\u3005\u306a\u30ea\u30bd\u30fc\u30b9\u306e\u8a70\u3081\u5408\u308f\u305b)\n\u274c \u60aa\u3044\u4f8b: utils (\u95a2\u9023\u6027\u306e\u306a\u3044\u6c4e\u7528\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3)\n</code></pre>"},{"location":"iac/directory-structure/#_13","title":"\u307e\u3068\u3081","text":"<p>\u9069\u5207\u306a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\u306f\u3001IaC\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u6210\u529f\u306b\u4e0d\u53ef\u6b20\u3067\u3059:</p> <ul> <li>CDK: \u30b9\u30bf\u30c3\u30af\u3068Constructs\u3067\u8cac\u52d9\u3092\u5206\u96e2\u3001\u74b0\u5883\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb(<code>lib/config/</code>)\u3067\u74b0\u5883\u3092\u7ba1\u7406</li> <li>Terraform: \u30e2\u30b8\u30e5\u30fc\u30eb\u3067\u518d\u5229\u7528\u6027\u3092\u9ad8\u3081\u3001\u74b0\u5883\u3054\u3068\u306b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea(<code>environments/</code>)\u307e\u305f\u306fWorkspaces\u3067\u5206\u96e2</li> <li>\u5171\u901a: \u9069\u5207\u306a\u30e2\u30b8\u30e5\u30fc\u30eb\u7c92\u5ea6\u3067\u4fdd\u5b88\u6027\u3092\u9ad8\u3081\u308b</li> </ul> <p>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u898f\u6a21\u306b\u5fdc\u3058\u3066\u3001\u57fa\u672c\u69cb\u6210\u304b\u3089\u59cb\u3081\u3066\u6bb5\u968e\u7684\u306b\u62e1\u5f35\u3057\u3066\u3044\u304f\u30a2\u30d7\u30ed\u30fc\u30c1\u304c\u63a8\u5968\u3055\u308c\u307e\u3059\u3002</p> <p>\u6b21\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u3067\u306f\u3001\u30b9\u30bf\u30c3\u30af\u3084state\u306e\u9069\u5207\u306a\u5206\u5272\u65b9\u6cd5\u306b\u3064\u3044\u3066\u5b66\u3073\u307e\u3059\u3002</p> <p>\u7ba1\u7406\u5358\u4f4d\u306e\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9 \u2192</p>"},{"location":"iac/testing/","title":"\u30c6\u30b9\u30c8\u306e\u91cd\u8981\u6027","text":"<p>IaC\u30b3\u30fc\u30c9\u3082\u901a\u5e38\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b3\u30fc\u30c9\u3068\u540c\u69d8\u306b\u3001\u30c6\u30b9\u30c8\u304c\u4e0d\u53ef\u6b20\u3067\u3059\u3002\u30a4\u30f3\u30d5\u30e9\u306e\u5909\u66f4\u306f\u672c\u756a\u74b0\u5883\u306b\u76f4\u63a5\u5f71\u97ff\u3059\u308b\u305f\u3081\u3001\u4e8b\u524d\u306b\u30c6\u30b9\u30c8\u3067\u54c1\u8cea\u3092\u4fdd\u8a3c\u3059\u308b\u3053\u3068\u304c\u91cd\u8981\u3067\u3059\u3002</p>"},{"location":"iac/testing/#iac","title":"\u306a\u305cIaC\u306b\u30c6\u30b9\u30c8\u304c\u5fc5\u8981\u306a\u306e\u304b","text":""},{"location":"iac/testing/#_2","title":"\u672c\u756a\u74b0\u5883\u3078\u306e\u5f71\u97ff\u3092\u6700\u5c0f\u5316","text":"<p>\u30a4\u30f3\u30d5\u30e9\u306e\u5909\u66f4\u306f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u53ef\u7528\u6027\u3084\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306b\u76f4\u7d50\u3057\u307e\u3059\u3002</p> <ul> <li>\u30c0\u30a6\u30f3\u30bf\u30a4\u30e0\u306e\u9632\u6b62: \u30c7\u30d7\u30ed\u30a4\u524d\u306b\u30a8\u30e9\u30fc\u3092\u691c\u51fa</li> <li>\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30ea\u30b9\u30af\u306e\u56de\u907f: \u610f\u56f3\u3057\u306a\u3044\u516c\u958b\u8a2d\u5b9a\u306a\u3069\u3092\u4e8b\u524d\u306b\u767a\u898b</li> <li>\u30b3\u30b9\u30c8\u6700\u9069\u5316: \u4e0d\u8981\u306a\u30ea\u30bd\u30fc\u30b9\u4f5c\u6210\u3092\u9632\u3050</li> </ul>"},{"location":"iac/testing/#_3","title":"\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\u306e\u5b89\u5168\u6027","text":"<p>\u30c6\u30b9\u30c8\u304c\u3042\u308b\u3053\u3068\u3067\u3001\u5b89\u5fc3\u3057\u3066\u30b3\u30fc\u30c9\u3092\u6539\u5584\u3067\u304d\u307e\u3059\u3002</p> <ul> <li>\u30b3\u30fc\u30c9\u3092\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\u3057\u3066\u3082\u3001\u671f\u5f85\u901a\u308a\u306e\u52d5\u4f5c\u3092\u4fdd\u8a3c</li> <li>\u65b0\u3057\u3044\u30e1\u30f3\u30d0\u30fc\u304c\u5909\u66f4\u3092\u52a0\u3048\u308b\u969b\u306e\u5b89\u5168\u7db2</li> </ul>"},{"location":"iac/testing/#_4","title":"\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3068\u3057\u3066\u306e\u5f79\u5272","text":"<p>\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u306f\u300c\u671f\u5f85\u3055\u308c\u308b\u52d5\u4f5c\u300d\u3092\u793a\u3059\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u306a\u308a\u307e\u3059\u3002</p> <ul> <li>\u30a4\u30f3\u30d5\u30e9\u306e\u8981\u4ef6\u3092\u660e\u793a\u7684\u306b\u8a18\u8ff0</li> <li>\u30c1\u30fc\u30e0\u30e1\u30f3\u30d0\u30fc\u304c\u4ed5\u69d8\u3092\u7406\u89e3\u3057\u3084\u3059\u304f\u306a\u308b</li> </ul>"},{"location":"iac/testing/#iac_1","title":"IaC\u30c6\u30b9\u30c8\u306e\u7a2e\u985e","text":"<p>IaC\u306e\u30c6\u30b9\u30c8\u306f\u3001\u30c6\u30b9\u30c8\u306e\u5bfe\u8c61\u3068\u7bc4\u56f2\u306b\u3088\u3063\u3066\u8907\u6570\u306e\u30ec\u30d9\u30eb\u306b\u5206\u985e\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"iac/testing/#1-lint","title":"1. \u9759\u7684\u89e3\u6790\u30fbLint","text":"<p>\u30b3\u30fc\u30c9\u306e\u54c1\u8cea\u3092\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\u3002\u5b9f\u969b\u306b\u30ea\u30bd\u30fc\u30b9\u3092\u4f5c\u6210\u305b\u305a\u3001\u30b3\u30fc\u30c9\u81ea\u4f53\u3092\u691c\u8a3c\u3057\u307e\u3059\u3002</p> <p>\u76ee\u7684:</p> <ul> <li>\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u898f\u7d04\u9055\u53cd\u306e\u691c\u51fa</li> <li>\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u304b\u3089\u306e\u9038\u8131\u3092\u767a\u898b</li> <li>\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30ea\u30b9\u30af\u306e\u65e9\u671f\u767a\u898b</li> </ul> <p>\u5b9f\u884c\u30bf\u30a4\u30df\u30f3\u30b0: \u30b3\u30fc\u30c9\u7de8\u96c6\u4e2d\u3001\u30b3\u30df\u30c3\u30c8\u524d\u3001CI/CD</p> CDK (TypeScript)Terraform (HCL) <pre><code># TypeScript\u578b\u30c1\u30a7\u30c3\u30af\nnpm run build\n\n# ESLint\u306b\u3088\u308b\u30b3\u30fc\u30c9\u54c1\u8cea\u30c1\u30a7\u30c3\u30af\nnpm run lint\n\n# CDK\u7279\u6709\u306e\u554f\u984c\u3092\u30c1\u30a7\u30c3\u30af\ncdk synth  # CloudFormation\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u751f\u6210\u3057\u3066\u69cb\u6587\u30a8\u30e9\u30fc\u3092\u691c\u51fa\n</code></pre> <pre><code># \u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u30c1\u30a7\u30c3\u30af\nterraform fmt -check\n\n# \u69cb\u6587\u30c1\u30a7\u30c3\u30af\nterraform validate\n\n# Lint\u30c4\u30fc\u30eb(tflint)\ntflint\n\n# \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b9\u30ad\u30e3\u30f3(tfsec)\ntfsec .\n</code></pre> <p>\u4f8b: tfsec\u306b\u3088\u308b\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30c1\u30a7\u30c3\u30af</p> <pre><code># \u274c tfsec\u304c\u691c\u51fa\u3059\u308b\u554f\u984c\nresource \"aws_s3_bucket\" \"bad\" {\n  bucket = \"my-bucket\"\n  # \u6697\u53f7\u5316\u304c\u6709\u52b9\u5316\u3055\u308c\u3066\u3044\u306a\u3044 \u2192 tfsec\u304c\u8b66\u544a\n}\n\n# \u2705 \u30bb\u30ad\u30e5\u30a2\u306a\u8a2d\u5b9a\nresource \"aws_s3_bucket\" \"good\" {\n  bucket = \"my-bucket\"\n}\n\nresource \"aws_s3_bucket_server_side_encryption_configuration\" \"good\" {\n  bucket = aws_s3_bucket.good.id\n  rule {\n    apply_server_side_encryption_by_default {\n      sse_algorithm = \"AES256\"\n    }\n  }\n}\n</code></pre>"},{"location":"iac/testing/#2-unit-test","title":"2. \u5358\u4f53\u30c6\u30b9\u30c8 (Unit Test)","text":"<p>\u500b\u5225\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3084\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30c8\u306e\u52d5\u4f5c\u3092\u691c\u8a3c\u3057\u307e\u3059\u3002\u5b9f\u969b\u306e\u30af\u30e9\u30a6\u30c9\u30ea\u30bd\u30fc\u30b9\u306f\u4f5c\u6210\u305b\u305a\u3001\u751f\u6210\u3055\u308c\u308b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u30c6\u30b9\u30c8\u3057\u307e\u3059\u3002</p> <p>\u76ee\u7684:</p> <ul> <li>\u671f\u5f85\u901a\u308a\u306e\u30ea\u30bd\u30fc\u30b9\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u304b</li> <li>\u8a2d\u5b9a\u5024\u304c\u6b63\u3057\u3044\u304b</li> <li>\u30ea\u30bd\u30fc\u30b9\u9593\u306e\u95a2\u4fc2\u304c\u6b63\u3057\u3044\u304b</li> </ul> <p>\u5b9f\u884c\u30bf\u30a4\u30df\u30f3\u30b0: \u958b\u767a\u4e2d\u3001\u30b3\u30df\u30c3\u30c8\u524d\u3001CI/CD</p> CDK (TypeScript)Terraform (HCL) <pre><code>// test/secure-bucket.test.ts\nimport { Template, Match } from 'aws-cdk-lib/assertions';\nimport { Stack } from 'aws-cdk-lib';\nimport { SecureBucket } from '../lib/constructs/secure-bucket';\n\ndescribe('SecureBucket', () =&gt; {\n  let stack: Stack;\n  let template: Template;\n\n  // \u5404\u30c6\u30b9\u30c8\u306e\u524d\u306b\u5171\u901a\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3092\u5b9f\u884c\n  beforeEach(() =&gt; {\n    stack = new Stack();\n    new SecureBucket(stack, 'TestBucket');\n    template = Template.fromStack(stack);\n  });\n\n  test('S3\u30d0\u30b1\u30c3\u30c8\u304c1\u3064\u4f5c\u6210\u3055\u308c\u308b', () =&gt; {\n    template.resourceCountIs('AWS::S3::Bucket', 1);\n  });\n\n  test('\u6697\u53f7\u5316\u304c\u6709\u52b9\u5316\u3055\u308c\u3066\u3044\u308b', () =&gt; {\n    // \u6697\u53f7\u5316\u8a2d\u5b9a\u304c\u542b\u307e\u308c\u3066\u3044\u308b\n    template.hasResourceProperties('AWS::S3::Bucket', {\n      BucketEncryption: {\n        ServerSideEncryptionConfiguration: [{\n          ServerSideEncryptionByDefault: {\n            SSEAlgorithm: 'AES256'\n          }\n        }]\n      }\n    });\n  });\n\n  test('\u30d1\u30d6\u30ea\u30c3\u30af\u30a2\u30af\u30bb\u30b9\u304c\u30d6\u30ed\u30c3\u30af\u3055\u308c\u3066\u3044\u308b', () =&gt; {\n    template.hasResourceProperties('AWS::S3::Bucket', {\n      PublicAccessBlockConfiguration: {\n        BlockPublicAcls: true,\n        BlockPublicPolicy: true,\n        IgnorePublicAcls: true,\n        RestrictPublicBuckets: true\n      }\n    });\n  });\n\n  test('\u30d0\u30fc\u30b8\u30e7\u30cb\u30f3\u30b0\u304c\u6709\u52b9\u5316\u3055\u308c\u3066\u3044\u308b', () =&gt; {\n    template.hasResourceProperties('AWS::S3::Bucket', {\n      VersioningConfiguration: {\n        Status: 'Enabled'\n      }\n    });\n  });\n\n  test('SSL\u901a\u4fe1\u304c\u5f37\u5236\u3055\u308c\u3066\u3044\u308b', () =&gt; {\n    // BucketPolicy\u3067SSL\u901a\u4fe1\u3092\u5f37\u5236\n    template.hasResourceProperties('AWS::S3::BucketPolicy', {\n      PolicyDocument: Match.objectLike({\n        Statement: Match.arrayWith([\n          Match.objectLike({\n            Effect: 'Deny',\n            Condition: {\n              Bool: {\n                'aws:SecureTransport': 'false'\n              }\n            }\n          })\n        ])\n      })\n    });\n  });\n});\n</code></pre> <pre><code># \u30c6\u30b9\u30c8\u5b9f\u884c\nnpm test\n</code></pre> <p>\u4f7f\u7528\u3059\u308b\u30e9\u30a4\u30d6\u30e9\u30ea:</p> <pre><code>{\n  \"devDependencies\": {\n    \"@types/jest\": \"^29.5.0\",\n    \"@types/node\": \"^20.0.0\",\n    \"aws-cdk-lib\": \"^2.100.0\",\n    \"constructs\": \"^10.0.0\",\n    \"jest\": \"^29.5.0\",\n    \"ts-jest\": \"^29.1.0\",\n    \"typescript\": \"^5.0.0\"\n  }\n}\n</code></pre> <p>Terraform\u306b\u306f\u8907\u6570\u306e\u30c6\u30b9\u30c8\u65b9\u6cd5\u304c\u3042\u308a\u307e\u3059\u3002</p> <p>1. <code>terraform test</code> (Terraform 1.6.0\u4ee5\u964d\u306e\u516c\u5f0f\u6a5f\u80fd)</p> <p>\u6700\u65b0\u306eTerraform\u3067\u306f\u3001\u516c\u5f0f\u306e\u30c6\u30b9\u30c8\u6a5f\u80fd\u304c\u5229\u7528\u53ef\u80fd\u3067\u3059\u3002</p> <pre><code># tests/s3_security.tftest.hcl\n\n# \u30c6\u30b9\u30c8\u8a2d\u5b9a\nvariables {\n  bucket_name = \"test-secure-bucket\"\n  environment = \"testing\"\n}\n\n# S3\u30d0\u30b1\u30c3\u30c8\u304c1\u3064\u4f5c\u6210\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\nrun \"check_bucket_count\" {\n  command = plan\n\n  assert {\n    condition     = length([aws_s3_bucket.secure_bucket]) == 1\n    error_message = \"S3\u30d0\u30b1\u30c3\u30c8\u304c1\u3064\u4f5c\u6210\u3055\u308c\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\"\n  }\n}\n\n# \u6697\u53f7\u5316\u8a2d\u5b9a\u306e\u691c\u8a3c\nrun \"check_encryption\" {\n  command = plan\n\n  assert {\n    condition = (\n      aws_s3_bucket_server_side_encryption_configuration.secure_bucket.rule[0]\n      .apply_server_side_encryption_by_default[0].sse_algorithm == \"AES256\"\n    )\n    error_message = \"S3\u30d0\u30b1\u30c3\u30c8\u306fAES256\u3067\u6697\u53f7\u5316\u3055\u308c\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\"\n  }\n}\n\n# \u30d1\u30d6\u30ea\u30c3\u30af\u30a2\u30af\u30bb\u30b9\u30d6\u30ed\u30c3\u30af\u306e\u691c\u8a3c\nrun \"check_public_access_block\" {\n  command = plan\n\n  # \u3059\u3079\u3066\u306e\u30d1\u30d6\u30ea\u30c3\u30af\u30a2\u30af\u30bb\u30b9\u8a2d\u5b9a\u3092\u78ba\u8a8d\n  assert {\n    condition = (\n      aws_s3_bucket_public_access_block.secure_bucket.block_public_acls == true &amp;&amp;\n      aws_s3_bucket_public_access_block.secure_bucket.block_public_policy == true &amp;&amp;\n      aws_s3_bucket_public_access_block.secure_bucket.ignore_public_acls == true &amp;&amp;\n      aws_s3_bucket_public_access_block.secure_bucket.restrict_public_buckets == true\n    )\n    error_message = \"\u3059\u3079\u3066\u306e\u30d1\u30d6\u30ea\u30c3\u30af\u30a2\u30af\u30bb\u30b9\u3092\u30d6\u30ed\u30c3\u30af\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\"\n  }\n}\n\n# \u30d0\u30fc\u30b8\u30e7\u30cb\u30f3\u30b0\u8a2d\u5b9a\u306e\u691c\u8a3c\nrun \"check_versioning\" {\n  command = plan\n\n  assert {\n    condition = (\n      aws_s3_bucket_versioning.secure_bucket.versioning_configuration[0].status == \"Enabled\"\n    )\n    error_message = \"\u30d0\u30b1\u30c3\u30c8\u306e\u30d0\u30fc\u30b8\u30e7\u30cb\u30f3\u30b0\u3092\u6709\u52b9\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\"\n  }\n}\n\n# \u7121\u52b9\u306a\u5165\u529b\u304c\u5931\u6557\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d(\u30cd\u30ac\u30c6\u30a3\u30d6\u30c6\u30b9\u30c8)\nrun \"invalid_bucket_name_should_fail\" {\n  command = plan\n\n  variables {\n    bucket_name = \"INVALID_BUCKET_NAME\"  # \u5927\u6587\u5b57\u306f\u8a31\u53ef\u3055\u308c\u306a\u3044\n  }\n\n  expect_failures = [\n    var.bucket_name  # \u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3059\u308b\u3053\u3068\u3092\u671f\u5f85\n  ]\n}\n</code></pre> <pre><code># \u30c6\u30b9\u30c8\u5b9f\u884c\nterraform test\n\n# \u7279\u5b9a\u306e\u30c6\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u306e\u307f\u5b9f\u884c\nterraform test -filter=tests/s3_security.tftest.hcl\n</code></pre> <p>\u30e2\u30c3\u30af\u6a5f\u80fd\u306e\u6d3b\u7528 (Terraform 1.7.0\u4ee5\u964d)</p> <p>\u5916\u90e8\u30b5\u30fc\u30d3\u30b9\u3084\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u3092\u30e2\u30c3\u30af\u5316\u3057\u3066\u3001\u5b9f\u969b\u306eAWS\u30ea\u30bd\u30fc\u30b9\u306a\u3057\u3067\u30c6\u30b9\u30c8\u53ef\u80fd\u3067\u3059\u3002</p> <pre><code># tests/with_mock.tftest.hcl\n\n# \u30e2\u30c3\u30af\u30d7\u30ed\u30d0\u30a4\u30c0\u30fc\u306e\u8a2d\u5b9a\nmock_provider \"aws\" {\n  # \u30e2\u30c3\u30af\u30c7\u30fc\u30bf\u306e\u5b9a\u7fa9\n  mock_data \"aws_caller_identity\" {\n    defaults = {\n      account_id = \"123456789012\"\n      arn        = \"arn:aws:iam::123456789012:user/test\"\n      user_id    = \"AIDACKCEVSQ6C2EXAMPLE\"\n    }\n  }\n\n  # \u7279\u5b9a\u306e\u30ea\u30bd\u30fc\u30b9\u306e\u30e2\u30c3\u30af\n  mock_resource \"aws_s3_bucket\" {\n    defaults = {\n      id  = \"test-bucket\"\n      arn = \"arn:aws:s3:::test-bucket\"\n    }\n  }\n}\n\nrun \"test_with_mocked_aws\" {\n  command = plan\n\n  # \u30e2\u30c3\u30af\u3092\u4f7f\u7528\u3057\u305f\u30c6\u30b9\u30c8\n  assert {\n    condition     = aws_s3_bucket.secure_bucket.id != \"\"\n    error_message = \"\u30d0\u30b1\u30c3\u30c8ID\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\"\n  }\n}\n\n# \u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u306e\u30e2\u30c3\u30af\u4f8b\nrun \"test_with_mocked_data_source\" {\n  command = plan\n\n  # VPC\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u3092\u30e2\u30c3\u30af\n  override_data {\n    target = data.aws_vpc.existing\n    values = {\n      id         = \"vpc-12345678\"\n      cidr_block = \"10.0.0.0/16\"\n    }\n  }\n\n  assert {\n    condition     = data.aws_vpc.existing.id == \"vpc-12345678\"\n    error_message = \"VPC ID\u304c\u6b63\u3057\u304f\u53d6\u5f97\u3067\u304d\u307e\u305b\u3093\"\n  }\n}\n</code></pre> <p><code>check</code>\u30d6\u30ed\u30c3\u30af\u3092\u4f7f\u3063\u305f\u7d99\u7d9a\u7684\u691c\u8a3c</p> <p><code>check</code>\u30d6\u30ed\u30c3\u30af\u306f\u3001\u30a4\u30f3\u30d5\u30e9\u306e\u72b6\u614b\u3092\u7d99\u7d9a\u7684\u306b\u691c\u8a3c\u3059\u308b\u305f\u3081\u306e\u6a5f\u80fd\u3067\u3059(Terraform 1.5.0\u4ee5\u964d)\u3002</p> <pre><code># main.tf\n\nresource \"aws_s3_bucket\" \"secure_bucket\" {\n  bucket = var.bucket_name\n}\n\nresource \"aws_s3_bucket_server_side_encryption_configuration\" \"secure_bucket\" {\n  bucket = aws_s3_bucket.secure_bucket.id\n\n  rule {\n    apply_server_side_encryption_by_default {\n      sse_algorithm = \"AES256\"\n    }\n  }\n}\n\n# \u30e9\u30f3\u30bf\u30a4\u30e0\u30c1\u30a7\u30c3\u30af: apply\u5f8c\u3082\u5e38\u306b\u691c\u8a3c\ncheck \"bucket_encryption\" {\n  # \u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u3067\u5b9f\u969b\u306e\u72b6\u614b\u3092\u53d6\u5f97\n  data \"aws_s3_bucket\" \"verify\" {\n    bucket = aws_s3_bucket.secure_bucket.id\n  }\n\n  # \u6697\u53f7\u5316\u304c\u6709\u52b9\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\n  assert {\n    condition = (\n      data.aws_s3_bucket.verify.server_side_encryption_configuration != null\n    )\n    error_message = \"\u30d0\u30b1\u30c3\u30c8\u306e\u6697\u53f7\u5316\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u305b\u3093\"\n  }\n}\n\ncheck \"bucket_versioning\" {\n  data \"aws_s3_bucket_versioning\" \"verify\" {\n    bucket = aws_s3_bucket.secure_bucket.id\n  }\n\n  # \u30d0\u30fc\u30b8\u30e7\u30cb\u30f3\u30b0\u304c\u6709\u52b9\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\n  assert {\n    condition     = data.aws_s3_bucket_versioning.verify.versioning_configuration[0].status == \"Enabled\"\n    error_message = \"\u30d0\u30b1\u30c3\u30c8\u306e\u30d0\u30fc\u30b8\u30e7\u30cb\u30f3\u30b0\u304c\u7121\u52b9\u3067\u3059\"\n  }\n}\n\n# \u8907\u6570\u306e\u30a2\u30b5\u30fc\u30b7\u30e7\u30f3\u3092\u542b\u3080\u30c1\u30a7\u30c3\u30af\ncheck \"security_compliance\" {\n  data \"aws_s3_bucket_public_access_block\" \"verify\" {\n    bucket = aws_s3_bucket.secure_bucket.id\n  }\n\n  assert {\n    condition     = data.aws_s3_bucket_public_access_block.verify.block_public_acls == true\n    error_message = \"\u30d1\u30d6\u30ea\u30c3\u30afACL\u304c\u30d6\u30ed\u30c3\u30af\u3055\u308c\u3066\u3044\u307e\u305b\u3093\"\n  }\n\n  assert {\n    condition     = data.aws_s3_bucket_public_access_block.verify.block_public_policy == true\n    error_message = \"\u30d1\u30d6\u30ea\u30c3\u30af\u30dd\u30ea\u30b7\u30fc\u304c\u30d6\u30ed\u30c3\u30af\u3055\u308c\u3066\u3044\u307e\u305b\u3093\"\n  }\n}\n</code></pre> <p><code>check</code>\u30d6\u30ed\u30c3\u30af\u3068<code>test</code>\u306e\u9055\u3044:</p> \u9805\u76ee <code>terraform test</code> <code>check</code>\u30d6\u30ed\u30c3\u30af \u5b9f\u884c\u30bf\u30a4\u30df\u30f3\u30b0 \u660e\u793a\u7684\u306b\u30c6\u30b9\u30c8\u6642\u306e\u307f plan/apply\u6642\u306b\u5e38\u306b\u5b9f\u884c \u7528\u9014 \u958b\u767a\u6642\u306e\u5358\u4f53\u30fb\u7d71\u5408\u30c6\u30b9\u30c8 \u672c\u756a\u904b\u7528\u6642\u306e\u7d99\u7d9a\u7684\u691c\u8a3c \u5931\u6557\u6642\u306e\u6319\u52d5 \u30c6\u30b9\u30c8\u5931\u6557\u3067\u505c\u6b62 \u8b66\u544a\u306e\u307f(apply\u306f\u7d99\u7d9a) \u914d\u7f6e\u5834\u6240 <code>tests/</code>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea \u30e1\u30a4\u30f3\u306e<code>.tf</code>\u30d5\u30a1\u30a4\u30eb\u5185 \u30e2\u30c3\u30af\u5bfe\u5fdc \u5bfe\u5fdc \u975e\u5bfe\u5fdc(\u5b9f\u30ea\u30bd\u30fc\u30b9\u5fc5\u9808) <pre><code># check\u30d6\u30ed\u30c3\u30af\u306e\u691c\u8a3c\u7d50\u679c\u78ba\u8a8d\nterraform plan  # \u30c1\u30a7\u30c3\u30af\u7d50\u679c\u304c\u8868\u793a\u3055\u308c\u308b\nterraform apply # apply\u3067\u3082\u30c1\u30a7\u30c3\u30af\u304c\u5b9f\u884c\u3055\u308c\u308b\n\n# \u30c1\u30a7\u30c3\u30af\u7d50\u679c\u306e\u4f8b:\n# Check results:\n# \u2713 bucket_encryption passed\n# \u2713 bucket_versioning passed\n# \u2717 security_compliance failed\n#   - \u30d1\u30d6\u30ea\u30c3\u30afACL\u304c\u30d6\u30ed\u30c3\u30af\u3055\u308c\u3066\u3044\u307e\u305b\u3093\n</code></pre>"},{"location":"iac/testing/#iac_2","title":"IaC\u30c6\u30b9\u30c8\u306e\u8cac\u52d9\u3068\u7bc4\u56f2","text":"<p>IaC\u30c6\u30b9\u30c8\u3067\u306f\u3001\u300c\u74b0\u5883\u3092\u6b63\u3057\u304f\u4f5c\u308b\u3053\u3068\u300d\u306b\u96c6\u4e2d\u3059\u3079\u304d\u3067\u3059\u3002\u5b9f\u969b\u306eAWS\u52d5\u4f5c\u691c\u8a3c\u306f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5074\u306eE2E/\u7d71\u5408\u30c6\u30b9\u30c8\u3067\u884c\u3044\u307e\u3059\u3002</p>"},{"location":"iac/testing/#iac_3","title":"IaC\u30c6\u30b9\u30c8\u306e\u8cac\u52d9","text":"<p>\u2705 IaC\u304c\u62c5\u5f53\u3059\u3079\u304d\u30c6\u30b9\u30c8:</p> <ul> <li>\u30a4\u30f3\u30d5\u30e9\u5b9a\u7fa9(CDK/Terraform)\u304c\u6b63\u3057\u3044\u304b</li> <li>\u30ea\u30bd\u30fc\u30b9\u304c\u671f\u5f85\u901a\u308a\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u304b</li> <li>\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a\u304c\u9069\u5207\u304b</li> <li>\u547d\u540d\u898f\u5247\u3084\u69cb\u6210\u304c\u7d44\u7e54\u306e\u30eb\u30fc\u30eb\u306b\u6e96\u62e0\u3057\u3066\u3044\u308b\u304b</li> </ul> <p>\u274c IaC\u3067\u884c\u3046\u3079\u304d\u3067\u306a\u3044\u30c6\u30b9\u30c8:</p> <ul> <li>S3\u306b\u30d5\u30a1\u30a4\u30eb\u304c\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3067\u304d\u308b\u304b \u2192 \u30a2\u30d7\u30ea\u306eE2E\u30c6\u30b9\u30c8</li> <li>Lambda\u95a2\u6570\u304c\u6b63\u3057\u304f\u52d5\u4f5c\u3059\u308b\u304b \u2192 \u30a2\u30d7\u30ea\u306eE2E\u30c6\u30b9\u30c8</li> <li>API Gateway\u304c\u5fdc\u7b54\u3092\u8fd4\u3059\u304b \u2192 \u30a2\u30d7\u30ea\u306eE2E\u30c6\u30b9\u30c8</li> </ul>"},{"location":"iac/testing/#_5","title":"\u8cac\u4efb\u306e\u5206\u96e2","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  IaC\u30c6\u30b9\u30c8 (\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u7bc4\u56f2)      \u2502\n\u2502  \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \u2502\n\u2502  \u2713 \u9759\u7684\u89e3\u6790 (Lint)                       \u2502\n\u2502  \u2713 \u5358\u4f53\u30c6\u30b9\u30c8 (Template/Plan\u691c\u8a3c)       \u2502\n\u2502  \u2713 \u30dd\u30ea\u30b7\u30fc\u30c6\u30b9\u30c8 (\u30b3\u30f3\u30d7\u30e9\u30a4\u30a2\u30f3\u30b9)     \u2502\n\u2502  \u2192 \u30a4\u30f3\u30d5\u30e9\u5b9a\u7fa9\u304c\u6b63\u3057\u3044\u3053\u3068\u3092\u4fdd\u8a3c        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                  \u2193 \u30c7\u30d7\u30ed\u30a4\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3E2E/\u7d71\u5408\u30c6\u30b9\u30c8           \u2502\n\u2502  \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \u2502\n\u2502  \u2713 \u30c7\u30d7\u30ed\u30a4\u3055\u308c\u305f\u74b0\u5883\u3067\u306e\u52d5\u4f5c\u691c\u8a3c        \u2502\n\u2502  \u2713 \u30b5\u30fc\u30d3\u30b9\u9593\u9023\u643a\u306e\u78ba\u8a8d                  \u2502\n\u2502  \u2713 \u5b9f\u969b\u306eAWS API\u306e\u52d5\u4f5c\u78ba\u8a8d               \u2502\n\u2502  \u2192 \u30a4\u30f3\u30d5\u30e9\u304c\u671f\u5f85\u901a\u308a\u52d5\u4f5c\u3059\u308b\u3053\u3068\u3092\u4fdd\u8a3c  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>IaC\u306f\u300c\u571f\u53f0\u3092\u6b63\u3057\u304f\u4f5c\u308b\u3053\u3068\u300d\u3001\u30a2\u30d7\u30ea\u306f\u300c\u571f\u53f0\u304c\u6b63\u3057\u304f\u52d5\u304f\u3053\u3068\u300d\u306b\u96c6\u4e2d\u3059\u308b\u3053\u3068\u3067\u3001\u8cac\u4efb\u304c\u660e\u78ba\u306b\u306a\u308a\u4fdd\u5b88\u3057\u3084\u3059\u304f\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"iac/testing/#3-policy-as-code","title":"3. \u30dd\u30ea\u30b7\u30fc\u30c6\u30b9\u30c8 (Policy as Code)","text":"<p>\u30dd\u30ea\u30b7\u30fc\u30c6\u30b9\u30c8\u306f\u3001\u7d44\u7e54\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30fb\u30b3\u30f3\u30d7\u30e9\u30a4\u30a2\u30f3\u30b9\u30dd\u30ea\u30b7\u30fc\u306b\u6e96\u62e0\u3057\u3066\u3044\u308b\u304b\u3092\u81ea\u52d5\u691c\u8a3c\u3059\u308b\u624b\u6cd5\u3067\u3059\u3002</p> <p>\u5b9f\u52d9\u3067\u306e\u4f4d\u7f6e\u3065\u3051</p> <p>\u30dd\u30ea\u30b7\u30fc\u30c6\u30b9\u30c8\u306f\u4e3b\u306b\u5927\u4f01\u696d\u3084\u53b3\u683c\u306a\u30b3\u30f3\u30d7\u30e9\u30a4\u30a2\u30f3\u30b9\u8981\u4ef6\u304c\u3042\u308b\u7d44\u7e54\u3067\u5c0e\u5165\u3055\u308c\u3066\u3044\u308b\u9ad8\u5ea6\u306a\u624b\u6cd5\u3067\u3059\u3002\u4e00\u822c\u7684\u306a\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u306f\u3001\u9759\u7684\u89e3\u6790\u30c4\u30fc\u30eb(tflint\u3001tfsec\u7b49)\u3067\u5341\u5206\u306a\u30b1\u30fc\u30b9\u304c\u591a\u3044\u3067\u3059\u3002</p> <p>\u4e3b\u306a\u30c4\u30fc\u30eb:</p> <ul> <li>Open Policy Agent (OPA): Rego\u3068\u3044\u3046\u8a00\u8a9e\u3067\u30dd\u30ea\u30b7\u30fc\u3092\u8a18\u8ff0\u3059\u308b\u6c4e\u7528\u7684\u306a\u30dd\u30ea\u30b7\u30fc\u30a8\u30f3\u30b8\u30f3</li> <li>Sentinel (Terraform Cloud/Enterprise): Terraform\u306b\u7279\u5316\u3057\u305f\u30dd\u30ea\u30b7\u30fc\u30a8\u30f3\u30b8\u30f3</li> </ul> <p>\u9069\u7528\u4f8b:</p> <ul> <li>\u3059\u3079\u3066\u306eS3\u30d0\u30b1\u30c3\u30c8\u306f\u5fc5\u305a\u6697\u53f7\u5316\u3059\u308b</li> <li>\u672c\u756a\u74b0\u5883\u306eRDS\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306f\u30de\u30eb\u30c1AZ\u69cb\u6210\u306b\u3059\u308b</li> <li>\u7279\u5b9a\u306e\u30ea\u30fc\u30b8\u30e7\u30f3\u4ee5\u5916\u306b\u30ea\u30bd\u30fc\u30b9\u3092\u4f5c\u6210\u3057\u306a\u3044</li> <li>\u30bf\u30b0\u4ed8\u3051\u30eb\u30fc\u30eb(\u74b0\u5883\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d\u306a\u3069)\u3092\u5f37\u5236\u3059\u308b</li> </ul> <p>\u5b9f\u884c\u30bf\u30a4\u30df\u30f3\u30b0: CI/CD\u3001Plan/Synth\u5f8c\u3001\u30c7\u30d7\u30ed\u30a4\u524d</p> <p>\u8208\u5473\u304c\u3042\u308b\u65b9\u306f\u3001Open Policy Agent\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"iac/testing/#_6","title":"\u30c6\u30b9\u30c8\u6226\u7565","text":""},{"location":"iac/testing/#iac_4","title":"IaC\u30c6\u30b9\u30c8\u30d4\u30e9\u30df\u30c3\u30c9","text":"<p>IaC\u30c6\u30b9\u30c8\u306f\u3001\u30a4\u30f3\u30d5\u30e9\u5b9a\u7fa9\u306e\u6b63\u3057\u3055\u3092\u4fdd\u8a3c\u3059\u308b\u3053\u3068\u306b\u96c6\u4e2d\u3057\u307e\u3059\u3002</p> <pre><code>           \u25b3\n          \u2571 \u2572\n         \u2571   \u2572        \u5c11\u306a\u3044\n        \u2571 \u30dd\u30ea \u2572      (\u7d44\u7e54\u30eb\u30fc\u30eb)\n       \u2571 \u30b7\u30fc  \u2572\n      \u2571  \u30c6\u30b9\u30c8 \u2572\n     \u2571\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2572\n    \u2571             \u2572   \u4e2d\u7a0b\u5ea6\n   \u2571   \u5358\u4f53\u30c6\u30b9\u30c8   \u2572  (\u30e2\u30b8\u30e5\u30fc\u30eb\u691c\u8a3c)\n  \u2571                 \u2572\n \u2571\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2572\n\u2571                     \u2572 \u591a\u3044\n      \u9759\u7684\u89e3\u6790          (\u5168\u30b3\u30fc\u30c9)\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n</code></pre> <p>\u63a8\u5968\u30d0\u30e9\u30f3\u30b9:</p> <ul> <li>\u9759\u7684\u89e3\u6790: \u5168\u3066\u306e\u30b3\u30fc\u30c9\u306b\u9069\u7528\u3001\u30b3\u30df\u30c3\u30c8\u524d\u306b\u5fc5\u305a\u5b9f\u884c(\u5fc5\u9808)</li> <li>\u5358\u4f53\u30c6\u30b9\u30c8: \u91cd\u8981\u306a\u30e2\u30b8\u30e5\u30fc\u30eb/\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30c8\u306b\u9069\u7528(\u63a8\u5968)</li> <li>\u30dd\u30ea\u30b7\u30fc\u30c6\u30b9\u30c8: \u53b3\u683c\u306a\u30b3\u30f3\u30d7\u30e9\u30a4\u30a2\u30f3\u30b9\u8981\u4ef6\u304c\u3042\u308b\u5834\u5408\u306e\u307f(\u30aa\u30d7\u30b7\u30e7\u30f3)</li> </ul>"},{"location":"iac/testing/#cicd","title":"CI/CD\u3078\u306e\u7d44\u307f\u8fbc\u307f","text":"<p>\u30c6\u30b9\u30c8\u306f\u81ea\u52d5\u5316\u3057\u3066\u3001CI/CD\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u306b\u7d44\u307f\u8fbc\u3080\u3053\u3068\u304c\u91cd\u8981\u3067\u3059\u3002</p> CDK (TypeScript)Terraform (HCL) <pre><code># .github/workflows/cdk-test.yml (GitHub Actions\u4f8b)\nname: CDK Test\n\non:\n  pull_request:\n    paths:\n      - 'infrastructure/**'\n\njobs:\n  static-analysis:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n\n      - name: Setup Node.js\n        uses: actions/setup-node@v3\n        with:\n          node-version: '18'\n\n      - name: Install dependencies\n        run: npm ci\n\n      # \u9759\u7684\u89e3\u6790\n      - name: ESLint\n        run: npm run lint\n\n      - name: CDK Synth Check\n        run: npx cdk synth\n\n  unit-test:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n\n      - name: Setup Node.js\n        uses: actions/setup-node@v3\n        with:\n          node-version: '18'\n\n      - name: Install dependencies\n        run: npm ci\n\n      # \u5358\u4f53\u30c6\u30b9\u30c8\n      - name: Run unit tests\n        run: npm test\n\n      - name: Upload coverage\n        uses: codecov/codecov-action@v3\n        with:\n          files: ./coverage/lcov.info\n\n  # \u30dd\u30ea\u30b7\u30fc\u30c6\u30b9\u30c8 (\u30aa\u30d7\u30b7\u30e7\u30f3: \u53b3\u683c\u306a\u30b3\u30f3\u30d7\u30e9\u30a4\u30a2\u30f3\u30b9\u8981\u4ef6\u304c\u3042\u308b\u5834\u5408)\n  # policy-test:\n  #   runs-on: ubuntu-latest\n  #   steps:\n  #     - uses: actions/checkout@v3\n  #     - name: Setup Node.js\n  #       uses: actions/setup-node@v3\n  #       with:\n  #         node-version: '18'\n  #     - name: Install dependencies\n  #       run: npm ci\n  #     - name: CDK Synth\n  #       run: npx cdk synth -o cdk.out\n  #     - name: Setup OPA\n  #       uses: open-policy-agent/setup-opa@v2\n  #     - name: Run Policy Tests\n  #       run: opa eval --data policy/ --input cdk.out/manifest.json \"data.cdk.deny\"\n</code></pre> <pre><code># .github/workflows/terraform-test.yml (GitHub Actions\u4f8b)\nname: Terraform Test\n\non:\n  pull_request:\n    paths:\n      - 'infrastructure/**'\n\njobs:\n  static-analysis:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n\n      - name: Setup Terraform\n        uses: hashicorp/setup-terraform@v3\n\n      # \u9759\u7684\u89e3\u6790\n      - name: Terraform Format Check\n        run: terraform fmt -check -recursive\n\n      - name: TFLint\n        uses: terraform-linters/setup-tflint@v3\n      - run: tflint --init\n      - run: tflint --recursive\n\n      - name: tfsec\n        uses: aquasecurity/tfsec-action@v1.0.0\n\n  unit-test:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n\n      - name: Setup Terraform\n        uses: hashicorp/setup-terraform@v3\n\n      # \u5358\u4f53\u30c6\u30b9\u30c8\n      - name: Terraform Test\n        run: terraform test\n\n  # \u30dd\u30ea\u30b7\u30fc\u30c6\u30b9\u30c8 (\u30aa\u30d7\u30b7\u30e7\u30f3: \u53b3\u683c\u306a\u30b3\u30f3\u30d7\u30e9\u30a4\u30a2\u30f3\u30b9\u8981\u4ef6\u304c\u3042\u308b\u5834\u5408)\n  # policy-test:\n  #   runs-on: ubuntu-latest\n  #   steps:\n  #     - uses: actions/checkout@v3\n  #     - name: Setup Terraform\n  #       uses: hashicorp/setup-terraform@v3\n  #     - name: Terraform Plan\n  #       run: |\n  #         terraform init -backend=false\n  #         terraform plan -out=plan.out\n  #         terraform show -json plan.out &gt; plan.json\n  #     - name: Setup OPA\n  #       uses: open-policy-agent/setup-opa@v2\n  #     - name: Run Policy Tests\n  #       run: opa eval --data policy/ --input plan.json \"data.terraform.deny\"\n</code></pre>"},{"location":"iac/testing/#_7","title":"\u30c6\u30b9\u30c8\u306e\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9","text":""},{"location":"iac/testing/#1","title":"1. \u65e9\u3044\u6bb5\u968e\u3067\u30c6\u30b9\u30c8\u3092\u66f8\u304f","text":"<ul> <li>\u30b3\u30fc\u30c9\u3068\u540c\u6642\u306b\u30c6\u30b9\u30c8\u3092\u4f5c\u6210(TDD\u63a8\u5968)</li> <li>\u30c6\u30b9\u30c8\u304c\u306a\u3044\u30b3\u30fc\u30c9\u306f\u30de\u30fc\u30b8\u3057\u306a\u3044</li> </ul>"},{"location":"iac/testing/#2","title":"2. \u30c6\u30b9\u30c8\u306f\u72ec\u7acb\u3055\u305b\u308b","text":"<ul> <li>\u30c6\u30b9\u30c8\u9593\u3067\u72b6\u614b\u3092\u5171\u6709\u3057\u306a\u3044</li> <li>\u4e26\u5217\u5b9f\u884c\u53ef\u80fd\u306b\u3059\u308b</li> <li>\u30c6\u30b9\u30c8\u306e\u5b9f\u884c\u9806\u5e8f\u306b\u4f9d\u5b58\u3057\u306a\u3044</li> </ul>"},{"location":"iac/testing/#3","title":"3. \u5931\u6557\u6642\u306e\u30c7\u30d0\u30c3\u30b0\u60c5\u5831\u3092\u6b8b\u3059","text":"<ul> <li>\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u8a73\u7d30\u306b</li> <li>\u30c6\u30b9\u30c8\u5931\u6557\u6642\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8/Plan\u51fa\u529b\u3092\u4fdd\u5b58</li> <li>\u3069\u306e\u30a2\u30b5\u30fc\u30b7\u30e7\u30f3\u304c\u5931\u6557\u3057\u305f\u304b\u660e\u78ba\u306b\u3059\u308b</li> </ul>"},{"location":"iac/testing/#4-iac","title":"4. IaC\u306e\u8cac\u52d9\u3092\u660e\u78ba\u306b\u3059\u308b","text":"<ul> <li>IaC\u30c6\u30b9\u30c8: \u30a4\u30f3\u30d5\u30e9\u5b9a\u7fa9\u304c\u6b63\u3057\u3044\u3053\u3068\u3092\u691c\u8a3c</li> <li>\u30a2\u30d7\u30ea\u30c6\u30b9\u30c8: \u30c7\u30d7\u30ed\u30a4\u5f8c\u306e\u52d5\u4f5c\u691c\u8a3c\u306f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5074\u3067\u5b9f\u65bd</li> <li>\u8cac\u4efb\u3092\u5206\u96e2\u3059\u308b\u3053\u3068\u3067\u3001\u30c6\u30b9\u30c8\u304c\u4fdd\u5b88\u3057\u3084\u3059\u304f\u306a\u308b</li> </ul>"},{"location":"iac/testing/#_8","title":"\u307e\u3068\u3081","text":"<p>IaC\u306e\u30c6\u30b9\u30c8\u306f\u3001\u30a4\u30f3\u30d5\u30e9\u5b9a\u7fa9\u306e\u54c1\u8cea\u3068\u5b89\u5168\u6027\u3092\u4fdd\u8a3c\u3059\u308b\u305f\u3081\u306b\u4e0d\u53ef\u6b20\u3067\u3059:</p> <ul> <li>\u9759\u7684\u89e3\u6790(\u5fc5\u9808): \u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u898f\u7d04\u3068\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306e\u57fa\u672c\u30c1\u30a7\u30c3\u30af</li> <li>\u5358\u4f53\u30c6\u30b9\u30c8(\u63a8\u5968): \u30a4\u30f3\u30d5\u30e9\u5b9a\u7fa9\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8/Plan\u306e\u691c\u8a3c</li> <li>\u30dd\u30ea\u30b7\u30fc\u30c6\u30b9\u30c8(\u30aa\u30d7\u30b7\u30e7\u30f3): \u53b3\u683c\u306a\u30b3\u30f3\u30d7\u30e9\u30a4\u30a2\u30f3\u30b9\u8981\u4ef6\u304c\u3042\u308b\u5834\u5408\u306e\u307f</li> </ul> <p>\u91cd\u8981: \u5b9f\u969b\u306eAWS\u52d5\u4f5c\u691c\u8a3c(S3\u3078\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3001Lambda\u5b9f\u884c\u306a\u3069)\u306f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5074\u306eE2E/\u7d71\u5408\u30c6\u30b9\u30c8\u3067\u884c\u3044\u307e\u3059\u3002IaC\u306f\u300c\u74b0\u5883\u3092\u6b63\u3057\u304f\u4f5c\u308b\u3053\u3068\u300d\u306b\u96c6\u4e2d\u3057\u307e\u3057\u3087\u3046\u3002</p> <p>\u307e\u305a\u306f\u9759\u7684\u89e3\u6790\u304b\u3089\u59cb\u3081\u3066\u3001\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u5358\u4f53\u30c6\u30b9\u30c8\u3092\u8ffd\u52a0\u3057\u3066\u3044\u304f\u306e\u304c\u73fe\u5b9f\u7684\u306a\u30a2\u30d7\u30ed\u30fc\u30c1\u3067\u3059\u3002\u9069\u5207\u306a\u30c6\u30b9\u30c8\u6226\u7565\u3092\u7acb\u3066\u3001CI/CD\u306b\u7d44\u307f\u8fbc\u3080\u3053\u3068\u3067\u3001\u5b89\u5fc3\u3057\u3066\u30a4\u30f3\u30d5\u30e9\u306e\u5909\u66f4\u3092\u884c\u3048\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002</p> <p>\u6b21\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u3067\u306f\u3001\u5b9f\u969b\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u306e\u63a8\u5968\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\u306b\u3064\u3044\u3066\u5b66\u3073\u307e\u3059\u3002</p> <p>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210 \u2192</p>"},{"location":"monitoring/","title":"\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u30fb\u30a2\u30e9\u30fc\u30c8","text":"<p>\u30b7\u30b9\u30c6\u30e0\u306e\u5b89\u5b9a\u904b\u7528\u306b\u6b20\u304b\u305b\u306a\u3044\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u3068\u30a2\u30e9\u30fc\u30c8\u306e\u8a2d\u8a08\u306b\u3064\u3044\u3066\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"monitoring/#_2","title":"\u306f\u3058\u3081\u306b","text":"<p>\u30b7\u30b9\u30c6\u30e0\u3092\u5b89\u5b9a\u3057\u3066\u904b\u7528\u3059\u308b\u305f\u3081\u306b\u306f\u3001\u9069\u5207\u306a\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u3068\u30a2\u30e9\u30fc\u30c8\u8a2d\u8a08\u304c\u4e0d\u53ef\u6b20\u3067\u3059\u3002\u3053\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u3067\u306f\u3001\u5b9f\u8df5\u7684\u306a\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u30fb\u30a2\u30e9\u30fc\u30c8\u8a2d\u8a08\u306e\u8003\u3048\u65b9\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"monitoring/#_3","title":"\u5b66\u7fd2\u5185\u5bb9","text":""},{"location":"monitoring/#1","title":"1. \u30a2\u30e9\u30fc\u30c8\u8a2d\u8a08","text":"<p>\u52b9\u679c\u7684\u306a\u30a2\u30e9\u30fc\u30c8\u8a2d\u8a08\u306e\u57fa\u790e\u3092\u5b66\u3073\u307e\u3059\u3002</p> <ul> <li>\u30e6\u30fc\u30b6\u30fc\u8996\u70b9\u306e\u5206\u985e - \u30a2\u30e9\u30fc\u30c8\u3092\u8ab0\u306e\u305f\u3081\u306b\u8a2d\u8a08\u3059\u308b\u304b</li> <li>\u30a2\u30e9\u30fc\u30c8\u30ec\u30d9\u30eb\u306e\u6c7a\u3081\u65b9 - \u91cd\u8981\u5ea6\u306e\u9069\u5207\u306a\u8a2d\u5b9a\u65b9\u6cd5</li> </ul>"},{"location":"monitoring/#2","title":"2. \u591a\u5c64\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0","text":"<p>\u30b7\u30b9\u30c6\u30e0\u3092\u591a\u5c64\u7684\u306b\u76e3\u8996\u3059\u308b\u91cd\u8981\u6027\u3068\u5b9f\u8df5\u65b9\u6cd5\u3092\u5b66\u3073\u307e\u3059\u3002</p> <ul> <li>\u591a\u5c64\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u3068\u306f - \u591a\u5c64\u76e3\u8996\u306e\u5fc5\u8981\u6027</li> <li>\u5b9f\u8df5\u4f8b - \u5177\u4f53\u7684\u306a\u5b9f\u88c5\u4f8b</li> </ul>"},{"location":"monitoring/#3","title":"3. \u30af\u30e9\u30a6\u30c9\u74b0\u5883\u3067\u306e\u8003\u3048\u65b9","text":"<p>\u30af\u30e9\u30a6\u30c9\u74b0\u5883\u7279\u6709\u306e\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u8a2d\u8a08\u3092\u5b66\u3073\u307e\u3059\u3002</p> <ul> <li>\u30af\u30e9\u30a6\u30c9\u7279\u6709\u306e\u8a2d\u8a08 - \u30af\u30e9\u30a6\u30c9\u306a\u3089\u3067\u306f\u306e\u8003\u616e\u70b9</li> <li>\u30ea\u30bd\u30fc\u30b9\u76e3\u8996 - \u30af\u30e9\u30a6\u30c9\u30ea\u30bd\u30fc\u30b9\u306e\u52b9\u679c\u7684\u306a\u76e3\u8996</li> </ul>"},{"location":"monitoring/alert-classification/","title":"\u30e6\u30fc\u30b6\u30fc\u8996\u70b9\u306e\u30a2\u30e9\u30fc\u30c8\u5206\u985e","text":"<p>\u30a2\u30e9\u30fc\u30c8\u306f\u300c\u8ab0\u306e\u305f\u3081\u306b\u8a2d\u8a08\u3059\u308b\u304b\u300d\u3068\u3044\u3046\u8996\u70b9\u3067\u5206\u985e\u3059\u308b\u3053\u3068\u304c\u91cd\u8981\u3067\u3059\u3002</p>"},{"location":"monitoring/alert-classification/#_2","title":"\u306a\u305c\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u8996\u70b9\u304c\u91cd\u8981\u304b","text":"<p>\u30b7\u30b9\u30c6\u30e0\u306f\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u306b\u4fa1\u5024\u3092\u5c4a\u3051\u308b\u305f\u3081\u306b\u5b58\u5728\u3057\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u3001\u30a2\u30e9\u30fc\u30c8\u8a2d\u8a08\u306b\u304a\u3044\u3066\u3082\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u3078\u306e\u5f71\u97ff\u3092\u6700\u512a\u5148\u306b\u8003\u3048\u308b\u3053\u3068\u304c\u672c\u8cea\u7684\u306b\u91cd\u8981\u3067\u3059\u3002</p>"},{"location":"monitoring/alert-classification/#_3","title":"\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u3068\u306f","text":"<p>\u3053\u3053\u3067\u3044\u3046\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u306b\u306f\u3001\u4ee5\u4e0b\u304c\u542b\u307e\u308c\u307e\u3059:</p> <ol> <li>\u4eba\u9593\u306e\u30e6\u30fc\u30b6\u30fc: Web\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3084\u30e2\u30d0\u30a4\u30eb\u30a2\u30d7\u30ea\u306e\u5229\u7528\u8005</li> <li>\u30b7\u30b9\u30c6\u30e0\u9593\u9023\u643a: API\u3092\u547c\u3073\u51fa\u3059\u4ed6\u30b7\u30b9\u30c6\u30e0\u3001\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u9593\u306e\u901a\u4fe1</li> <li>\u30d0\u30c3\u30c1\u51e6\u7406\u306e\u4f9d\u5b58\u5143: \u5b9a\u671f\u5b9f\u884c\u3055\u308c\u308b\u30b8\u30e7\u30d6\u306e\u7d50\u679c\u3092\u5f85\u3064\u4ed6\u30d7\u30ed\u30bb\u30b9</li> </ol>"},{"location":"monitoring/alert-classification/#_4","title":"\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u8996\u70b9\u306e\u5229\u70b9","text":"<ul> <li>\u512a\u5148\u9806\u4f4d\u304c\u660e\u78ba\u306b\u306a\u308b: \u5f71\u97ff\u5ea6\u306b\u5fdc\u3058\u305f\u5bfe\u5fdc\u9806\u5e8f\u3092\u5224\u65ad\u3067\u304d\u308b</li> <li>\u904e\u5270\u306a\u30a2\u30e9\u30fc\u30c8\u3092\u9632\u3050: \u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u306b\u5f71\u97ff\u304c\u306a\u3044\u3082\u306e\u306f\u901a\u77e5\u30ec\u30d9\u30eb\u3092\u4e0b\u3052\u3089\u308c\u308b</li> <li>\u30d3\u30b8\u30cd\u30b9\u4fa1\u5024\u3068\u76f4\u7d50: \u30b7\u30b9\u30c6\u30e0\u306e\u5065\u5168\u6027\u3068\u30d3\u30b8\u30cd\u30b9\u6210\u679c\u3092\u7d50\u3073\u3064\u3051\u3089\u308c\u308b</li> </ul>"},{"location":"monitoring/alert-classification/#_5","title":"\u30a2\u30e9\u30fc\u30c8\u5bfe\u8c61\u306b\u3088\u308b\u5206\u985e","text":""},{"location":"monitoring/alert-classification/#1","title":"1. \u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u5f71\u97ff\u306b\u95a2\u3059\u308b\u30a2\u30e9\u30fc\u30c8","text":"<p>\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u306e\u30b5\u30fc\u30d3\u30b9\u5229\u7528\u306b\u76f4\u63a5\u5f71\u97ff\u3059\u308b\u4e8b\u8c61\u306b\u95a2\u3059\u308b\u30a2\u30e9\u30fc\u30c8\u3067\u3059\u3002</p> <p>\u5bfe\u8c61\u3068\u306a\u308b\u4e8b\u8c61:</p> <ul> <li>\u30b5\u30fc\u30d3\u30b9\u5168\u4f53\u306e\u505c\u6b62</li> <li>\u30ec\u30b9\u30dd\u30f3\u30b9\u30bf\u30a4\u30e0\u306e\u8457\u3057\u3044\u60aa\u5316</li> <li>\u30c7\u30fc\u30bf\u306e\u6b20\u640d\u30fb\u4e0d\u6574\u5408</li> <li>\u91cd\u8981\u6a5f\u80fd\u306e\u969c\u5bb3</li> </ul> <p>\u7279\u5fb4:</p> <ul> <li>\u6700\u512a\u5148\u3067\u5bfe\u5fdc\u304c\u5fc5\u8981</li> <li>\u30d3\u30b8\u30cd\u30b9\u30a4\u30f3\u30d1\u30af\u30c8\u304c\u5927\u304d\u3044</li> <li>SLO/SLA\u9055\u53cd\u306b\u3064\u306a\u304c\u308b\u53ef\u80fd\u6027\u304c\u9ad8\u3044</li> </ul> <p>\u30a2\u30e9\u30fc\u30c8\u4f8b:</p> <ul> <li>API Gateway\u306e500\u30a8\u30e9\u30fc</li> <li>ALB\u306e\u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af\u5931\u6557</li> <li>RDS\u306e\u63a5\u7d9a\u30a8\u30e9\u30fc</li> </ul>"},{"location":"monitoring/alert-classification/#2","title":"2. \u30b7\u30b9\u30c6\u30e0\u5065\u5168\u6027\u306b\u95a2\u3059\u308b\u30a2\u30e9\u30fc\u30c8","text":"<p>\u30b7\u30b9\u30c6\u30e0\u306e\u5065\u5168\u6027\u3084\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306b\u95a2\u3059\u308b\u30a2\u30e9\u30fc\u30c8\u3067\u3001\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u3078\u306e\u5f71\u97ff\u304c\u9855\u5728\u5316\u3059\u308b\u524d\u306b\u691c\u77e5\u3059\u308b\u3082\u306e\u3067\u3059\u3002</p> <p>\u5bfe\u8c61\u3068\u306a\u308b\u4e8b\u8c61:</p> <ul> <li>\u30ea\u30bd\u30fc\u30b9\u4f7f\u7528\u7387\u306e\u4e0a\u6607\uff08\u5f71\u97ff\u304c\u51fa\u308b\u524d\u306e\u6bb5\u968e\uff09</li> <li>\u30d0\u30c3\u30c1\u51e6\u7406\u306e\u5931\u6557</li> <li>\u30ed\u30b0\u306e\u7570\u5e38\u30d1\u30bf\u30fc\u30f3</li> <li>\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30a4\u30d9\u30f3\u30c8</li> <li>\u30b7\u30b9\u30c6\u30e0\u8a2d\u5b9a\u306e\u5909\u66f4</li> </ul> <p>\u7279\u5fb4:</p> <ul> <li>\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u3078\u306e\u5f71\u97ff\u304c\u9855\u5728\u5316\u3059\u308b\u524d\u306b\u691c\u77e5</li> <li>\u4e88\u9632\u7684\u306a\u5bfe\u5fdc\u304c\u53ef\u80fd</li> <li>\u30b7\u30b9\u30c6\u30e0\u6539\u5584\u306e\u305f\u3081\u306e\u60c5\u5831\u6e90</li> </ul> <p>\u30a2\u30e9\u30fc\u30c8\u4f8b:</p> <ul> <li>EC2\u306eCPU\u4f7f\u7528\u7387\u304c\u7d99\u7d9a\u7684\u306b\u9ad8\u3044</li> <li>S3\u30d0\u30b1\u30c3\u30c8\u306e\u5bb9\u91cf\u5897\u52a0\u30c8\u30ec\u30f3\u30c9</li> <li>CloudWatch Logs\u306e\u30a8\u30e9\u30fc\u30d1\u30bf\u30fc\u30f3\u691c\u51fa</li> </ul>"},{"location":"monitoring/alert-classification/#_6","title":"\u5206\u985e\u306b\u3088\u308b\u8a2d\u8a08\u306e\u9055\u3044","text":"\u30a2\u30e9\u30fc\u30c8\u5bfe\u8c61 \u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u5f71\u97ff \u30b7\u30b9\u30c6\u30e0\u5065\u5168\u6027 \u512a\u5148\u5ea6 \u9ad8\uff08Critical\uff09 \u4e2d\uff08Warning\uff09\u301c\u4f4e\uff08Info\uff09 \u901a\u77e5\u624b\u6bb5 PagerDuty\u3001\u96fb\u8a71 Slack\u3001\u30e1\u30fc\u30eb \u901a\u77e5\u5148 \u30aa\u30f3\u30b3\u30fc\u30eb\u30a8\u30f3\u30b8\u30cb\u30a2 \u958b\u767a\u30fb\u904b\u7528\u30c1\u30fc\u30e0 \u53cd\u5fdc\u6642\u9593 \u5373\u6642 \u9031\u6b21/\u6708\u6b21\u30ec\u30d3\u30e5\u30fc\u6642 \u8a73\u7d30\u30ec\u30d9\u30eb \u5f71\u97ff\u7bc4\u56f2 \u6280\u8853\u7684\u8a73\u7d30"},{"location":"monitoring/alert-classification/#_7","title":"\u512a\u5148\u5ea6\u306e\u8003\u3048\u65b9","text":"<ul> <li>\u9ad8\uff08Critical\uff09: \u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u306b\u5f71\u97ff\u304c\u3042\u308b\u3001\u307e\u305f\u306f\u5f71\u97ff\u304c\u51fa\u308b\u76f4\u524d</li> <li>\u4e2d\uff08Warning\uff09: \u30b7\u30b9\u30c6\u30e0\u306e\u5065\u5168\u6027\u306b\u554f\u984c\u304c\u3042\u308a\u3001\u653e\u7f6e\u3059\u308b\u3068Critical\u306b\u306a\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b</li> <li>\u4f4e\uff08Info\uff09: \u60c5\u5831\u5171\u6709\u3084\u50be\u5411\u628a\u63e1\u306e\u305f\u3081\u3001\u5373\u5ea7\u306e\u5bfe\u5fdc\u306f\u4e0d\u8981</li> <li>\u8a18\u9332\u306e\u307f\uff08Log\uff09: \u901a\u77e5\u4e0d\u8981\uff08CloudWatch Logs\u306b\u8a18\u9332\uff09</li> </ul>"},{"location":"monitoring/alert-classification/#_8","title":"\u8a2d\u8a08\u6642\u306e\u30dd\u30a4\u30f3\u30c8","text":""},{"location":"monitoring/alert-classification/#1_1","title":"1. \u53d7\u4fe1\u8005\u3092\u660e\u78ba\u306b\u3059\u308b","text":"<p>\u5404\u30a2\u30e9\u30fc\u30c8\u306b\u3064\u3044\u3066\u300c\u8ab0\u304c\u53d7\u3051\u53d6\u308b\u3079\u304d\u304b\u300d\u3092\u660e\u78ba\u306b\u3057\u307e\u3059\u3002</p> <p>SNS\u30c8\u30d4\u30c3\u30af\u306e\u5206\u985e\u4f8b:</p> <ul> <li>Critical: \u30aa\u30f3\u30b3\u30fc\u30eb\u30a8\u30f3\u30b8\u30cb\u30a2\u5411\u3051</li> <li>Warning: \u904b\u7528\u30c1\u30fc\u30e0\u5411\u3051</li> <li>Info: \u958b\u767a\u30c1\u30fc\u30e0\u5168\u4f53\u5411\u3051</li> </ul>"},{"location":"monitoring/alert-classification/#2_1","title":"2. \u901a\u77e5\u5185\u5bb9\u3092\u6700\u9069\u5316\u3059\u308b","text":"<p>\u53d7\u4fe1\u8005\u306b\u5fdc\u3058\u3066\u5fc5\u8981\u306a\u60c5\u5831\u3092\u542b\u3081\u307e\u3059\u3002</p> <p>\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u5f71\u97ff\u30a2\u30e9\u30fc\u30c8\u306e\u901a\u77e5\u5185\u5bb9:</p> <ul> <li>\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8</li> <li>\u5f71\u97ff\u7bc4\u56f2</li> <li>CloudWatch Logs\u3078\u306e\u30ea\u30f3\u30af</li> <li>\u30e9\u30f3\u30d6\u30c3\u30af\u3078\u306e\u30ea\u30f3\u30af</li> </ul> <p>\u30b7\u30b9\u30c6\u30e0\u5065\u5168\u6027\u30a2\u30e9\u30fc\u30c8\u306e\u901a\u77e5\u5185\u5bb9:</p> <ul> <li>\u30ea\u30bd\u30fc\u30b9\u4f7f\u7528\u72b6\u6cc1</li> <li>\u30c8\u30ec\u30f3\u30c9\u60c5\u5831</li> <li>\u5bfe\u5fdc\u306e\u7dca\u6025\u5ea6</li> <li>\u95a2\u9023\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3078\u306e\u30ea\u30f3\u30af</li> </ul>"},{"location":"monitoring/alert-classification/#3","title":"3. \u30a8\u30b9\u30ab\u30ec\u30fc\u30b7\u30e7\u30f3\u30d1\u30b9\u3092\u8a2d\u8a08\u3059\u308b","text":"<pre><code>graph TD\n    A[CloudWatch Alarm] --&gt; B{\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u5f71\u97ff?}\n    B --&gt;|\u3042\u308a| C[Critical: SNS \u2192 PagerDuty]\n    B --&gt;|\u306a\u3057| D{\u30ea\u30bd\u30fc\u30b9\u903c\u8feb&lt;br/&gt;\u307e\u305f\u306f\u7570\u5e38?}\n    D --&gt;|\u3042\u308a| E[Warning: SNS \u2192 Slack]\n    D --&gt;|\u306a\u3057| F{\u50be\u5411\u76e3\u8996}\n    F --&gt;|\u8a72\u5f53| G[Info: SNS \u2192 Email]\n    F --&gt;|\u8a72\u5f53\u306a\u3057| H[Log: CloudWatch Logs\u306e\u307f]</code></pre>"},{"location":"monitoring/alert-classification/#_9","title":"\u307e\u3068\u3081","text":"<ul> <li>\u30b7\u30b9\u30c6\u30e0\u306f\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u306b\u4fa1\u5024\u3092\u5c4a\u3051\u308b\u305f\u3081\u306b\u5b58\u5728\u3059\u308b</li> <li>\u30a2\u30e9\u30fc\u30c8\u306f\u5bfe\u8c61\uff08\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u5f71\u97ff or \u30b7\u30b9\u30c6\u30e0\u5065\u5168\u6027\uff09\u3067\u5206\u985e\u30fb\u8a2d\u8a08\u3059\u308b</li> <li>\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u5f71\u97ff\u306e\u3042\u308b\u30a2\u30e9\u30fc\u30c8\u306f\u6700\u512a\u5148\uff08Critical\uff09</li> <li>\u30b7\u30b9\u30c6\u30e0\u5065\u5168\u6027\u306e\u30a2\u30e9\u30fc\u30c8\u3067\u4e88\u5146\u6bb5\u968e\u306e\u691c\u77e5\u3082\u91cd\u8981\uff08Warning/Info\uff09</li> <li>\u512a\u5148\u5ea6\u306b\u5fdc\u3058\u3066\u901a\u77e5\u624b\u6bb5\u3068\u53cd\u5fdc\u6642\u9593\u3092\u8a2d\u5b9a\u3059\u308b</li> <li>\u53d7\u4fe1\u8005\u306b\u5fdc\u3058\u3066\u901a\u77e5\u5185\u5bb9\u3092\u6700\u9069\u5316\u3059\u308b</li> </ul>"},{"location":"monitoring/alert-levels/","title":"\u30a2\u30e9\u30fc\u30c8\u30ec\u30d9\u30eb\u306e\u6c7a\u3081\u65b9","text":"<p>\u30a2\u30e9\u30fc\u30c8\u306e\u91cd\u8981\u5ea6\u3092\u9069\u5207\u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001\u52b9\u679c\u7684\u306a\u30a4\u30f3\u30b7\u30c7\u30f3\u30c8\u5bfe\u5fdc\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"monitoring/alert-levels/#_2","title":"\u30a2\u30e9\u30fc\u30c8\u30ec\u30d9\u30eb\u306e\u5b9a\u7fa9","text":""},{"location":"monitoring/alert-levels/#critical","title":"Critical\uff08\u9ad8\uff09","text":"<p>\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u306b\u5f71\u97ff\u304c\u3042\u308b\u3001\u307e\u305f\u306f\u5373\u5ea7\u306b\u5f71\u97ff\u304c\u51fa\u308b\u72b6\u6cc1</p> <ul> <li>\u901a\u77e5\u624b\u6bb5: PagerDuty\u3001\u96fb\u8a71\u3001SMS</li> <li>\u5bfe\u5fdc\u6642\u9593: \u5373\u6642\uff085\u5206\u4ee5\u5185\uff09</li> <li>\u5bfe\u5fdc\u8005: \u30aa\u30f3\u30b3\u30fc\u30eb\u30a8\u30f3\u30b8\u30cb\u30a2</li> <li>\u30a8\u30b9\u30ab\u30ec\u30fc\u30b7\u30e7\u30f3: 15\u5206\u4ee5\u5185\u306b\u5bfe\u5fdc\u958b\u59cb\u3055\u308c\u306a\u3044\u5834\u5408\u3001\u4e0a\u4f4d\u8005\u3078\u81ea\u52d5\u30a8\u30b9\u30ab\u30ec\u30fc\u30b7\u30e7\u30f3</li> </ul> <p>\u4f8b:</p> <ul> <li>API Gateway\u306e\u30a8\u30e9\u30fc\u7387\u304c5%\u3092\u8d85\u3048\u308b</li> <li>ALB\u306e\u5168\u3066\u306e\u30bf\u30fc\u30b2\u30c3\u30c8\u304cUnhealthy</li> <li>RDS\u3078\u306e\u63a5\u7d9a\u304c\u5931\u6557\u3059\u308b</li> </ul>"},{"location":"monitoring/alert-levels/#warning","title":"Warning\uff08\u4e2d\uff09","text":"<p>\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u3078\u306e\u5f71\u97ff\u304c\u9855\u5728\u5316\u3059\u308b\u524d\u306e\u6bb5\u968e\u3001\u50be\u5411\u3084\u4e88\u5146\u306e\u628a\u63e1</p> <ul> <li>\u901a\u77e5\u624b\u6bb5: Slack\u3001\u30e1\u30fc\u30eb</li> <li>\u5bfe\u5fdc\u6642\u9593: \u57fa\u672c\u306f\u9031\u6b21/\u6708\u6b21\u30ec\u30d3\u30e5\u30fc\u6642\u3001\u30b7\u30b9\u30c6\u30e0\u7279\u6027\u306b\u3088\u308a\u7fcc\u55b6\u696d\u65e5\u301c\u6570\u65e5\u4ee5\u5185</li> <li>\u5bfe\u5fdc\u8005: \u904b\u7528\u30c1\u30fc\u30e0\u3001\u958b\u767a\u30c1\u30fc\u30e0</li> <li>\u30a8\u30b9\u30ab\u30ec\u30fc\u30b7\u30e7\u30f3: \u306a\u3057\uff08\u30ec\u30d3\u30e5\u30fc\u6642\u306b\u5bfe\u5fdc\u8a08\u753b\u3092\u7acb\u3066\u308b\uff09</li> </ul> <p>\u4f8b:</p> <ul> <li>EC2\u306eCPU\u4f7f\u7528\u7387\u304c80%\u309215\u5206\u9593\u7d99\u7d9a</li> <li>Lambda\u95a2\u6570\u306e\u30a8\u30e9\u30fc\u7387\u304c1%\u3092\u8d85\u3048\u308b</li> <li>DynamoDB\u306e\u8aad\u307f\u8fbc\u307f\u30ad\u30e3\u30d1\u30b7\u30c6\u30a3\u4f7f\u7528\u7387\u304c80%\u3092\u8d85\u3048\u308b</li> </ul> <p>\u5bfe\u5fdc\u6642\u9593\u306e\u5224\u65ad\u57fa\u6e96:</p> <ul> <li>\u9031\u6b21/\u6708\u6b21\u30ec\u30d3\u30e5\u30fc\u6642\u3067\u5341\u5206\u306a\u30b1\u30fc\u30b9\uff08\u63a8\u5968\uff09:</li> <li>\u5b89\u5b9a\u7a3c\u50cd\u3057\u3066\u3044\u308b\u30b7\u30b9\u30c6\u30e0</li> <li>Auto Scaling\u8a2d\u5b9a\u6e08\u307f</li> <li> <p>\u901a\u5e38\u904b\u7528\u6642</p> </li> <li> <p>\u7fcc\u55b6\u696d\u65e5\u301c\u6570\u65e5\u4ee5\u5185\u306e\u5bfe\u5fdc\u304c\u5fc5\u8981\u306a\u30b1\u30fc\u30b9:</p> </li> <li>\u6025\u6210\u9577\u4e2d\u306e\u30b5\u30fc\u30d3\u30b9</li> <li>\u30a4\u30d9\u30f3\u30c8\u524d\uff08\u30bb\u30fc\u30eb\u3001\u30ad\u30e3\u30f3\u30da\u30fc\u30f3\uff09</li> <li>\u904e\u53bb\u306b\u554f\u984c\u304c\u3042\u3063\u305f\u30b7\u30b9\u30c6\u30e0</li> </ul>"},{"location":"monitoring/alert-levels/#info","title":"Info\uff08\u4f4e\uff09","text":"<p>\u9577\u671f\u7684\u306a\u50be\u5411\u76e3\u8996\u3084\u60c5\u5831\u5171\u6709\u306e\u305f\u3081\u3001\u901a\u77e5\u306f\u4e0d\u8981</p> <ul> <li>\u78ba\u8a8d\u624b\u6bb5: CloudWatch \u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3001Grafana\u7b49\u3067\u5b9a\u671f\u78ba\u8a8d</li> <li>\u78ba\u8a8d\u30bf\u30a4\u30df\u30f3\u30b0: \u671d\u4f1a\u3001\u9031\u6b21/\u6708\u6b21\u30ec\u30d3\u30e5\u30fc\u6642</li> <li>\u5bfe\u5fdc\u8005: \u958b\u767a\u30c1\u30fc\u30e0\u5168\u4f53</li> <li>\u30ef\u30fc\u30af\u30d5\u30ed\u30fc: \u30c1\u30fc\u30e0\u3067\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3092\u898b\u308b\u7fd2\u6163\u3092\u4f5c\u308b</li> </ul> <p>\u4f8b:</p> <ul> <li>S3\u30d0\u30b1\u30c3\u30c8\u306e\u5bb9\u91cf\u63a8\u79fb</li> <li>CloudWatch Logs\u306e\u30ef\u30fc\u30cb\u30f3\u30b0\u767a\u751f\u50be\u5411</li> <li>\u30d0\u30c3\u30c1\u51e6\u7406\u306e\u5b9f\u884c\u6642\u9593\u63a8\u79fb</li> <li>API\u547c\u3073\u51fa\u3057\u56de\u6570\u306e\u30c8\u30ec\u30f3\u30c9</li> </ul> <p>\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u6d3b\u7528\u306e\u30e1\u30ea\u30c3\u30c8:</p> <ul> <li>\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u304c\u8c4a\u5bcc: \u8907\u6570\u306e\u30e1\u30c8\u30ea\u30af\u30b9\u3092\u95a2\u9023\u4ed8\u3051\u3066\u7406\u89e3\u3067\u304d\u308b</li> <li>\u30ce\u30a4\u30ba\u524a\u6e1b: \u901a\u77e5\u306b\u4f9d\u5b58\u3057\u306a\u3044\u306e\u3067\u3001\u30a2\u30e9\u30fc\u30c8\u75b2\u308c\u3092\u9632\u3052\u308b</li> <li>\u30c1\u30fc\u30e0\u5168\u4f53\u306e\u7406\u89e3: \u5b9a\u671f\u7684\u306b\u78ba\u8a8d\u3059\u308b\u3053\u3068\u3067\u30b7\u30b9\u30c6\u30e0\u306e\u72b6\u614b\u3092\u628a\u63e1\u3067\u304d\u308b</li> </ul>"},{"location":"monitoring/alert-levels/#log","title":"Log\uff08\u8a18\u9332\u306e\u307f\uff09","text":"<p>\u8a18\u9332\u306e\u307f\u3001\u901a\u77e5\u3084\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u8868\u793a\u3082\u4e0d\u8981</p> <ul> <li>\u78ba\u8a8d\u624b\u6bb5: CloudWatch Logs Insights\u7b49\u3067\u5fc5\u8981\u6642\u306b\u691c\u7d22</li> <li>\u78ba\u8a8d\u30bf\u30a4\u30df\u30f3\u30b0: \u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0\u6642\u3001\u76e3\u67fb\u6642</li> <li>\u5bfe\u5fdc\u8005: \u306a\u3057</li> </ul> <p>\u4f8b:</p> <ul> <li>\u901a\u5e38\u306e\u51e6\u7406\u5b8c\u4e86\u30ed\u30b0</li> <li>\u30c7\u30d0\u30c3\u30b0\u60c5\u5831</li> <li>\u7d71\u8a08\u60c5\u5831</li> </ul>"},{"location":"monitoring/alert-levels/#_3","title":"\u30ec\u30d9\u30eb\u8a2d\u5b9a\u306e\u5224\u65ad\u57fa\u6e96","text":""},{"location":"monitoring/alert-levels/#1","title":"1. \u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u5f71\u97ff\u306e\u6709\u7121","text":"<p>\u6700\u3082\u91cd\u8981\u306a\u5224\u65ad\u57fa\u6e96\u3067\u3059\u3002</p> <pre><code>graph TD\n    A[\u30e1\u30c8\u30ea\u30af\u30b9] --&gt; B{\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u3078\u306e&lt;br/&gt;\u5f71\u97ff\u306f?}\n    B --&gt;|\u76f4\u63a5\u5f71\u97ff\u3042\u308a| C[Critical: \u5373\u6642\u901a\u77e5]\n    B --&gt;|\u5f71\u97ff\u306e\u53ef\u80fd\u6027\u3042\u308a| D{\u3069\u306e\u304f\u3089\u3044\u306e&lt;br/&gt;\u6642\u9593\u7684\u7336\u4e88?}\n    D --&gt;|\u6570\u5206\u4ee5\u5185| C\n    D --&gt;|\u6570\u6642\u9593\u4ee5\u4e0a\u306e\u7336\u4e88| E[Warning: \u901a\u77e5&lt;br/&gt;\u9031\u6b21\u30ec\u30d3\u30e5\u30fc]\n    B --&gt;|\u5f71\u97ff\u306a\u3057| F{\u78ba\u8a8d\u306e\u5fc5\u8981\u6027}\n    F --&gt;|\u50be\u5411\u628a\u63e1\u304c\u91cd\u8981| G[Info: \u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9&lt;br/&gt;\u5b9a\u671f\u78ba\u8a8d]\n    F --&gt;|\u8a18\u9332\u306e\u307f| H[Log: \u8a18\u9332\u306e\u307f]</code></pre>"},{"location":"monitoring/alert-levels/#2","title":"2. \u5f71\u97ff\u7bc4\u56f2\u306e\u5927\u304d\u3055","text":"<ul> <li>\u5168\u30b5\u30fc\u30d3\u30b9\u505c\u6b62: Critical</li> <li>\u4e00\u90e8\u6a5f\u80fd\u306e\u505c\u6b62: Critical \u307e\u305f\u306f Warning</li> <li>\u7279\u5b9a\u30e6\u30fc\u30b6\u30fc\u306e\u307f: Warning</li> <li>\u5f71\u97ff\u306a\u3057: Info \u307e\u305f\u306f Log</li> </ul>"},{"location":"monitoring/alert-levels/#3","title":"3. \u78ba\u8a8d\u30fb\u5bfe\u5fdc\u306e\u65b9\u6cd5","text":"<ul> <li>\u5373\u5ea7\u306e\u5bfe\u5fdc\u304c\u5fc5\u8981: Critical\uff08\u30d7\u30c3\u30b7\u30e5\u901a\u77e5\uff09</li> <li>\u5b9a\u671f\u7684\u306a\u50be\u5411\u628a\u63e1: Warning\uff08\u30d7\u30c3\u30b7\u30e5\u901a\u77e5\u3001\u9031\u6b21\u30ec\u30d3\u30e5\u30fc\uff09</li> <li>\u9577\u671f\u7684\u306a\u50be\u5411\u76e3\u8996: Info\uff08\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3067\u30d7\u30eb\u578b\u78ba\u8a8d\uff09</li> <li>\u5fc5\u8981\u6642\u306e\u307f\u78ba\u8a8d: Log\uff08\u691c\u7d22\u3067\u78ba\u8a8d\uff09</li> </ul>"},{"location":"monitoring/alert-levels/#_4","title":"\u5b9f\u8df5\u7684\u306a\u8a2d\u5b9a\u4f8b","text":""},{"location":"monitoring/alert-levels/#api-gateway","title":"API Gateway \u30a8\u30e9\u30fc\u7387","text":"<pre><code>\u30a8\u30e9\u30fc\u7387 &gt; 5%\uff085\u5206\u9593\u7d99\u7d9a\uff09: Critical\uff08\u5373\u6642\u901a\u77e5\uff09\n\u30a8\u30e9\u30fc\u7387 &gt; 1%\uff085\u5206\u9593\u7d99\u7d9a\uff09: Warning\uff08\u901a\u77e5\u3001\u9031\u6b21\u30ec\u30d3\u30e5\u30fc\uff09\n\u30a8\u30e9\u30fc\u7387\u306e\u63a8\u79fb: Info\uff08\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u8868\u793a\uff09\n</code></pre>"},{"location":"monitoring/alert-levels/#ec2-cpuauto-scaling","title":"EC2 CPU\u4f7f\u7528\u7387\uff08Auto Scaling\u8a2d\u5b9a\u6e08\u307f\uff09","text":"<pre><code>CPU &gt; 90%\uff085\u5206\u9593\u7d99\u7d9a\uff09\u304b\u3064 Auto Scaling\u5931\u6557: Critical\nCPU &gt; 80%\uff0815\u5206\u9593\u7d99\u7d9a\uff09: Warning\uff08\u901a\u77e5\u3001\u9031\u6b21\u30ec\u30d3\u30e5\u30fc\uff09\nCPU\u4f7f\u7528\u7387\u306e\u63a8\u79fb: Info\uff08\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u8868\u793a\uff09\n</code></pre>"},{"location":"monitoring/alert-levels/#rds","title":"RDS \u63a5\u7d9a\u6570","text":"<pre><code>\u63a5\u7d9a\u6570 &gt; \u6700\u5927\u63a5\u7d9a\u6570\u306e95%: Critical\n\u63a5\u7d9a\u6570 &gt; \u6700\u5927\u63a5\u7d9a\u6570\u306e80%: Warning\uff08\u901a\u77e5\u3001\u9031\u6b21\u30ec\u30d3\u30e5\u30fc\uff09\n\u63a5\u7d9a\u6570\u306e\u63a8\u79fb: Info\uff08\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u8868\u793a\uff09\n</code></pre>"},{"location":"monitoring/alert-levels/#info_1","title":"Info\u30ec\u30d9\u30eb\u306e\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u6d3b\u7528","text":""},{"location":"monitoring/alert-levels/#_5","title":"\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306e\u69cb\u6210\u4f8b","text":"<p>\u30b7\u30b9\u30c6\u30e0\u30d8\u30eb\u30b9\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9:</p> <ul> <li>\u30ea\u30bd\u30fc\u30b9\u4f7f\u7528\u7387\u306e\u63a8\u79fb\uff08CPU\u3001\u30e1\u30e2\u30ea\u3001\u30c7\u30a3\u30b9\u30af\uff09</li> <li>\u30a8\u30e9\u30fc\u7387\u306e\u63a8\u79fb</li> <li>\u30ec\u30b9\u30dd\u30f3\u30b9\u30bf\u30a4\u30e0\u306e\u63a8\u79fb</li> <li>\u30ea\u30af\u30a8\u30b9\u30c8\u6570\u306e\u63a8\u79fb</li> </ul> <p>\u78ba\u8a8d\u306e\u30ef\u30fc\u30af\u30d5\u30ed\u30fc:</p> <ol> <li>\u671d\u4f1a\u3067\u306e\u78ba\u8a8d: \u524d\u65e5\u306e\u4e3b\u8981\u30e1\u30c8\u30ea\u30af\u30b9\u3092\u3056\u3063\u3068\u78ba\u8a8d</li> <li>\u9031\u6b21\u30ec\u30d3\u30e5\u30fc: 1\u9031\u9593\u306e\u50be\u5411\u3092\u5206\u6790\u3001\u6539\u5584\u70b9\u3092\u8b70\u8ad6</li> <li>\u6708\u6b21\u30ec\u30d3\u30e5\u30fc: \u30ad\u30e3\u30d1\u30b7\u30c6\u30a3\u30d7\u30e9\u30f3\u30cb\u30f3\u30b0\u3001\u30b3\u30b9\u30c8\u6700\u9069\u5316\u306e\u691c\u8a0e</li> </ol>"},{"location":"monitoring/alert-levels/#_6","title":"\u3088\u304f\u3042\u308b\u5931\u6557\u30d1\u30bf\u30fc\u30f3","text":""},{"location":"monitoring/alert-levels/#1-critical","title":"1. \u5168\u3066\u3092Critical\u306b\u3059\u308b","text":"<p>\u554f\u984c: \u30a2\u30e9\u30fc\u30c8\u75b2\u308c\uff08Alert Fatigue\uff09\u304c\u767a\u751f\u3057\u3001\u91cd\u8981\u306a\u30a2\u30e9\u30fc\u30c8\u3092\u898b\u9003\u3059</p> <p>\u5bfe\u7b56: \u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u5f71\u97ff\u3092\u57fa\u6e96\u306b\u512a\u5148\u5ea6\u3092\u8a2d\u5b9a\u3059\u308b</p>"},{"location":"monitoring/alert-levels/#2-infosns","title":"2. Info\u30ec\u30d9\u30eb\u3092SNS\u901a\u77e5\u306b\u3059\u308b","text":"<p>\u554f\u984c:</p> <ul> <li>\u5927\u91cf\u306e\u901a\u77e5\u3067Slack\u3084\u30e1\u30fc\u30eb\u304c\u57cb\u307e\u308b</li> <li>\u672c\u5f53\u306b\u91cd\u8981\u306a\u60c5\u5831\u304c\u57cb\u3082\u308c\u308b</li> <li>\u30c1\u30fc\u30e0\u30e1\u30f3\u30d0\u30fc\u304c\u901a\u77e5\u3092\u7121\u8996\u3059\u308b\u3088\u3046\u306b\u306a\u308b</li> </ul> <p>\u5bfe\u7b56: Info\u30ec\u30d9\u30eb\u306f\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3067\u5b9a\u671f\u78ba\u8a8d\u3059\u308b\u904b\u7528\u306b\u3059\u308b</p>"},{"location":"monitoring/alert-levels/#3-warninginfo","title":"3. Warning\u3084Info\u306b\u904e\u5ea6\u306b\u8fc5\u901f\u306a\u5bfe\u5fdc\u3092\u6c42\u3081\u308b","text":"<p>\u554f\u984c:</p> <ul> <li>\u7d99\u7d9a\u7684\u306a\u5272\u308a\u8fbc\u307f\u3067\u958b\u767a\u751f\u7523\u6027\u304c\u4f4e\u4e0b</li> <li>\u672c\u5f53\u306b\u91cd\u8981\u306aCritical\u30a2\u30e9\u30fc\u30c8\u3078\u306e\u611f\u5ea6\u304c\u4e0b\u304c\u308b</li> <li>\u6301\u7d9a\u53ef\u80fd\u306a\u904b\u7528\u304c\u3067\u304d\u306a\u3044</li> </ul> <p>\u5bfe\u7b56:</p> <ul> <li>\u57fa\u672c\u306f\u9031\u6b21/\u6708\u6b21\u30ec\u30d3\u30e5\u30fc\u6642\u306e\u5bfe\u5fdc\u3068\u3059\u308b</li> <li>\u30b7\u30b9\u30c6\u30e0\u7279\u6027\u306b\u5fdc\u3058\u3066\u67d4\u8edf\u306b\u5224\u65ad\u3059\u308b</li> </ul>"},{"location":"monitoring/alert-levels/#4","title":"4. \u95be\u5024\u304c\u4f4e\u3059\u304e\u308b","text":"<p>\u554f\u984c: \u8aa4\u691c\u77e5\u304c\u591a\u767a\u3057\u3001\u4fe1\u983c\u6027\u304c\u4f4e\u4e0b\u3059\u308b</p> <p>\u5bfe\u7b56: \u904e\u53bb\u306e\u30c7\u30fc\u30bf\u3092\u5206\u6790\u3057\u3001\u9069\u5207\u306a\u95be\u5024\u3092\u8a2d\u5b9a\u3059\u308b</p>"},{"location":"monitoring/alert-levels/#5","title":"5. \u8a55\u4fa1\u671f\u9593\u304c\u77ed\u3059\u304e\u308b","text":"<p>\u554f\u984c: \u4e00\u6642\u7684\u306a\u30b9\u30d1\u30a4\u30af\u3067\u4e0d\u8981\u306a\u30a2\u30e9\u30fc\u30c8\u304c\u767a\u751f\u3059\u308b</p> <p>\u5bfe\u7b56: \u9069\u5207\u306a\u8a55\u4fa1\u671f\u9593\u3092\u8a2d\u5b9a\u3059\u308b\uff08\u4f8b: 5\u5206\u9593\u7d99\u7d9a\u30013\u56de\u9023\u7d9a\uff09</p>"},{"location":"monitoring/alert-levels/#_7","title":"\u8a2d\u5b9a\u306e\u898b\u76f4\u3057","text":"<p>\u30a2\u30e9\u30fc\u30c8\u30ec\u30d9\u30eb\u306f\u5b9a\u671f\u7684\u306b\u898b\u76f4\u3057\u304c\u5fc5\u8981\u3067\u3059\u3002</p>"},{"location":"monitoring/alert-levels/#_8","title":"\u898b\u76f4\u3057\u306e\u30bf\u30a4\u30df\u30f3\u30b0","text":"<ul> <li>Critical\u30a2\u30e9\u30fc\u30c8\u304c\u767a\u751f\u3057\u305f\u6642\uff08\u9069\u5207\u3060\u3063\u305f\u304b\u8a55\u4fa1\uff09</li> <li>\u30b7\u30b9\u30c6\u30e0\u69cb\u6210\u5909\u66f4\u6642</li> <li>\u9031\u6b21/\u6708\u6b21\u306e\u30ec\u30d3\u30e5\u30fc\u6642</li> </ul>"},{"location":"monitoring/alert-levels/#_9","title":"\u898b\u76f4\u3057\u306e\u89b3\u70b9","text":"<ul> <li>\u8aa4\u691c\u77e5\u306e\u983b\u5ea6</li> <li>\u898b\u9003\u3057\u306e\u6709\u7121</li> <li>\u5bfe\u5fdc\u6642\u9593\u306e\u59a5\u5f53\u6027</li> <li>\u30a8\u30b9\u30ab\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u9069\u5207\u6027</li> <li>Warning\u3084Info\u304c\u672c\u5f53\u306b\u6709\u7528\u304b</li> <li>\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306f\u5b9a\u671f\u7684\u306b\u78ba\u8a8d\u3055\u308c\u3066\u3044\u308b\u304b</li> </ul>"},{"location":"monitoring/alert-levels/#_10","title":"\u307e\u3068\u3081","text":"<ul> <li>\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u5f71\u97ff\u3092\u6700\u512a\u5148\u306e\u5224\u65ad\u57fa\u6e96\u306b\u3059\u308b</li> <li>Critical: \u5373\u6642\u5bfe\u5fdc\uff08\u30d7\u30c3\u30b7\u30e5\u901a\u77e5\uff09</li> <li>Warning: \u57fa\u672c\u7684\u306b\u9031\u6b21/\u6708\u6b21\u30ec\u30d3\u30e5\u30fc\u6642\u5bfe\u5fdc\uff08\u30d7\u30c3\u30b7\u30e5\u901a\u77e5\uff09</li> <li>Info: \u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3067\u30d7\u30eb\u578b\u78ba\u8a8d\uff08\u901a\u77e5\u306a\u3057\uff09</li> <li>Log: \u8a18\u9332\u306e\u307f\uff08\u5fc5\u8981\u6642\u306b\u691c\u7d22\uff09</li> <li>\u30b7\u30b9\u30c6\u30e0\u7279\u6027\u306b\u5fdc\u3058\u3066\u67d4\u8edf\u306b\u5224\u65ad\u3059\u308b</li> <li>\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3092\u6d3b\u7528\u3057\u305f\u5b9a\u671f\u78ba\u8a8d\u306e\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u3092\u4f5c\u308b</li> <li>\u5b9a\u671f\u7684\u306b\u898b\u76f4\u3057\u3068\u6539\u5584\u3092\u884c\u3046</li> </ul>"},{"location":"monitoring/cloud-specific/","title":"\u30af\u30e9\u30a6\u30c9\u7279\u6709\u306e\u8a2d\u8a08","text":"<p>\u30af\u30e9\u30a6\u30c9\u74b0\u5883\u306b\u304a\u3051\u308b\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u30fb\u30a2\u30e9\u30fc\u30c8\u8a2d\u8a08\u3067\u306f\u3001\u30aa\u30f3\u30d7\u30ec\u30df\u30b9\u3068\u306f\u7570\u306a\u308b\u8003\u3048\u65b9\u304c\u5fc5\u8981\u3067\u3059\u3002</p>"},{"location":"monitoring/cloud-specific/#_2","title":"\u30af\u30e9\u30a6\u30c9\u306e\u7279\u6027\u3068\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0","text":""},{"location":"monitoring/cloud-specific/#1","title":"1. \u52d5\u7684\u306a\u30ea\u30bd\u30fc\u30b9\u5909\u66f4","text":"<p>\u7279\u6027:</p> <p>\u30af\u30e9\u30a6\u30c9\u3067\u306f\u3001Auto Scaling\u306b\u3088\u308a\u81ea\u52d5\u7684\u306b\u30ea\u30bd\u30fc\u30b9\u304c\u5897\u6e1b\u3057\u307e\u3059\u3002</p> <p>\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u3078\u306e\u5f71\u97ff:</p> <ul> <li>\u56fa\u5b9a\u3055\u308c\u305f\u95be\u5024\u3060\u3051\u3067\u306f\u4e0d\u5341\u5206</li> <li>\u30ea\u30bd\u30fc\u30b9\u6570\u306e\u5909\u52d5\u3092\u8003\u616e\u3057\u305f\u76e3\u8996\u304c\u5fc5\u8981</li> <li>\u30b9\u30b1\u30fc\u30eb\u5931\u6557\u306e\u691c\u77e5\u304c\u91cd\u8981</li> </ul> <p>\u30a2\u30e9\u30fc\u30c8\u8a2d\u8a08\u4f8b:</p> <pre><code>\u274c \u60aa\u3044\u4f8b: EC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c2\u53f0\u672a\u6e80 \u2192 Critical\n\uff08Auto Scaling\u3067\u30b9\u30b1\u30fc\u30eb\u30c0\u30a6\u30f3\u3057\u305f\u3060\u3051\u3067\u8aa4\u691c\u77e5\uff09\n\n\u2705 \u826f\u3044\u4f8b:\n- Auto Scaling \u30b0\u30eb\u30fc\u30d7\u306e Desired Capacity \u3068\u5b9f\u969b\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u6570\u304c\u4e00\u81f4\u3057\u306a\u3044 \u2192 Critical\n- Auto Scaling \u30a2\u30af\u30c6\u30a3\u30d3\u30c6\u30a3\u306e\u5931\u6557 \u2192 Critical\n</code></pre>"},{"location":"monitoring/cloud-specific/#2","title":"2. \u30de\u30cd\u30fc\u30b8\u30c9\u30b5\u30fc\u30d3\u30b9\u306e\u6d3b\u7528","text":"<p>\u7279\u6027:</p> <p>RDS\u3001Lambda\u3001DynamoDB\u306a\u3069\u306e\u30de\u30cd\u30fc\u30b8\u30c9\u30b5\u30fc\u30d3\u30b9\u3067\u306f\u3001\u30a4\u30f3\u30d5\u30e9\u306e\u8a73\u7d30\u306f\u96a0\u853d\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p> <p>\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u3078\u306e\u5f71\u97ff:</p> <ul> <li>OS \u30ec\u30d9\u30eb\u306e\u30e1\u30c8\u30ea\u30af\u30b9\u306f\u53d6\u5f97\u3067\u304d\u306a\u3044\uff08\u307e\u305f\u306f\u4e0d\u8981\uff09</li> <li>\u30b5\u30fc\u30d3\u30b9\u56fa\u6709\u306e\u30e1\u30c8\u30ea\u30af\u30b9\u3092\u76e3\u8996\u3059\u308b</li> <li>\u30b5\u30fc\u30d3\u30b9\u30ec\u30d9\u30eb\u3067\u306e\u5065\u5168\u6027\u3092\u91cd\u8996</li> </ul> <p>\u76e3\u8996\u5bfe\u8c61\u306e\u9055\u3044:</p> \u74b0\u5883 \u76e3\u8996\u5bfe\u8c61 \u30aa\u30f3\u30d7\u30ec\u30df\u30b9 OS \u30e1\u30c8\u30ea\u30af\u30b9\uff08CPU\u3001\u30e1\u30e2\u30ea\u3001\u30c7\u30a3\u30b9\u30af\uff09\u3001\u30d7\u30ed\u30bb\u30b9\u76e3\u8996 \u30af\u30e9\u30a6\u30c9\uff08\u30de\u30cd\u30fc\u30b8\u30c9\uff09 \u30b5\u30fc\u30d3\u30b9\u30e1\u30c8\u30ea\u30af\u30b9\uff08\u63a5\u7d9a\u6570\u3001\u30ec\u30a4\u30c6\u30f3\u30b7\u3001\u30a8\u30e9\u30fc\u7387\uff09 <p>\u4f8b: \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u76e3\u8996</p> <pre><code>\u30aa\u30f3\u30d7\u30ec\u30df\u30b9:\n- OS \u30ec\u30d9\u30eb\u306eCPU\u3001\u30e1\u30e2\u30ea\n- \u30c7\u30a3\u30b9\u30afI/O\n- PostgreSQL\u30d7\u30ed\u30bb\u30b9\u306e\u72b6\u614b\n\nRDS:\n- DatabaseConnections\n- CPUUtilization\uff08RDS\u304c\u63d0\u4f9b\u3059\u308b\u30e1\u30c8\u30ea\u30af\u30b9\uff09\n- ReadLatency / WriteLatency\n- FreeableMemory\n</code></pre>"},{"location":"monitoring/cloud-specific/#3","title":"3. \u5f93\u91cf\u8ab2\u91d1\u3068\u30b3\u30b9\u30c8\u6700\u9069\u5316","text":"<p>\u7279\u6027:</p> <p>\u4f7f\u7528\u3057\u305f\u5206\u3060\u3051\u8ab2\u91d1\u3055\u308c\u308b\u305f\u3081\u3001\u30ea\u30bd\u30fc\u30b9\u4f7f\u7528\u91cf\u306f\u30b3\u30b9\u30c8\u306b\u76f4\u7d50\u3057\u307e\u3059\u3002</p> <p>\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u3078\u306e\u5f71\u97ff:</p> <ul> <li>\u30b3\u30b9\u30c8\u306e\u7570\u5e38\u306a\u5897\u52a0\u3082\u76e3\u8996\u5bfe\u8c61</li> <li>\u30ea\u30bd\u30fc\u30b9\u306e\u7121\u99c4\u9063\u3044\u3092\u691c\u77e5</li> <li>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4e88\u7b97\u898f\u6a21\u306b\u5fdc\u3058\u3066\u512a\u5148\u5ea6\u3092\u8abf\u6574</li> </ul> <p>\u30a2\u30e9\u30fc\u30c8\u8a2d\u8a08\u4f8b:</p> <pre><code>\u30b3\u30b9\u30c8\u76e3\u8996\u306e\u91cd\u8981\u6027:\n- \u8cc7\u91d1\u304c\u9650\u3089\u308c\u3066\u3044\u308b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u306f\u3001\u30b3\u30b9\u30c8\u8d85\u904e\u306f\u6df1\u523b\u306a\u554f\u984c\n- \u30e6\u30fc\u30b6\u30fc\u5f71\u97ff\u306f\u306a\u3044\u304c\u3001\u30d3\u30b8\u30cd\u30b9\u3078\u306e\u5f71\u97ff\u306f\u5927\u304d\u3044\n- \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u7279\u6027\u306b\u5fdc\u3058\u3066\u3001Info\u304b\u3089Warning\u307e\u3067\u67d4\u8edf\u306b\u8a2d\u5b9a\n\n\u63a8\u5968\u8a2d\u5b9a:\n- \u6708\u6b21\u30b3\u30b9\u30c8\u304c\u4e88\u7b97\u306e80%\u8d85\u904e \u2192 Warning \u307e\u305f\u306f Info\uff08\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u7279\u6027\u306b\u3088\u308b\uff09\n- \u65e5\u6b21\u30b3\u30b9\u30c8\u304c\u524d\u65e5\u6bd4\u30672\u500d \u2192 Warning\n- \u7279\u5b9a\u30ea\u30bd\u30fc\u30b9\u306e\u7570\u5e38\u306a\u30b3\u30b9\u30c8\u5897\u52a0 \u2192 Warning\n\n\u203b \u30e6\u30fc\u30b6\u30fc\u5f71\u97ff\u306f\u306a\u3044\u305f\u3081\u5373\u6642\u5bfe\u5fdc\u306f\u4e0d\u8981\u3060\u304c\u3001\u5b9a\u671f\u7684\u306a\u78ba\u8a8d\u306f\u5fc5\u9808\n</code></pre>"},{"location":"monitoring/cloud-specific/#4","title":"4. \u30ea\u30fc\u30b8\u30e7\u30f3\u3068\u30a2\u30d9\u30a4\u30e9\u30d3\u30ea\u30c6\u30a3\u30be\u30fc\u30f3","text":"<p>\u7279\u6027:</p> <p>\u8907\u6570\u306eAZ\u306b\u30ea\u30bd\u30fc\u30b9\u3092\u5206\u6563\u3059\u308b\u3053\u3068\u3067\u3001\u9ad8\u53ef\u7528\u6027\u3092\u5b9f\u73fe\u3057\u307e\u3059\u3002</p> <p>\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u3078\u306e\u5f71\u97ff:</p> <ul> <li>AZ\u5358\u4f4d\u3067\u306e\u76e3\u8996\u304c\u5fc5\u8981</li> <li>\u4e00\u3064\u306eAZ\u306e\u969c\u5bb3\u3092\u691c\u77e5</li> <li>\u305f\u3060\u3057\u3001\u4ed6\u306eAZ\u304c\u6b63\u5e38\u306a\u3089\u5168\u4f53\u3068\u3057\u3066\u306f\u30b5\u30fc\u30d3\u30b9\u7d99\u7d9a</li> </ul> <p>\u30a2\u30e9\u30fc\u30c8\u8a2d\u8a08\u4f8b:</p> <pre><code>\u2705 \u63a8\u5968:\n- \u5168AZ\u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304cUnhealthy \u2192 Critical\uff08\u5373\u6642\u5bfe\u5fdc\uff09\n- \u7279\u5b9aAZ\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304cUnhealthy\uff08\u4ed6\u306f\u6b63\u5e38\uff09 \u2192 Warning\uff08\u57fa\u672c\u306f\u9031\u6b21\u30ec\u30d3\u30e5\u30fc\u6642\u78ba\u8a8d\uff09\n\nWarning\u30ec\u30d9\u30eb\u306e\u7406\u7531:\n- \u4ed6\u306eAZ\u304c\u6b63\u5e38\u306a\u305f\u3081\u3001\u30e6\u30fc\u30b6\u30fc\u5f71\u97ff\u306f\u6700\u5c0f\u9650\n- \u30a8\u30f3\u30b8\u30cb\u30a2\u304c\u5373\u5ea7\u306b\u8d77\u3053\u305b\u308b\u30a2\u30af\u30b7\u30e7\u30f3\u304c\u5c11\u306a\u3044\uff08AZ\u969c\u5bb3\u306fAWS\u5074\u3067\u5fa9\u65e7\u3092\u5f85\u3064\uff09\n\n\u305f\u3060\u3057\u3001\u30b7\u30b9\u30c6\u30e0\u7279\u6027\u306b\u3088\u308a\u5373\u5ea7\u306e\u5bfe\u5fdc\u304c\u5fc5\u8981\u306a\u30b1\u30fc\u30b9:\n- 2AZ\u69cb\u6210\u30671AZ\u969c\u5bb3 \u2192 \u6b8b\u308a1AZ\u306b\u5168\u8ca0\u8377\u304c\u96c6\u4e2d\n- \u30d4\u30fc\u30af\u6642\u9593\u5e2f\u306e\u969c\u5bb3 \u2192 \u30ad\u30e3\u30d1\u30b7\u30c6\u30a3\u4e0d\u8db3\u306e\u53ef\u80fd\u6027\n- \u5197\u9577\u6027\u304c\u4f4e\u3044\u8a2d\u8a08 \u2192 \u5373\u5ea7\u306b\u30ad\u30e3\u30d1\u30b7\u30c6\u30a3\u3092\u5897\u3084\u3059\u5fc5\u8981\n\n\u2192 \u30b7\u30b9\u30c6\u30e0\u306e\u8ca0\u8377\u72b6\u6cc1\u3084\u5197\u9577\u6027\u8a2d\u8a08\u3092\u8003\u616e\u3057\u3001\u9069\u5207\u306a\u30a2\u30e9\u30fc\u30c8\u30ec\u30d9\u30eb\u3092\u8a2d\u5b9a\n</code></pre>"},{"location":"monitoring/cloud-specific/#5","title":"5. \u30b5\u30fc\u30d0\u30fc\u30ec\u30b9\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3","text":"<p>\u7279\u6027:</p> <p>Lambda\u306a\u3069\u306e\u30b5\u30fc\u30d0\u30fc\u30ec\u30b9\u3067\u306f\u3001\u30b5\u30fc\u30d0\u30fc\u306e\u7ba1\u7406\u304c\u4e0d\u8981\u3067\u3059\u3002</p> <p>\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u3078\u306e\u5f71\u97ff:</p> <ul> <li>\u30a4\u30f3\u30d5\u30e9\u306e\u76e3\u8996\u306f\u4e0d\u8981</li> <li>\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30e1\u30c8\u30ea\u30af\u30b9\u306b\u96c6\u4e2d</li> <li>\u30b3\u30fc\u30eb\u30c9\u30b9\u30bf\u30fc\u30c8\u3001\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u3001\u30b9\u30ed\u30c3\u30c8\u30ea\u30f3\u30b0\u306a\u3069\u30b5\u30fc\u30d0\u30fc\u30ec\u30b9\u7279\u6709\u306e\u554f\u984c\u3092\u76e3\u8996</li> </ul> <p>\u76e3\u8996\u5bfe\u8c61:</p> <pre><code>Lambda:\n- Errors\uff08\u30a8\u30e9\u30fc\u6570\uff09 \u2192 \u30e6\u30fc\u30b6\u30fc\u5f71\u97ff\u3042\u308a\n- Throttles\uff08\u30b9\u30ed\u30c3\u30c8\u30ea\u30f3\u30b0\uff09 \u2192 \u30e6\u30fc\u30b6\u30fc\u5f71\u97ff\u3042\u308a\n- Duration\uff08\u5b9f\u884c\u6642\u9593\uff09 \u2192 \u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u306e\u4e88\u5146\u691c\u77e5\n- ConcurrentExecutions\uff08\u540c\u6642\u5b9f\u884c\u6570\uff09 \u2192 \u30b9\u30ed\u30c3\u30c8\u30ea\u30f3\u30b0\u306e\u4e88\u5146\u691c\u77e5\n- Iterator Age\uff08Kinesis/DynamoDB Streams\u306e\u5834\u5408\uff09 \u2192 \u51e6\u7406\u9045\u5ef6\u306e\u691c\u77e5\n\n\u5f93\u6765\u306e\u30b5\u30fc\u30d0\u30fc\u76e3\u8996\u306f\u4e0d\u8981:\n- CPU\u4f7f\u7528\u7387\n- \u30c7\u30a3\u30b9\u30afI/O\n</code></pre>"},{"location":"monitoring/cloud-specific/#_3","title":"\u30af\u30e9\u30a6\u30c9\u7279\u6709\u306e\u30a2\u30e9\u30fc\u30c8\u8a2d\u8a08\u30d1\u30bf\u30fc\u30f3","text":""},{"location":"monitoring/cloud-specific/#1-auto-scaling","title":"\u30d1\u30bf\u30fc\u30f31: Auto Scaling\u9023\u52d5","text":"<p>\u76ee\u7684: \u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u304c\u6b63\u5e38\u306b\u6a5f\u80fd\u3057\u3066\u3044\u308b\u304b\u78ba\u8a8d</p> <pre><code>\u76e3\u8996\u9805\u76ee:\n- Auto Scaling \u30a2\u30af\u30c6\u30a3\u30d3\u30c6\u30a3\u306e\u5931\u6557 \u2192 Critical\n- Desired Capacity \u3068\u5b9f\u969b\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u6570\u306e\u4e0d\u4e00\u81f4 \u2192 Critical\n- CPU \u4f7f\u7528\u7387\u304c\u9ad8\u3044\u304c\u30b9\u30b1\u30fc\u30eb\u30a2\u30a6\u30c8\u3057\u3066\u3044\u306a\u3044 \u2192 Warning\n\n\u7406\u7531: Auto Scaling\u304c\u6a5f\u80fd\u3057\u3066\u3044\u308c\u3070\u3001CPU\u9ad8\u9a30\u306f\u4e00\u6642\u7684\u3067\u554f\u984c\u306a\u3044\n</code></pre>"},{"location":"monitoring/cloud-specific/#2_1","title":"\u30d1\u30bf\u30fc\u30f32: \u30de\u30cd\u30fc\u30b8\u30c9\u30b5\u30fc\u30d3\u30b9\u306e\u5236\u9650","text":"<p>\u76ee\u7684: \u30b5\u30fc\u30d3\u30b9\u5236\u9650\uff08Quota\uff09\u306b\u9054\u3059\u308b\u524d\u306b\u691c\u77e5</p> <pre><code>\u76e3\u8996\u9805\u76ee:\n- RDS \u63a5\u7d9a\u6570\u304c\u6700\u5927\u63a5\u7d9a\u6570\u306e95%\u8d85\u904e \u2192 Critical\n- Lambda \u540c\u6642\u5b9f\u884c\u6570\u304c\u5236\u9650\u306e80%\u8d85\u904e \u2192 Warning\n- DynamoDB \u30b9\u30ed\u30c3\u30c8\u30ea\u30f3\u30b0\u767a\u751f \u2192 Critical\uff08\u30e6\u30fc\u30b6\u30fc\u5f71\u97ff\u3042\u308a\uff09\n\n\u7406\u7531: \u5236\u9650\u306b\u9054\u3059\u308b\u3068\u30b5\u30fc\u30d3\u30b9\u304c\u505c\u6b62\u3059\u308b\n</code></pre>"},{"location":"monitoring/cloud-specific/#3-az","title":"\u30d1\u30bf\u30fc\u30f33: \u30de\u30eb\u30c1AZ\u69cb\u6210","text":"<p>\u76ee\u7684: \u9ad8\u53ef\u7528\u6027\u69cb\u6210\u306e\u5065\u5168\u6027\u78ba\u8a8d</p> <pre><code>\u76e3\u8996\u9805\u76ee:\n- ALB: \u5168\u30bf\u30fc\u30b2\u30c3\u30c8Unhealthy \u2192 Critical\n- ALB: \u7279\u5b9aAZ\u306e\u30bf\u30fc\u30b2\u30c3\u30c8\u304cUnhealthy\uff08\u4ed6\u306f\u6b63\u5e38\uff09 \u2192 Warning\n\nWarning\u30ec\u30d9\u30eb\u306e\u57fa\u672c\u7684\u306a\u8003\u3048\u65b9:\n- \u4e00\u90e8AZ\u306e\u969c\u5bb3\u306f\u5168\u4f53\u3078\u306e\u5f71\u97ff\u304c\u9650\u5b9a\u7684\n- \u30a8\u30f3\u30b8\u30cb\u30a2\u304c\u5373\u5ea7\u306b\u8d77\u3053\u305b\u308b\u30a2\u30af\u30b7\u30e7\u30f3\u304c\u5c11\u306a\u3044\uff08AWS\u306e\u5fa9\u65e7\u3092\u5f85\u3064\uff09\n- \u57fa\u672c\u306f\u9031\u6b21\u30ec\u30d3\u30e5\u30fc\u3067\u50be\u5411\u3092\u78ba\u8a8d\n\n\u305f\u3060\u3057\u3001\u30b7\u30b9\u30c6\u30e0\u7279\u6027\u306b\u3088\u308a\u5224\u65ad\u304c\u5fc5\u8981:\n- 2AZ\u69cb\u6210\u306e\u5834\u5408\u306f\u5373\u5ea7\u306e\u5bfe\u5fdc\u304c\u5fc5\u8981\u306a\u53ef\u80fd\u6027\n- \u30d4\u30fc\u30af\u6642\u9593\u5e2f\u306f\u6b8b\u308aAZ\u3060\u3051\u3067\u306f\u51e6\u7406\u3057\u304d\u308c\u306a\u3044\u53ef\u80fd\u6027\n- \u5197\u9577\u6027\u8a2d\u8a08\u3068\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u72b6\u6cc1\u3092\u8003\u616e\u3057\u3066\u3001\u30a2\u30e9\u30fc\u30c8\u30ec\u30d9\u30eb\u3092\u8abf\u6574\n</code></pre>"},{"location":"monitoring/cloud-specific/#4_1","title":"\u30d1\u30bf\u30fc\u30f34: \u30b5\u30fc\u30d0\u30fc\u30ec\u30b9\u7279\u6709","text":"<p>\u76ee\u7684: \u30b5\u30fc\u30d0\u30fc\u30ec\u30b9\u7279\u6709\u306e\u554f\u984c\u3092\u691c\u77e5</p> <pre><code>\u76e3\u8996\u9805\u76ee:\n- Lambda \u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u767a\u751f \u2192 Critical\uff08\u30e6\u30fc\u30b6\u30fc\u5f71\u97ff\u3042\u308a\uff09\n- Lambda \u30a8\u30e9\u30fc\uff08Out of Memory\u542b\u3080\uff09 \u2192 Critical\uff08\u30e6\u30fc\u30b6\u30fc\u5f71\u97ff\u3042\u308a\uff09\n- Lambda \u30b3\u30fc\u30eb\u30c9\u30b9\u30bf\u30fc\u30c8\u6642\u9593\u304c\u9577\u3044 \u2192 Info\uff08\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u78ba\u8a8d\uff09\n- Lambda \u30b9\u30ed\u30c3\u30c8\u30ea\u30f3\u30b0\u767a\u751f \u2192 Critical\n- Step Functions \u5b9f\u884c\u5931\u6557 \u2192 Critical\n\n\u7406\u7531: \u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u3084\u30b9\u30ed\u30c3\u30c8\u30ea\u30f3\u30b0\u306f\u30e6\u30fc\u30b6\u30fc\u5f71\u97ff\u304c\u5927\u304d\u3044\n</code></pre>"},{"location":"monitoring/cloud-specific/#_4","title":"\u30aa\u30f3\u30d7\u30ec\u30df\u30b9\u3068\u306e\u6bd4\u8f03","text":"\u89b3\u70b9 \u30aa\u30f3\u30d7\u30ec\u30df\u30b9 \u30af\u30e9\u30a6\u30c9\uff08AWS\uff09 \u30ea\u30bd\u30fc\u30b9\u5909\u66f4 \u624b\u52d5\u3001\u8a08\u753b\u7684 \u81ea\u52d5\u3001\u52d5\u7684\uff08Auto Scaling\uff09 \u76e3\u8996\u5bfe\u8c61 OS\u3001\u30df\u30c9\u30eb\u30a6\u30a7\u30a2\u3001\u30a2\u30d7\u30ea \u30b5\u30fc\u30d3\u30b9\u30e1\u30c8\u30ea\u30af\u30b9\u3001\u30a2\u30d7\u30ea \u969c\u5bb3\u5bfe\u5fdc \u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u4ea4\u63db\u3001\u518d\u8d77\u52d5 \u30b5\u30fc\u30d3\u30b9\u518d\u8d77\u52d5\u3001\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0 \u9ad8\u53ef\u7528\u6027 \u30af\u30e9\u30b9\u30bf\u30ea\u30f3\u30b0\u3001\u624b\u52d5\u8a2d\u5b9a Multi-AZ\u3001\u81ea\u52d5\u30d5\u30a7\u30a4\u30eb\u30aa\u30fc\u30d0\u30fc \u30b3\u30b9\u30c8 \u56fa\u5b9a\uff08\u8a2d\u5099\u6295\u8cc7\uff09 \u5f93\u91cf\u8ab2\u91d1"},{"location":"monitoring/cloud-specific/#_5","title":"\u30af\u30e9\u30a6\u30c9\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u306e\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9","text":""},{"location":"monitoring/cloud-specific/#1_1","title":"1. \u30b5\u30fc\u30d3\u30b9\u56fa\u6709\u306e\u30e1\u30c8\u30ea\u30af\u30b9\u3092\u7406\u89e3\u3059\u308b","text":"<p>\u5404AWS\u30b5\u30fc\u30d3\u30b9\u304c\u63d0\u4f9b\u3059\u308b\u30e1\u30c8\u30ea\u30af\u30b9\u3092\u7406\u89e3\u3057\u3001\u9069\u5207\u306b\u76e3\u8996\u3057\u307e\u3059\u3002</p> <p>\u4f8b: Lambda - Errors: \u30a8\u30e9\u30fc\u6570 - Throttles: \u30b9\u30ed\u30c3\u30c8\u30ea\u30f3\u30b0\u6570 - Duration: \u5b9f\u884c\u6642\u9593</p>"},{"location":"monitoring/cloud-specific/#2-auto-scaling","title":"2. Auto Scaling\u3092\u4fe1\u983c\u3059\u308b","text":"<p>\u9069\u5207\u306bAuto Scaling\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308c\u3070\u3001CPU 80%\u306f\u6b63\u5e38\u306a\u52d5\u4f5c\u3067\u3059\u3002</p> <pre><code>\u2705 CPU 80% \u2192 Warning\uff08\u9031\u6b21\u30ec\u30d3\u30e5\u30fc\u6642\u78ba\u8a8d\uff09\n\u2705 CPU 90% \u304b\u3064 Auto Scaling\u5931\u6557 \u2192 Critical\n</code></pre>"},{"location":"monitoring/cloud-specific/#3_1","title":"3. \u30de\u30cd\u30fc\u30b8\u30c9\u30b5\u30fc\u30d3\u30b9\u306e\u6069\u6075\u3092\u53d7\u3051\u308b","text":"<p>OS \u30ec\u30d9\u30eb\u306e\u76e3\u8996\u306b\u6642\u9593\u3092\u8cbb\u3084\u3059\u306e\u3067\u306f\u306a\u304f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30ec\u30d9\u30eb\u306e\u76e3\u8996\u306b\u96c6\u4e2d\u3057\u307e\u3059\u3002</p>"},{"location":"monitoring/cloud-specific/#4_2","title":"4. \u30b3\u30b9\u30c8\u76e3\u8996\u306e\u91cd\u8981\u6027","text":"<p>\u30b3\u30b9\u30c8\u8d85\u904e\u306f\u30d3\u30b8\u30cd\u30b9\u3078\u306e\u5f71\u97ff\u304c\u5927\u304d\u3044\u305f\u3081\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u7279\u6027\u306b\u5fdc\u3058\u3066\u9069\u5207\u306b\u76e3\u8996\u3057\u307e\u3059\u3002</p> <pre><code>\u2705 \u8cc7\u91d1\u304c\u9650\u3089\u308c\u3066\u3044\u308b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8: Warning\u307e\u305f\u306fInfo\uff08\u5b9a\u671f\u78ba\u8a8d\uff09\n\u2705 \u9031\u6b21/\u6708\u6b21\u30ec\u30d3\u30e5\u30fc\u3067\u5fc5\u305a\u78ba\u8a8d\n\u2705 \u4e88\u7b97\u8d85\u904e\u306e\u4e88\u5146\u3092\u65e9\u671f\u306b\u691c\u77e5\n</code></pre>"},{"location":"monitoring/cloud-specific/#5_1","title":"5. \u30b7\u30b9\u30c6\u30e0\u7279\u6027\u3092\u8003\u616e\u3057\u305f\u30a2\u30e9\u30fc\u30c8\u8a2d\u8a08","text":"<p>\u30de\u30eb\u30c1AZ\u69cb\u6210\u306e\u4e00\u90e8AZ\u969c\u5bb3\u3067\u3082\u3001\u5197\u9577\u6027\u8a2d\u8a08\u3084\u8ca0\u8377\u72b6\u6cc1\u306b\u3088\u3063\u3066\u306f\u5373\u5ea7\u306e\u5bfe\u5fdc\u304c\u5fc5\u8981\u3067\u3059\u3002</p> <pre><code>\u2705 \u9ad8\u5197\u9577\u6027\uff083AZ\u4ee5\u4e0a\uff09: Warning\uff08\u9031\u6b21\u30ec\u30d3\u30e5\u30fc\u6642\u78ba\u8a8d\uff09\n\u2705 \u4f4e\u5197\u9577\u6027\uff082AZ\uff09: Critical\u307e\u305f\u306fWarning\uff08\u5373\u5ea7\u306e\u5224\u65ad\u304c\u5fc5\u8981\u306a\u53ef\u80fd\u6027\uff09\n\u2705 \u30d4\u30fc\u30af\u6642\u9593\u5e2f: \u5373\u5ea7\u306b\u30ad\u30e3\u30d1\u30b7\u30c6\u30a3\u8abf\u6574\u3092\u691c\u8a0e\n</code></pre>"},{"location":"monitoring/cloud-specific/#_6","title":"\u307e\u3068\u3081","text":"<ul> <li>\u30af\u30e9\u30a6\u30c9\u306f\u52d5\u7684\u306a\u30ea\u30bd\u30fc\u30b9\u5909\u66f4\u304c\u524d\u63d0\u3001\u56fa\u5b9a\u95be\u5024\u3060\u3051\u3067\u306f\u4e0d\u5341\u5206</li> <li>\u30de\u30cd\u30fc\u30b8\u30c9\u30b5\u30fc\u30d3\u30b9\u3067\u306f\u30b5\u30fc\u30d3\u30b9\u56fa\u6709\u306e\u30e1\u30c8\u30ea\u30af\u30b9\u3092\u76e3\u8996</li> <li>Auto Scaling\u304c\u6b63\u5e38\u306a\u3089\u3001\u30ea\u30bd\u30fc\u30b9\u4f7f\u7528\u7387\u306e\u4e0a\u6607\u306f\u554f\u984c\u306a\u3044</li> <li>\u30de\u30eb\u30c1AZ\u69cb\u6210\u306e\u4e00\u90e8AZ\u969c\u5bb3\u306f\u57fa\u672c\u7684\u306bWarning\u3060\u304c\u3001\u30b7\u30b9\u30c6\u30e0\u7279\u6027\u306b\u3088\u308a\u5373\u5ea7\u306e\u5bfe\u5fdc\u304c\u5fc5\u8981\u306a\u5834\u5408\u3082\u3042\u308b</li> <li>\u30b3\u30b9\u30c8\u76e3\u8996\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u7279\u6027\u306b\u5fdc\u3058\u3066\u91cd\u8981\u5ea6\u3092\u8abf\u6574\u3057\u3001\u5b9a\u671f\u7684\u306a\u78ba\u8a8d\u304c\u5fc5\u9808</li> <li>\u30b5\u30fc\u30d0\u30fc\u30ec\u30b9\u3067\u306f\u30a4\u30f3\u30d5\u30e9\u76e3\u8996\u306f\u4e0d\u8981\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30e1\u30c8\u30ea\u30af\u30b9\u306b\u96c6\u4e2d</li> <li>\u30b7\u30b9\u30c6\u30e0\u306e\u5197\u9577\u6027\u8a2d\u8a08\u3068\u8ca0\u8377\u72b6\u6cc1\u3092\u8003\u616e\u3057\u3066\u3001\u9069\u5207\u306a\u30a2\u30e9\u30fc\u30c8\u30ec\u30d9\u30eb\u3092\u8a2d\u5b9a</li> </ul>"},{"location":"monitoring/common-mistakes/","title":"\u3088\u304f\u3042\u308b\u5931\u6557\u4f8b","text":"<p>\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u30fb\u30a2\u30e9\u30fc\u30c8\u8a2d\u8a08\u3067\u3088\u304f\u898b\u3089\u308c\u308b\u5931\u6557\u30d1\u30bf\u30fc\u30f3\u3068\u5bfe\u7b56\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002</p>"},{"location":"monitoring/common-mistakes/#1-critical","title":"1. \u5168\u3066\u3092Critical\u306b\u3059\u308b","text":""},{"location":"monitoring/common-mistakes/#_2","title":"\u554f\u984c","text":"<p>\u5168\u3066\u306e\u30a2\u30e9\u30fc\u30c8\u3092\u6700\u9ad8\u512a\u5148\u5ea6\u306b\u3059\u308b\u3053\u3068\u3067\u3001\u30a2\u30e9\u30fc\u30c8\u75b2\u308c\uff08Alert Fatigue\uff09\u304c\u767a\u751f\u3057\u307e\u3059\u3002</p> <p>\u75c7\u72b6:</p> <ul> <li>\u5927\u91cf\u306e\u30a2\u30e9\u30fc\u30c8\u306b\u57cb\u3082\u308c\u3066\u3001\u672c\u5f53\u306b\u91cd\u8981\u306a\u30a2\u30e9\u30fc\u30c8\u3092\u898b\u9003\u3059</li> <li>\u30c1\u30fc\u30e0\u30e1\u30f3\u30d0\u30fc\u304c\u30a2\u30e9\u30fc\u30c8\u3092\u7121\u8996\u3059\u308b\u3088\u3046\u306b\u306a\u308b</li> <li>\u30aa\u30f3\u30b3\u30fc\u30eb\u5bfe\u5fdc\u306e\u8ca0\u62c5\u304c\u5927\u304d\u3059\u304e\u308b</li> </ul> <p>\u5931\u6557\u4f8b:</p> <pre><code>\u274c S3\u30d0\u30b1\u30c3\u30c8\u5bb9\u91cf\u5897\u52a0 \u2192 Critical\uff08\u5373\u6642\u5bfe\u5fdc\uff09\n\u274c EC2 CPU 70%\u8d85\u904e \u2192 Critical\uff08\u5373\u6642\u5bfe\u5fdc\uff09\n\u274c Lambda\u5b9f\u884c\u6642\u9593\u304c\u5e73\u5747\u3088\u308a\u9577\u3044 \u2192 Critical\uff08\u5373\u6642\u5bfe\u5fdc\uff09\n</code></pre>"},{"location":"monitoring/common-mistakes/#_3","title":"\u5bfe\u7b56","text":"<p>\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u5f71\u97ff\u3092\u57fa\u6e96\u306b\u512a\u5148\u5ea6\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002</p> <pre><code>\u2705 API Gateway 5xx\u30a8\u30e9\u30fc\u7387 &gt; 5% \u2192 Critical\uff08\u5373\u6642\u5bfe\u5fdc\uff09\n\u2705 EC2 CPU 80%\u8d85\u904e \u2192 Warning\uff08\u9031\u6b21\u30ec\u30d3\u30e5\u30fc\u6642\u78ba\u8a8d\uff09\n\u2705 Lambda\u5b9f\u884c\u6642\u9593\u304c\u5e73\u5747\u3088\u308a\u9577\u3044 \u2192 Info\uff08\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u78ba\u8a8d\uff09\n</code></pre> <p>\u5224\u65ad\u57fa\u6e96: - \u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u306b\u5f71\u97ff\u304c\u3042\u308b \u2192 Critical - \u4e88\u5146\u6bb5\u968e \u2192 Warning - \u50be\u5411\u628a\u63e1 \u2192 Info</p>"},{"location":"monitoring/common-mistakes/#2","title":"2. \u5358\u5c64\u306e\u307f\u306e\u76e3\u8996","text":""},{"location":"monitoring/common-mistakes/#_4","title":"\u554f\u984c","text":"<p>\u4e00\u3064\u306e\u30ec\u30a4\u30e4\u30fc\u3060\u3051\u3092\u76e3\u8996\u3059\u308b\u3053\u3068\u3067\u3001\u554f\u984c\u306e\u898b\u9003\u3057\u3084\u539f\u56e0\u7279\u5b9a\u306e\u9045\u308c\u304c\u767a\u751f\u3057\u307e\u3059\u3002</p> <p>\u5931\u6557\u4f8b:</p> <pre><code>\u274c Synthetics\u3060\u3051\u3092\u76e3\u8996\n   \u2192 \u4e00\u90e8\u30bf\u30fc\u30b2\u30c3\u30c8\u304cUnhealthy\u3067\u3082\u691c\u77e5\u3067\u304d\u306a\u3044\n\n\u274c ALB\u306eTargetHealth\u3060\u3051\u3092\u76e3\u8996\n   \u2192 \u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u8996\u70b9\u3067\u306e\u30b5\u30fc\u30d3\u30b9\u54c1\u8cea\u304c\u4e0d\u660e\n\n\u274c \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30ed\u30b0\u3060\u3051\u3092\u76e3\u8996\n   \u2192 \u30a4\u30f3\u30d5\u30e9\u8d77\u56e0\u306e\u554f\u984c\u3092\u898b\u9003\u3059\n</code></pre>"},{"location":"monitoring/common-mistakes/#_5","title":"\u5bfe\u7b56","text":"<p>\u591a\u5c64\u7684\u306b\u76e3\u8996\u3057\u3001\u5404\u30ec\u30a4\u30e4\u30fc\u3067\u7570\u306a\u308b\u8996\u70b9\u3092\u6301\u3061\u307e\u3059\u3002</p> <pre><code>\u2705 \u30e6\u30fc\u30b6\u30fc\u4f53\u9a13: Synthetics\u3001RUM\n\u2705 \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3: API Gateway\u3001Lambda\u3001X-Ray\n\u2705 \u30a4\u30f3\u30d5\u30e9: ALB TargetHealth\u3001RDS\u3001DynamoDB\n</code></pre> <p>\u30dd\u30a4\u30f3\u30c8: - \u5404\u30ec\u30a4\u30e4\u30fc\u306f\u91cd\u8907\u3067\u306f\u306a\u304f\u88dc\u5b8c\u95a2\u4fc2 - \u4e0a\u4f4d\u30ec\u30a4\u30e4\u30fc\u3067\u76e3\u8996\u3057\u3066\u3044\u3066\u3082\u3001\u4e0b\u4f4d\u30ec\u30a4\u30e4\u30fc\u306e\u76e3\u8996\u306f\u5fc5\u8981</p>"},{"location":"monitoring/common-mistakes/#3-auto-scaling","title":"3. Auto Scaling\u74b0\u5883\u3067\u56fa\u5b9a\u95be\u5024\u3092\u4f7f\u7528","text":""},{"location":"monitoring/common-mistakes/#_6","title":"\u554f\u984c","text":"<p>Auto Scaling\u304c\u52d5\u4f5c\u3059\u308b\u74b0\u5883\u3067\u56fa\u5b9a\u7684\u306a\u30ea\u30bd\u30fc\u30b9\u95be\u5024\u3092\u4f7f\u3046\u3068\u3001\u8aa4\u691c\u77e5\u304c\u591a\u767a\u3057\u307e\u3059\u3002</p> <p>\u5931\u6557\u4f8b:</p> <pre><code>\u274c EC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u6570\u304c2\u53f0\u672a\u6e80 \u2192 Critical\n   \uff08Auto Scaling\u3067\u30b9\u30b1\u30fc\u30eb\u30c0\u30a6\u30f3\u3057\u305f\u3060\u3051\uff09\n\n\u274c CPU 50%\u8d85\u904e \u2192 Critical\n   \uff08Auto Scaling\u304c\u6b63\u5e38\u306b\u6a5f\u80fd\u3057\u3066\u3044\u308b\u7bc4\u56f2\u5185\uff09\n</code></pre>"},{"location":"monitoring/common-mistakes/#_7","title":"\u5bfe\u7b56","text":"<p>Auto Scaling\u306e\u52d5\u4f5c\u3092\u8003\u616e\u3057\u305f\u76e3\u8996\u3092\u3057\u307e\u3059\u3002</p> <pre><code>\u2705 Desired Capacity != \u5b9f\u969b\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u6570 \u2192 Critical\n\u2705 Auto Scaling \u30a2\u30af\u30c6\u30a3\u30d3\u30c6\u30a3\u306e\u5931\u6557 \u2192 Critical\n\u2705 CPU 80%\u8d85\u904e\u304b\u3064Auto Scaling\u5931\u6557 \u2192 Critical\n\u2705 CPU 80%\u8d85\u904e\uff08Auto Scaling\u6b63\u5e38\uff09 \u2192 Warning\uff08\u9031\u6b21\u30ec\u30d3\u30e5\u30fc\uff09\n</code></pre> <p>\u30dd\u30a4\u30f3\u30c8: - Auto Scaling\u304c\u6b63\u5e38\u306a\u3089\u3001\u30ea\u30bd\u30fc\u30b9\u4f7f\u7528\u7387\u306e\u4e0a\u6607\u306f\u554f\u984c\u306a\u3044 - Auto Scaling\u81ea\u4f53\u306e\u52d5\u4f5c\u3092\u76e3\u8996\u3059\u308b</p>"},{"location":"monitoring/common-mistakes/#4-warninginfo","title":"4. Warning\u3084Info\u306b\u904e\u5ea6\u306b\u8fc5\u901f\u306a\u5bfe\u5fdc\u3092\u6c42\u3081\u308b","text":""},{"location":"monitoring/common-mistakes/#_8","title":"\u554f\u984c","text":"<p>\u30e6\u30fc\u30b6\u30fc\u5f71\u97ff\u306e\u306a\u3044\u30a2\u30e9\u30fc\u30c8\u306b\u5373\u5ea7\u306e\u5bfe\u5fdc\u3092\u6c42\u3081\u308b\u3053\u3068\u3067\u3001\u958b\u767a\u751f\u7523\u6027\u304c\u4f4e\u4e0b\u3057\u307e\u3059\u3002</p> <p>\u5931\u6557\u4f8b:</p> <pre><code>\u274c EC2 CPU 80%\u8d85\u904e \u2192 \u6570\u5206\u4ee5\u5185\u306b\u5bfe\u5fdc\n\u274c S3\u30d0\u30b1\u30c3\u30c8\u5bb9\u91cf\u5897\u52a0 \u2192 \u5373\u65e5\u5bfe\u5fdc\n\u274c Lambda\u5b9f\u884c\u6642\u9593\u5897\u52a0 \u2192 \u6570\u6642\u9593\u4ee5\u5185\u306b\u5bfe\u5fdc\n</code></pre> <p>\u75c7\u72b6:</p> <ul> <li>\u7d99\u7d9a\u7684\u306a\u5272\u308a\u8fbc\u307f\u3067\u96c6\u4e2d\u3067\u304d\u306a\u3044</li> <li>\u672c\u5f53\u306b\u91cd\u8981\u306aCritical\u30a2\u30e9\u30fc\u30c8\u3078\u306e\u611f\u5ea6\u304c\u4e0b\u304c\u308b</li> <li>\u6301\u7d9a\u53ef\u80fd\u306a\u904b\u7528\u304c\u3067\u304d\u306a\u3044</li> </ul>"},{"location":"monitoring/common-mistakes/#_9","title":"\u5bfe\u7b56","text":"<p>\u30e6\u30fc\u30b6\u30fc\u5f71\u97ff\u304c\u306a\u3044\u30a2\u30e9\u30fc\u30c8\u306f\u3001\u57fa\u672c\u7684\u306b\u9031\u6b21/\u6708\u6b21\u30ec\u30d3\u30e5\u30fc\u6642\u306e\u5bfe\u5fdc\u3068\u3057\u307e\u3059\u3002</p> <pre><code>\u2705 EC2 CPU 80%\u8d85\u904e \u2192 \u9031\u6b21\u30ec\u30d3\u30e5\u30fc\u6642\u306b\u50be\u5411\u3092\u78ba\u8a8d\n\u2705 S3\u30d0\u30b1\u30c3\u30c8\u5bb9\u91cf\u5897\u52a0 \u2192 \u6708\u6b21\u30ec\u30d3\u30e5\u30fc\u6642\u306b\u30b3\u30b9\u30c8\u6700\u9069\u5316\u3092\u691c\u8a0e\n\u2705 Lambda\u5b9f\u884c\u6642\u9593\u5897\u52a0 \u2192 \u9031\u6b21\u30ec\u30d3\u30e5\u30fc\u6642\u306b\u30b3\u30fc\u30c9\u6539\u5584\u3092\u691c\u8a0e\n</code></pre> <p>\u4f8b\u5916: - \u6025\u6210\u9577\u4e2d\u306e\u30b5\u30fc\u30d3\u30b9 - \u30a4\u30d9\u30f3\u30c8\u524d\uff08\u30bb\u30fc\u30eb\u3001\u30ad\u30e3\u30f3\u30da\u30fc\u30f3\uff09 - \u904e\u53bb\u306b\u554f\u984c\u304c\u3042\u3063\u305f\u30b7\u30b9\u30c6\u30e0</p>"},{"location":"monitoring/common-mistakes/#5","title":"5. \u95be\u5024\u304c\u4f4e\u3059\u304e\u308b","text":""},{"location":"monitoring/common-mistakes/#_10","title":"\u554f\u984c","text":"<p>\u95be\u5024\u304c\u4f4e\u3059\u304e\u308b\u3068\u8aa4\u691c\u77e5\u304c\u591a\u767a\u3057\u3001\u30a2\u30e9\u30fc\u30c8\u306e\u4fe1\u983c\u6027\u304c\u4f4e\u4e0b\u3057\u307e\u3059\u3002</p> <p>\u5931\u6557\u4f8b:</p> <pre><code>\u274c CPU &gt; 50%\u3067\u5373\u5ea7\u306b\u30a2\u30e9\u30fc\u30c8\n\u274c \u30ec\u30b9\u30dd\u30f3\u30b9\u30bf\u30a4\u30e0\u304c\u5e73\u5747\u3088\u308a1ms\u9045\u3044\u3060\u3051\u3067\u30a2\u30e9\u30fc\u30c8\n\u274c \u30a8\u30e9\u30fc\u7387 &gt; 0.01%\u3067\u30a2\u30e9\u30fc\u30c8\n</code></pre> <p>\u75c7\u72b6:</p> <ul> <li>\u6b63\u5e38\u306a\u52d5\u4f5c\u7bc4\u56f2\u5185\u3067\u30a2\u30e9\u30fc\u30c8\u304c\u767a\u706b</li> <li>\u30a2\u30e9\u30fc\u30c8\u304c\u591a\u3059\u304e\u3066\u91cd\u8981\u306a\u3082\u306e\u3092\u898b\u9003\u3059</li> </ul>"},{"location":"monitoring/common-mistakes/#_11","title":"\u5bfe\u7b56","text":"<p>\u904e\u53bb\u306e\u30c7\u30fc\u30bf\u3092\u5206\u6790\u3057\u3001\u9069\u5207\u306a\u95be\u5024\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002</p> <pre><code>\u2705 \u904e\u53bb30\u65e5\u9593\u306e\u30c7\u30fc\u30bf\u3092\u5206\u6790\n\u2705 \u901a\u5e38\u6642\u306e\u6700\u5927\u5024 + \u30de\u30fc\u30b8\u30f3\u3067\u95be\u5024\u3092\u8a2d\u5b9a\n\u2705 \u5b9a\u671f\u7684\u306b\u95be\u5024\u3092\u898b\u76f4\u3059\n\u2705 \u30b7\u30b9\u30c6\u30e0\u7279\u6027\u306b\u5fdc\u3058\u3066\u8abf\u6574\n</code></pre>"},{"location":"monitoring/common-mistakes/#6","title":"6. \u8a55\u4fa1\u671f\u9593\u304c\u77ed\u3059\u304e\u308b","text":""},{"location":"monitoring/common-mistakes/#_12","title":"\u554f\u984c","text":"<p>\u8a55\u4fa1\u671f\u9593\u304c\u77ed\u3044\u3068\u3001\u4e00\u6642\u7684\u306a\u30b9\u30d1\u30a4\u30af\u3067\u4e0d\u8981\u306a\u30a2\u30e9\u30fc\u30c8\u304c\u767a\u751f\u3057\u307e\u3059\u3002</p> <p>\u5931\u6557\u4f8b:</p> <pre><code>\u274c CPU &gt; 90%\u30921\u56de\u89b3\u6e2c\u3057\u305f\u3060\u3051\u3067\u30a2\u30e9\u30fc\u30c8\n\u274c \u30a8\u30e9\u30fc\u304c1\u4ef6\u767a\u751f\u3057\u305f\u3060\u3051\u3067\u30a2\u30e9\u30fc\u30c8\n</code></pre>"},{"location":"monitoring/common-mistakes/#_13","title":"\u5bfe\u7b56","text":"<p>\u9069\u5207\u306a\u8a55\u4fa1\u671f\u9593\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002</p> <pre><code>\u2705 CPU &gt; 90%\u304c5\u5206\u9593\u7d99\u7d9a \u2192 \u30a2\u30e9\u30fc\u30c8\n\u2705 \u30a8\u30e9\u30fc\u7387 &gt; 5%\u304c5\u5206\u9593\u7d99\u7d9a \u2192 \u30a2\u30e9\u30fc\u30c8\n\u2705 3\u56de\u9023\u7d9a\u3067\u95be\u5024\u8d85\u904e \u2192 \u30a2\u30e9\u30fc\u30c8\n</code></pre>"},{"location":"monitoring/common-mistakes/#7-infosns","title":"7. Info\u30ec\u30d9\u30eb\u3092SNS\u901a\u77e5\u306b\u3059\u308b","text":""},{"location":"monitoring/common-mistakes/#_14","title":"\u554f\u984c","text":"<p>\u50be\u5411\u628a\u63e1\u306e\u305f\u3081\u306eInfo\u30ec\u30d9\u30eb\u3092SNS\u901a\u77e5\u306b\u3059\u308b\u3068\u3001\u5927\u91cf\u306e\u901a\u77e5\u3067Slack\u3084\u30e1\u30fc\u30eb\u304c\u57cb\u307e\u308a\u307e\u3059\u3002</p> <p>\u5931\u6557\u4f8b:</p> <pre><code>\u274c S3\u30d0\u30b1\u30c3\u30c8\u5bb9\u91cf\u304c1GB\u5897\u52a0 \u2192 Slack\u901a\u77e5\n\u274c Lambda\u5b9f\u884c\u6642\u9593\u304c\u5e73\u5747\u3088\u308a0.1\u79d2\u9577\u3044 \u2192 \u30e1\u30fc\u30eb\u901a\u77e5\n\u274c \u5168\u3066\u306e\u30e1\u30c8\u30ea\u30af\u30b9\u3092Slack\u306b\u901a\u77e5\n</code></pre> <p>\u75c7\u72b6:</p> <ul> <li>Slack\u3084\u30e1\u30fc\u30eb\u304c\u901a\u77e5\u3067\u57cb\u307e\u308b</li> <li>\u672c\u5f53\u306b\u91cd\u8981\u306a\u60c5\u5831\u304c\u57cb\u3082\u308c\u308b</li> <li>\u30c1\u30fc\u30e0\u30e1\u30f3\u30d0\u30fc\u304c\u901a\u77e5\u3092\u7121\u8996\u3059\u308b\u3088\u3046\u306b\u306a\u308b</li> </ul>"},{"location":"monitoring/common-mistakes/#_15","title":"\u5bfe\u7b56","text":"<p>Info\u30ec\u30d9\u30eb\u306f\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3067\u5b9a\u671f\u78ba\u8a8d\u3059\u308b\u904b\u7528\u306b\u3057\u307e\u3059\u3002</p> <pre><code>\u2705 Info\u30ec\u30d9\u30eb \u2192 \u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u8868\u793a\uff08\u901a\u77e5\u306a\u3057\uff09\n\u2705 \u671d\u4f1a\u3084\u9031\u6b21\u30ec\u30d3\u30e5\u30fc\u3067\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3092\u78ba\u8a8d\n\u2705 \u9577\u671f\u7684\u306a\u50be\u5411\u3092\u628a\u63e1\u3059\u308b\n</code></pre>"},{"location":"monitoring/common-mistakes/#8","title":"8. \u30b7\u30b9\u30c6\u30e0\u7279\u6027\u3092\u7121\u8996\u3057\u305f\u4e00\u5f8b\u306e\u95be\u5024","text":""},{"location":"monitoring/common-mistakes/#_16","title":"\u554f\u984c","text":"<p>\u7570\u306a\u308b\u7279\u6027\u306e\u30b7\u30b9\u30c6\u30e0\u306b\u540c\u3058\u95be\u5024\u3092\u9069\u7528\u3059\u308b\u3068\u3001\u8aa4\u691c\u77e5\u3084\u898b\u9003\u3057\u304c\u767a\u751f\u3057\u307e\u3059\u3002</p> <p>\u5931\u6557\u4f8b:</p> <pre><code>\u274c \u5168\u3066\u306e\u30b7\u30b9\u30c6\u30e0\u3067CPU 80%\u3092\u95be\u5024\u306b\u3059\u308b\n\u274c \u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u30d1\u30bf\u30fc\u30f3\u3092\u7121\u8996\u3057\u305f\u56fa\u5b9a\u95be\u5024\n\u274c \u30d0\u30c3\u30c1\u51e6\u7406\u5b9f\u884c\u4e2d\u3082\u540c\u3058\u95be\u5024\u3092\u9069\u7528\n</code></pre>"},{"location":"monitoring/common-mistakes/#_17","title":"\u5bfe\u7b56","text":"<p>\u30b7\u30b9\u30c6\u30e0\u3054\u3068\u306b\u7279\u6027\u3092\u7406\u89e3\u3057\u3001\u9069\u5207\u306a\u95be\u5024\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002</p> <pre><code>\u2705 \u30d4\u30fc\u30af\u6642\u3068\u30aa\u30d5\u30d4\u30fc\u30af\u6642\u3067\u7570\u306a\u308b\u95be\u5024\n\u2705 \u30d0\u30c3\u30c1\u51e6\u7406\u5b9f\u884c\u4e2d\u306f\u95be\u5024\u3092\u8abf\u6574\n\u2705 \u30b7\u30b9\u30c6\u30e0\u3054\u3068\u306b\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u30d1\u30bf\u30fc\u30f3\u3092\u5206\u6790\n\u2705 \u95be\u5024\u306f\u5b9a\u671f\u7684\u306b\u898b\u76f4\u3057\n</code></pre>"},{"location":"monitoring/common-mistakes/#9","title":"9. \u30a8\u30b9\u30ab\u30ec\u30fc\u30b7\u30e7\u30f3\u30d1\u30b9\u304c\u306a\u3044","text":""},{"location":"monitoring/common-mistakes/#_18","title":"\u554f\u984c","text":"<p>\u30a2\u30e9\u30fc\u30c8\u304c\u767a\u706b\u3057\u3066\u3082\u8ab0\u304c\u5bfe\u5fdc\u3059\u3079\u304d\u304b\u4e0d\u660e\u3067\u3001\u5bfe\u5fdc\u304c\u9045\u308c\u307e\u3059\u3002</p> <p>\u5931\u6557\u4f8b:</p> <pre><code>\u274c \u5168\u3066\u306e\u30a2\u30e9\u30fc\u30c8\u304c\u540c\u3058\u30c1\u30e3\u30f3\u30cd\u30eb\u306b\u901a\u77e5\n\u274c \u8ab0\u304c\u5bfe\u5fdc\u3059\u3079\u304d\u304b\u4e0d\u660e\n\u274c \u30a8\u30b9\u30ab\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u4ed5\u7d44\u307f\u304c\u306a\u3044\n</code></pre>"},{"location":"monitoring/common-mistakes/#_19","title":"\u5bfe\u7b56","text":"<p>\u660e\u78ba\u306a\u30a8\u30b9\u30ab\u30ec\u30fc\u30b7\u30e7\u30f3\u30d1\u30b9\u3092\u8a2d\u8a08\u3057\u307e\u3059\u3002</p> <pre><code>\u2705 Critical \u2192 \u30aa\u30f3\u30b3\u30fc\u30eb\u30a8\u30f3\u30b8\u30cb\u30a2\uff08PagerDuty\uff09\n\u2705 15\u5206\u4ee5\u5185\u306b\u5bfe\u5fdc\u958b\u59cb\u3055\u308c\u306a\u3044\u5834\u5408\u3001\u4e0a\u4f4d\u8005\u3078\u30a8\u30b9\u30ab\u30ec\u30fc\u30b7\u30e7\u30f3\n\u2705 Warning \u2192 \u904b\u7528\u30c1\u30fc\u30e0\uff08Slack\uff09\n\u2705 Info \u2192 \u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u78ba\u8a8d\n</code></pre>"},{"location":"monitoring/common-mistakes/#10","title":"10. \u30ec\u30d3\u30e5\u30fc\u3068\u6539\u5584\u306e\u30b5\u30a4\u30af\u30eb\u304c\u306a\u3044","text":""},{"location":"monitoring/common-mistakes/#_20","title":"\u554f\u984c","text":"<p>\u4e00\u5ea6\u8a2d\u5b9a\u3057\u305f\u30a2\u30e9\u30fc\u30c8\u3092\u898b\u76f4\u3055\u306a\u3044\u3053\u3068\u3067\u3001\u74b0\u5883\u5909\u5316\u306b\u5bfe\u5fdc\u3067\u304d\u307e\u305b\u3093\u3002</p> <p>\u5931\u6557\u4f8b:</p> <pre><code>\u274c \u30a2\u30e9\u30fc\u30c8\u8a2d\u5b9a\u3092\u4e00\u5ea6\u6c7a\u3081\u305f\u3089\u653e\u7f6e\n\u274c \u8aa4\u691c\u77e5\u304c\u591a\u767a\u3057\u3066\u3082\u898b\u76f4\u3055\u306a\u3044\n\u274c \u30b7\u30b9\u30c6\u30e0\u69cb\u6210\u5909\u66f4\u6642\u306b\u30a2\u30e9\u30fc\u30c8\u3092\u66f4\u65b0\u3057\u306a\u3044\n</code></pre>"},{"location":"monitoring/common-mistakes/#_21","title":"\u5bfe\u7b56","text":"<p>\u5b9a\u671f\u7684\u306b\u30ec\u30d3\u30e5\u30fc\u3057\u3001\u7d99\u7d9a\u7684\u306b\u6539\u5584\u3057\u307e\u3059\u3002</p> <pre><code>\u2705 Critical\u30a2\u30e9\u30fc\u30c8\u767a\u751f\u6642\u306b\u9069\u5207\u3060\u3063\u305f\u304b\u8a55\u4fa1\n\u2705 \u9031\u6b21/\u6708\u6b21\u30ec\u30d3\u30e5\u30fc\u3067Warning\u30a2\u30e9\u30fc\u30c8\u3092\u78ba\u8a8d\n\u2705 \u8aa4\u691c\u77e5\u306e\u983b\u5ea6\u3092\u78ba\u8a8d\u3057\u3001\u95be\u5024\u3092\u8abf\u6574\n\u2705 \u30b7\u30b9\u30c6\u30e0\u69cb\u6210\u5909\u66f4\u6642\u306b\u30a2\u30e9\u30fc\u30c8\u3092\u898b\u76f4\u3057\n</code></pre>"},{"location":"monitoring/common-mistakes/#_22","title":"\u307e\u3068\u3081","text":"<p>\u3088\u304f\u3042\u308b\u5931\u6557\u306e\u591a\u304f\u306f\u3001\u4ee5\u4e0b\u306e\u539f\u5247\u3092\u5b88\u308b\u3053\u3068\u3067\u9632\u3052\u307e\u3059:</p> <ol> <li>\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u5f71\u97ff\u3092\u57fa\u6e96\u306b\u3059\u308b</li> <li>\u591a\u5c64\u7684\u306b\u76e3\u8996\u3059\u308b</li> <li>Auto Scaling\u306e\u52d5\u4f5c\u3092\u7406\u89e3\u3059\u308b</li> <li>\u9069\u5207\u306a\u5bfe\u5fdc\u6642\u9593\u3092\u8a2d\u5b9a\u3059\u308b\uff08Critical\u306f\u5373\u6642\u3001Warning\u3084Info\u306f\u9031\u6b21/\u6708\u6b21\uff09</li> <li>\u904e\u53bb\u306e\u30c7\u30fc\u30bf\u3092\u5206\u6790\u3057\u3066\u95be\u5024\u3092\u8a2d\u5b9a\u3059\u308b</li> <li>\u30b7\u30b9\u30c6\u30e0\u7279\u6027\u306b\u5fdc\u3058\u3066\u67d4\u8edf\u306b\u8abf\u6574\u3059\u308b</li> <li>\u5b9a\u671f\u7684\u306b\u30ec\u30d3\u30e5\u30fc\u3057\u3001\u6539\u5584\u3092\u7d9a\u3051\u308b</li> </ol> <p>\u3053\u308c\u3089\u306e\u539f\u5247\u3092\u5b88\u308b\u3053\u3068\u3067\u3001\u6301\u7d9a\u53ef\u80fd\u3067\u52b9\u679c\u7684\u306a\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u30fb\u30a2\u30e9\u30fc\u30c8\u904b\u7528\u304c\u5b9f\u73fe\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"monitoring/multi-layer-examples/","title":"\u591a\u5c64\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u306e\u5b9f\u8df5\u4f8b","text":"<p>\u5177\u4f53\u7684\u306a\u30b7\u30b9\u30c6\u30e0\u69cb\u6210\u306b\u304a\u3051\u308b\u591a\u5c64\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u306e\u5b9f\u88c5\u4f8b\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002</p>"},{"location":"monitoring/multi-layer-examples/#1-webecs-rds","title":"\u4f8b1: Web\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\uff08ECS + RDS\u69cb\u6210\uff09","text":""},{"location":"monitoring/multi-layer-examples/#_2","title":"\u30b7\u30b9\u30c6\u30e0\u69cb\u6210","text":"<pre><code>Internet \u2192 ALB \u2192 ECS (Fargate) \u2192 RDS (PostgreSQL)\n</code></pre>"},{"location":"monitoring/multi-layer-examples/#_3","title":"\u5404\u30ec\u30a4\u30e4\u30fc\u306e\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u8a2d\u5b9a","text":""},{"location":"monitoring/multi-layer-examples/#1","title":"1. \u30e6\u30fc\u30b6\u30fc\u4f53\u9a13\u30ec\u30a4\u30e4\u30fc","text":"<p>CloudWatch Synthetics\uff08Canary\uff09</p> <ul> <li>\u76e3\u8996\u5185\u5bb9: \u30c8\u30c3\u30d7\u30da\u30fc\u30b8\u3001\u30ed\u30b0\u30a4\u30f3\u3001\u4e3b\u8981\u6a5f\u80fd\u3078\u306e\u30a2\u30af\u30bb\u30b9</li> <li>\u983b\u5ea6: 5\u5206\u9593\u9694</li> <li>\u30a2\u30e9\u30fc\u30c8: Canary\u5931\u6557 \u2192 Critical</li> </ul> <pre><code>\u76ee\u7684: \u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u8996\u70b9\u3067\u30b5\u30fc\u30d3\u30b9\u5168\u4f53\u304c\u6b63\u5e38\u306b\u52d5\u4f5c\u3057\u3066\u3044\u308b\u304b\n</code></pre> <p>CloudWatch RUM</p> <ul> <li>\u76e3\u8996\u5185\u5bb9: \u5b9f\u30e6\u30fc\u30b6\u30fc\u306e\u30da\u30fc\u30b8\u30ed\u30fc\u30c9\u30bf\u30a4\u30e0\u3001JS\u30a8\u30e9\u30fc</li> <li>\u30a2\u30e9\u30fc\u30c8: \u30a8\u30e9\u30fc\u7387 &gt; 5% \u2192 Critical</li> </ul> <pre><code>\u76ee\u7684: \u5b9f\u969b\u306e\u30e6\u30fc\u30b6\u30fc\u304c\u4f53\u9a13\u3057\u3066\u3044\u308b\u54c1\u8cea\u3092\u628a\u63e1\n</code></pre>"},{"location":"monitoring/multi-layer-examples/#2","title":"2. \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30ec\u30a4\u30e4\u30fc","text":"<p>API Gateway / ALB \u30e1\u30c8\u30ea\u30af\u30b9</p> <ul> <li>\u76e3\u8996\u5185\u5bb9: \u30ec\u30b9\u30dd\u30f3\u30b9\u30bf\u30a4\u30e0\u3001\u30a8\u30e9\u30fc\u7387\uff084xx, 5xx\uff09</li> <li>\u30a2\u30e9\u30fc\u30c8:</li> <li>5xx\u30a8\u30e9\u30fc\u7387 &gt; 5% \u2192 Critical</li> <li>5xx\u30a8\u30e9\u30fc\u7387 &gt; 1% \u2192 Warning</li> </ul> <pre><code>\u76ee\u7684: \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30ec\u30d9\u30eb\u3067\u306e\u30a8\u30e9\u30fc\u3092\u691c\u77e5\n</code></pre> <p>ECS \u30e1\u30c8\u30ea\u30af\u30b9</p> <ul> <li>\u76e3\u8996\u5185\u5bb9: \u30bf\u30b9\u30af\u6570\u3001CPU/\u30e1\u30e2\u30ea\u4f7f\u7528\u7387</li> <li>\u30a2\u30e9\u30fc\u30c8:</li> <li>\u5168\u30bf\u30b9\u30af\u505c\u6b62 \u2192 Critical</li> <li>CPU &gt; 80%\uff0815\u5206\u9593\u7d99\u7d9a\uff09 \u2192 Warning</li> </ul> <pre><code>\u76ee\u7684: \u30b3\u30f3\u30c6\u30ca\u306e\u5065\u5168\u6027\u3092\u78ba\u8a8d\n</code></pre> <p>CloudWatch Logs</p> <ul> <li>\u76e3\u8996\u5185\u5bb9: \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30ed\u30b0\u3001\u30a8\u30e9\u30fc\u30d1\u30bf\u30fc\u30f3</li> <li>\u30a2\u30e9\u30fc\u30c8:</li> <li>ERROR \u30ec\u30d9\u30eb\u30ed\u30b0\u304c\u6025\u5897 \u2192 Warning</li> </ul> <pre><code>\u76ee\u7684: \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5185\u90e8\u306e\u30a8\u30e9\u30fc\u3092\u691c\u77e5\n</code></pre>"},{"location":"monitoring/multi-layer-examples/#3","title":"3. \u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u30ec\u30a4\u30e4\u30fc","text":"<p>ALB \u30e1\u30c8\u30ea\u30af\u30b9</p> <ul> <li>\u76e3\u8996\u5185\u5bb9: TargetHealth\u3001UnhealthyHostCount</li> <li>\u30a2\u30e9\u30fc\u30c8:</li> <li>\u5168\u30bf\u30fc\u30b2\u30c3\u30c8Unhealthy \u2192 Critical</li> <li>\u4e00\u90e8\u30bf\u30fc\u30b2\u30c3\u30c8Unhealthy \u2192 Warning</li> </ul> <pre><code>\u76ee\u7684: \u500b\u3005\u306e\u30bf\u30fc\u30b2\u30c3\u30c8\u306e\u5065\u5168\u6027\u3092\u78ba\u8a8d\uff08Synthetics\u3067\u306f\u691c\u77e5\u3067\u304d\u306a\u3044\u90e8\u5206\u7684\u306a\u969c\u5bb3\u3092\u691c\u77e5\uff09\n</code></pre> <p>RDS \u30e1\u30c8\u30ea\u30af\u30b9</p> <ul> <li>\u76e3\u8996\u5185\u5bb9: CPU\u3001\u63a5\u7d9a\u6570\u3001\u30b9\u30c8\u30ec\u30fc\u30b8\u3001\u30ec\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u9045\u5ef6</li> <li>\u30a2\u30e9\u30fc\u30c8:</li> <li>\u63a5\u7d9a\u5931\u6557 \u2192 Critical</li> <li>CPU &gt; 90%\uff085\u5206\u9593\u7d99\u7d9a\uff09 \u2192 Critical</li> <li>\u63a5\u7d9a\u6570 &gt; 80% \u2192 Warning</li> </ul> <pre><code>\u76ee\u7684: \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30ea\u30bd\u30fc\u30b9\u72b6\u614b\u3092\u76e3\u8996\n</code></pre>"},{"location":"monitoring/multi-layer-examples/#_4","title":"\u30ec\u30a4\u30e4\u30fc\u9593\u306e\u95a2\u9023\u6027","text":"<p>\u554f\u984c\u306e\u767a\u751f\u3068\u5f71\u97ff\u306e\u4f1d\u64ad:</p> <pre><code>graph TD\n    A[\u30a4\u30f3\u30d5\u30e9&lt;br/&gt;RDS CPU 100%] --&gt; B[\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3&lt;br/&gt;ECS \u30bf\u30b9\u30af\u3067DB\u63a5\u7d9a\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8]\n    B --&gt; C[\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3&lt;br/&gt;ALB 5xx\u30a8\u30e9\u30fc\u5897\u52a0]\n    C --&gt; D[\u30e6\u30fc\u30b6\u30fc\u4f53\u9a13&lt;br/&gt;Synthetics\u5931\u6557]\n    C --&gt; E[\u30e6\u30fc\u30b6\u30fc\u4f53\u9a13&lt;br/&gt;RUM \u30a8\u30e9\u30fc\u7387\u4e0a\u6607]\n\n    style A fill:#4d96ff\n    style B fill:#ffd93d\n    style C fill:#ffd93d\n    style D fill:#ff6b6b\n    style E fill:#ff6b6b</code></pre> <p>\u691c\u77e5\u306e\u6642\u7cfb\u5217\u9806\u5e8f:</p> <ol> <li>\u6700\u521d\u306e\u691c\u77e5\uff08\u4e88\u5146\uff09: RDS CPU\u4f7f\u7528\u7387\u304c100%\uff08Warning\uff09 \u2190 \u30a4\u30f3\u30d5\u30e9\u30ec\u30a4\u30e4\u30fc</li> <li>\u5f71\u97ff\u62e1\u5927: ECS\u30bf\u30b9\u30af\u3067DB\u63a5\u7d9a\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\uff08Warning\uff09 \u2190 \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30ec\u30a4\u30e4\u30fc</li> <li>\u30e6\u30fc\u30b6\u30fc\u5f71\u97ff\u9855\u5728\u5316: ALB 5xx\u30a8\u30e9\u30fc\u5897\u52a0\uff08Critical\uff09 \u2190 \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30ec\u30a4\u30e4\u30fc</li> <li>\u30e6\u30fc\u30b6\u30fc\u5f71\u97ff\u78ba\u8a8d: Synthetics\u5931\u6557\u3001RUM \u30a8\u30e9\u30fc\u7387\u4e0a\u6607\uff08Critical\uff09 \u2190 \u30e6\u30fc\u30b6\u30fc\u4f53\u9a13\u30ec\u30a4\u30e4\u30fc</li> </ol> <p>\u2192 \u591a\u5c64\u76e3\u8996\u306b\u3088\u308a\u3001\u30e6\u30fc\u30b6\u30fc\u5f71\u97ff\u304c\u51fa\u308b\u524d\u306e\u6bb5\u968e\uff08RDS CPU\u9ad8\u9a30\uff09\u3067\u4e88\u5146\u3092\u691c\u77e5\u3067\u304d\u308b</p>"},{"location":"monitoring/multi-layer-examples/#2-api-gateway-lambda-dynamodb","title":"\u4f8b2: \u30b5\u30fc\u30d0\u30fc\u30ec\u30b9\u69cb\u6210\uff08API Gateway + Lambda + DynamoDB\uff09","text":""},{"location":"monitoring/multi-layer-examples/#_5","title":"\u30b7\u30b9\u30c6\u30e0\u69cb\u6210","text":"<pre><code>Internet \u2192 API Gateway \u2192 Lambda \u2192 DynamoDB\n</code></pre>"},{"location":"monitoring/multi-layer-examples/#_6","title":"\u5404\u30ec\u30a4\u30e4\u30fc\u306e\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u8a2d\u5b9a","text":""},{"location":"monitoring/multi-layer-examples/#1_1","title":"1. \u30e6\u30fc\u30b6\u30fc\u4f53\u9a13\u30ec\u30a4\u30e4\u30fc","text":"<p>CloudWatch Synthetics</p> <ul> <li>\u76e3\u8996\u5185\u5bb9: API \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3078\u306e\u30ea\u30af\u30a8\u30b9\u30c8</li> <li>\u983b\u5ea6: 5\u5206\u9593\u9694</li> <li>\u30a2\u30e9\u30fc\u30c8: Canary\u5931\u6557 \u2192 Critical</li> </ul>"},{"location":"monitoring/multi-layer-examples/#2_1","title":"2. \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30ec\u30a4\u30e4\u30fc","text":"<p>API Gateway \u30e1\u30c8\u30ea\u30af\u30b9</p> <ul> <li>\u76e3\u8996\u5185\u5bb9: \u30ec\u30b9\u30dd\u30f3\u30b9\u30bf\u30a4\u30e0\u3001\u30a8\u30e9\u30fc\u7387</li> <li>\u30a2\u30e9\u30fc\u30c8:</li> <li>5xx\u30a8\u30e9\u30fc\u7387 &gt; 5% \u2192 Critical</li> <li>4xx\u30a8\u30e9\u30fc\u7387 &gt; 10% \u2192 Warning</li> </ul> <p>Lambda \u30e1\u30c8\u30ea\u30af\u30b9</p> <ul> <li>\u76e3\u8996\u5185\u5bb9: \u5b9f\u884c\u6642\u9593\u3001\u30a8\u30e9\u30fc\u3001\u30b9\u30ed\u30c3\u30c8\u30ea\u30f3\u30b0\u3001\u540c\u6642\u5b9f\u884c\u6570</li> <li>\u30a2\u30e9\u30fc\u30c8:</li> <li>\u30a8\u30e9\u30fc\u7387 &gt; 5% \u2192 Critical</li> <li>\u30b9\u30ed\u30c3\u30c8\u30ea\u30f3\u30b0\u767a\u751f \u2192 Critical</li> <li>\u5b9f\u884c\u6642\u9593\u304c\u5e73\u5747\u306e2\u500d \u2192 Warning</li> </ul> <p>X-Ray</p> <ul> <li>\u76e3\u8996\u5185\u5bb9: \u5206\u6563\u30c8\u30ec\u30fc\u30b7\u30f3\u30b0\u3001\u30ec\u30a4\u30c6\u30f3\u30b7\u5206\u6790</li> <li>\u30a2\u30e9\u30fc\u30c8:</li> <li>\u30a8\u30e9\u30fc\u7387\u4e0a\u6607 \u2192 Warning</li> </ul>"},{"location":"monitoring/multi-layer-examples/#3_1","title":"3. \u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u30ec\u30a4\u30e4\u30fc","text":"<p>DynamoDB \u30e1\u30c8\u30ea\u30af\u30b9</p> <ul> <li>\u76e3\u8996\u5185\u5bb9: \u30b9\u30ed\u30c3\u30c8\u30ea\u30f3\u30b0\u3001\u8aad\u307f\u66f8\u304d\u30ad\u30e3\u30d1\u30b7\u30c6\u30a3\u4f7f\u7528\u7387</li> <li>\u30a2\u30e9\u30fc\u30c8:</li> <li>\u30b9\u30ed\u30c3\u30c8\u30ea\u30f3\u30b0\u767a\u751f \u2192 Critical</li> <li>\u30ad\u30e3\u30d1\u30b7\u30c6\u30a3\u4f7f\u7528\u7387 &gt; 80% \u2192 Warning</li> </ul>"},{"location":"monitoring/multi-layer-examples/#_7","title":"\u90e8\u5206\u7684\u306a\u969c\u5bb3\u306e\u691c\u77e5\u4f8b","text":"<p>\u30b7\u30ca\u30ea\u30aa: Lambda\u95a2\u6570\u306e\u4e00\u90e8\u306e\u5b9f\u884c\u74b0\u5883\u3067\u30b3\u30fc\u30eb\u30c9\u30b9\u30bf\u30fc\u30c8\u6642\u306b\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8</p> <pre><code>graph TD\n    B[\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3&lt;br/&gt;Lambda\u4e00\u90e8\u5b9f\u884c\u3067\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8] --&gt; C[\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3&lt;br/&gt;API Gateway \u30a8\u30e9\u30fc\u7387 2%]\n    C --&gt; D[\u30e6\u30fc\u30b6\u30fc\u4f53\u9a13&lt;br/&gt;RUM\u3067\u4e00\u90e8\u30e6\u30fc\u30b6\u30fc\u30a8\u30e9\u30fc&lt;br/&gt;\u203bSynthetics\u306f\u6210\u529f]\n\n    style B fill:#ffd93d\n    style C fill:#ffd93d\n    style D fill:#ff6b6b</code></pre> <p>\u3053\u306e\u4f8b\u3067\u306e\u30dd\u30a4\u30f3\u30c8:</p> <ul> <li>Synthetics\uff08\u5b9a\u671f\u7684\u306a\u76e3\u8996\uff09\u306f\u6210\u529f</li> <li>\u3057\u304b\u3057\u3001Lambda \u30a8\u30e9\u30fc\u30e1\u30c8\u30ea\u30af\u30b9\u3067\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u3092\u691c\u77e5\uff08Warning\uff09</li> <li>RUM\u3067\u5b9f\u30e6\u30fc\u30b6\u30fc\u306e\u4e00\u90e8\u304c\u30a8\u30e9\u30fc\u3092\u4f53\u9a13\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\uff08Critical\uff09</li> </ul> <p>\u2192 \u591a\u5c64\u76e3\u8996\u306b\u3088\u308a\u3001Synthetics\u3060\u3051\u3067\u306f\u898b\u9003\u3059\u300c\u90e8\u5206\u7684\u306a\u969c\u5bb3\u300d\u3092\u691c\u77e5\u3067\u304d\u308b</p>"},{"location":"monitoring/multi-layer-examples/#3_2","title":"\u4f8b3: \u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u69cb\u6210","text":""},{"location":"monitoring/multi-layer-examples/#_8","title":"\u30b7\u30b9\u30c6\u30e0\u69cb\u6210","text":"<pre><code>Internet \u2192 ALB \u2192 Service A (ECS)\n                    \u2193\n                 Service B (ECS) \u2192 RDS\n                    \u2193\n                 Service C (Lambda) \u2192 DynamoDB\n</code></pre>"},{"location":"monitoring/multi-layer-examples/#_9","title":"\u5404\u30ec\u30a4\u30e4\u30fc\u306e\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u8a2d\u5b9a","text":""},{"location":"monitoring/multi-layer-examples/#1_2","title":"1. \u30e6\u30fc\u30b6\u30fc\u4f53\u9a13\u30ec\u30a4\u30e4\u30fc","text":"<p>CloudWatch Synthetics</p> <ul> <li>\u76e3\u8996\u5185\u5bb9: \u30a8\u30f3\u30c9\u30c4\u30fc\u30a8\u30f3\u30c9\u306e\u30b7\u30ca\u30ea\u30aa\uff08\u8907\u6570\u30b5\u30fc\u30d3\u30b9\u3092\u8de8\u3050\u51e6\u7406\uff09</li> <li>\u30a2\u30e9\u30fc\u30c8: Canary\u5931\u6557 \u2192 Critical</li> </ul>"},{"location":"monitoring/multi-layer-examples/#2_2","title":"2. \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30ec\u30a4\u30e4\u30fc","text":"<p>\u5404\u30b5\u30fc\u30d3\u30b9\u306e\u30e1\u30c8\u30ea\u30af\u30b9</p> <ul> <li>Service A, B, C \u305d\u308c\u305e\u308c\u3067\u76e3\u8996</li> <li>\u30b5\u30fc\u30d3\u30b9\u9593\u306e\u4f9d\u5b58\u95a2\u4fc2\u3082\u76e3\u8996</li> </ul> <p>X-Ray</p> <ul> <li>\u76e3\u8996\u5185\u5bb9: \u30b5\u30fc\u30d3\u30b9\u9593\u306e\u547c\u3073\u51fa\u3057\u3001\u4f9d\u5b58\u95a2\u4fc2\u3001\u30ec\u30a4\u30c6\u30f3\u30b7</li> <li>\u30a2\u30e9\u30fc\u30c8:</li> <li>\u7279\u5b9a\u30b5\u30fc\u30d3\u30b9\u306e\u30a8\u30e9\u30fc\u7387\u4e0a\u6607 \u2192 Warning</li> <li>\u30b5\u30fc\u30d3\u30b9\u9593\u547c\u3073\u51fa\u3057\u306e\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8 \u2192 Critical</li> </ul> <pre><code>\u76ee\u7684: \u3069\u306e\u30b5\u30fc\u30d3\u30b9\u304c\u30dc\u30c8\u30eb\u30cd\u30c3\u30af\u306b\u306a\u3063\u3066\u3044\u308b\u304b\u7279\u5b9a\n</code></pre>"},{"location":"monitoring/multi-layer-examples/#3_3","title":"3. \u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u30ec\u30a4\u30e4\u30fc","text":"<p>\u5404\u30b5\u30fc\u30d3\u30b9\u306e\u30a4\u30f3\u30d5\u30e9\u30e1\u30c8\u30ea\u30af\u30b9</p> <ul> <li>ECS \u30bf\u30b9\u30af\u3001Lambda\u3001RDS\u3001DynamoDB \u305d\u308c\u305e\u308c\u76e3\u8996</li> </ul>"},{"location":"monitoring/multi-layer-examples/#_10","title":"\u30b5\u30fc\u30d3\u30b9\u9593\u969c\u5bb3\u306e\u691c\u77e5\u4f8b","text":"<p>\u30b7\u30ca\u30ea\u30aa: Service C\u306e\u969c\u5bb3\u304cService B\u306b\u5f71\u97ff</p> <pre><code>graph LR\n    A[Service A] --&gt; B[Service B]\n    B --&gt; C[Service C: Lambda \u30a8\u30e9\u30fc]\n\n    style C fill:#ff6b6b\n    style B fill:#ffd93d</code></pre> <p>\u554f\u984c\u306e\u767a\u751f\u3068\u5f71\u97ff\u306e\u4f1d\u64ad:</p> <ol> <li>\u6839\u672c\u539f\u56e0\uff08\u30a4\u30f3\u30d5\u30e9\uff09: DynamoDB \u30b9\u30ed\u30c3\u30c8\u30ea\u30f3\u30b0\uff08Warning\uff09</li> <li>\u5f71\u97ff\uff08\u30a2\u30d7\u30ea - Service C\uff09: Lambda \u30a8\u30e9\u30fc\u7387\u4e0a\u6607\uff08Warning\uff09</li> <li>\u5f71\u97ff\u62e1\u5927\uff08\u30a2\u30d7\u30ea - Service B\uff09: Service C\u547c\u3073\u51fa\u3057\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\uff08Warning\uff09</li> <li>\u5f71\u97ff\u62e1\u5927\uff08\u30a2\u30d7\u30ea - Service B\uff09: Service B \u30a8\u30e9\u30fc\u7387\u4e0a\u6607\uff08Critical\uff09</li> <li>\u5f71\u97ff\uff08\u30e6\u30fc\u30b6\u30fc\u4f53\u9a13\uff09: Synthetics\u5931\u6557\uff08Critical\uff09</li> </ol> <p>\u2192 X-Ray\u306e\u5206\u6563\u30c8\u30ec\u30fc\u30b7\u30f3\u30b0\u306b\u3088\u308a\u3001\u6839\u672c\u539f\u56e0\uff08DynamoDB \u2192 Service C\uff09\u3092\u8fc5\u901f\u306b\u7279\u5b9a</p>"},{"location":"monitoring/multi-layer-examples/#_11","title":"\u591a\u5c64\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u306e\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9","text":""},{"location":"monitoring/multi-layer-examples/#1_3","title":"1. \u4e0a\u4f4d\u30ec\u30a4\u30e4\u30fc\u304b\u3089\u8a2d\u8a08\u3059\u308b","text":"<p>\u307e\u305a\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u8996\u70b9\uff08Synthetics\u3001RUM\uff09\u3092\u8a2d\u5b9a\u3057\u3001\u6b21\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3001\u6700\u5f8c\u306b\u30a4\u30f3\u30d5\u30e9\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002</p>"},{"location":"monitoring/multi-layer-examples/#2_3","title":"2. \u5404\u30ec\u30a4\u30e4\u30fc\u3067\u9069\u5207\u306a\u30a2\u30e9\u30fc\u30c8\u30ec\u30d9\u30eb\u3092\u8a2d\u5b9a","text":"<ul> <li>\u30e6\u30fc\u30b6\u30fc\u4f53\u9a13\u30ec\u30a4\u30e4\u30fc: Critical\uff08\u5373\u6642\u5bfe\u5fdc\uff09</li> <li>\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30fb\u30a4\u30f3\u30d5\u30e9\u30ec\u30a4\u30e4\u30fc: Warning\uff08\u9031\u6b21\u30ec\u30d3\u30e5\u30fc\u3001\u307e\u305f\u306f\u7fcc\u55b6\u696d\u65e5\u5bfe\u5fdc\uff09</li> </ul>"},{"location":"monitoring/multi-layer-examples/#3_4","title":"3. \u5197\u9577\u6027\u3092\u6301\u305f\u305b\u308b","text":"<p>\u300cSynthetics\u3067\u76e3\u8996\u3057\u3066\u3044\u308b\u304b\u3089\u4ed6\u306f\u4e0d\u8981\u300d\u3067\u306f\u306a\u304f\u3001\u5404\u30ec\u30a4\u30e4\u30fc\u3067\u7570\u306a\u308b\u8996\u70b9\u304b\u3089\u76e3\u8996\u3057\u307e\u3059\u3002</p>"},{"location":"monitoring/multi-layer-examples/#4","title":"4. \u30ec\u30a4\u30e4\u30fc\u9593\u306e\u76f8\u95a2\u3092\u7406\u89e3\u3059\u308b","text":"<p>\u969c\u5bb3\u767a\u751f\u6642\u306b\u3001\u3069\u306e\u30ec\u30a4\u30e4\u30fc\u304b\u3089\u554f\u984c\u304c\u59cb\u307e\u3063\u305f\u304b\u3092\u8ffd\u8de1\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002</p>"},{"location":"monitoring/multi-layer-examples/#5","title":"5. \u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3067\u5168\u4f53\u3092\u53ef\u8996\u5316\u3059\u308b","text":"<p>\u5404\u30ec\u30a4\u30e4\u30fc\u306e\u30e1\u30c8\u30ea\u30af\u30b9\u3092\u4e00\u3064\u306e\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306b\u96c6\u7d04\u3057\u3001\u5b9a\u671f\u7684\u306b\u78ba\u8a8d\u3057\u307e\u3059\u3002</p>"},{"location":"monitoring/multi-layer-examples/#_12","title":"\u307e\u3068\u3081","text":"<ul> <li>\u5404\u30ec\u30a4\u30e4\u30fc\u3067\u7570\u306a\u308b\u8996\u70b9\u30fb\u7c92\u5ea6\u3067\u76e3\u8996\u3059\u308b</li> <li>Synthetics\u3060\u3051\u3067\u306f\u691c\u77e5\u3067\u304d\u306a\u3044\u90e8\u5206\u7684\u306a\u969c\u5bb3\u3082\u3001\u591a\u5c64\u76e3\u8996\u3067\u691c\u77e5\u53ef\u80fd</li> <li>\u4e88\u5146\u6bb5\u968e\u3067\u306e\u691c\u77e5\u306b\u3088\u308a\u3001\u30e6\u30fc\u30b6\u30fc\u5f71\u97ff\u3092\u6700\u5c0f\u5316\u3067\u304d\u308b</li> <li>\u30ec\u30a4\u30e4\u30fc\u9593\u306e\u76f8\u95a2\u3092\u7406\u89e3\u3059\u308b\u3053\u3068\u3067\u3001\u8fc5\u901f\u306a\u6839\u672c\u539f\u56e0\u306e\u7279\u5b9a\u304c\u53ef\u80fd</li> <li>\u9069\u5207\u306a\u30a2\u30e9\u30fc\u30c8\u30ec\u30d9\u30eb\u3092\u8a2d\u5b9a\u3057\u3001\u30a2\u30e9\u30fc\u30c8\u75b2\u308c\u3092\u9632\u3050</li> </ul>"},{"location":"monitoring/multi-layer-monitoring/","title":"\u591a\u5c64\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u3068\u306f","text":"<p>\u30b7\u30b9\u30c6\u30e0\u3092\u591a\u5c64\u7684\u306b\u76e3\u8996\u3059\u308b\u3053\u3068\u3067\u3001\u554f\u984c\u306e\u65e9\u671f\u767a\u898b\u3068\u8fc5\u901f\u306a\u539f\u56e0\u7279\u5b9a\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"monitoring/multi-layer-monitoring/#_2","title":"\u591a\u5c64\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u306e\u5fc5\u8981\u6027","text":""},{"location":"monitoring/multi-layer-monitoring/#_3","title":"\u306a\u305c\u591a\u5c64\u7684\u306b\u76e3\u8996\u3059\u308b\u306e\u304b","text":"<p>\u30b7\u30b9\u30c6\u30e0\u306f\u8907\u6570\u306e\u30ec\u30a4\u30e4\u30fc\u3067\u69cb\u6210\u3055\u308c\u3066\u304a\u308a\u3001\u554f\u984c\u306f\u69d8\u3005\u306a\u30ec\u30a4\u30e4\u30fc\u3067\u767a\u751f\u3057\u307e\u3059\u3002\u5358\u4e00\u306e\u30ec\u30a4\u30e4\u30fc\u3060\u3051\u3092\u76e3\u8996\u3057\u3066\u3044\u3066\u306f:</p> <ul> <li>\u554f\u984c\u306e\u898b\u9003\u3057: \u5225\u306e\u30ec\u30a4\u30e4\u30fc\u3067\u767a\u751f\u3057\u305f\u554f\u984c\u3092\u691c\u77e5\u3067\u304d\u306a\u3044</li> <li>\u539f\u56e0\u7279\u5b9a\u306e\u9045\u308c: \u3069\u306e\u30ec\u30a4\u30e4\u30fc\u306b\u554f\u984c\u304c\u3042\u308b\u306e\u304b\u5206\u304b\u3089\u306a\u3044</li> <li>\u5bfe\u75c7\u7642\u6cd5: \u6839\u672c\u539f\u56e0\u3067\u306f\u306a\u304f\u8868\u9762\u7684\u306a\u75c7\u72b6\u306b\u3057\u304b\u5bfe\u51e6\u3067\u304d\u306a\u3044</li> </ul> <p>\u591a\u5c64\u7684\u306b\u76e3\u8996\u3059\u308b\u3053\u3068\u3067\u3001\u554f\u984c\u306e\u65e9\u671f\u767a\u898b\u3068\u8fc5\u901f\u306a\u6839\u672c\u539f\u56e0\u306e\u7279\u5b9a\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"monitoring/multi-layer-monitoring/#_4","title":"\u91cd\u8907\u3067\u306f\u306a\u304f\u3001\u7570\u306a\u308b\u8996\u70b9\u3067\u306e\u76e3\u8996","text":"<p>\u300cSynthetics\u3067\u6b7b\u6d3b\u76e3\u8996\u3057\u3066\u3044\u308b\u304b\u3089\u3001ALB\u306eHealthCheck\u306f\u4e0d\u8981\u300d\u3068\u3044\u3046\u8003\u3048\u65b9\u306f\u8aa4\u308a\u3067\u3059\u3002</p> <p>\u5404\u30ec\u30a4\u30e4\u30fc\u306f\u7570\u306a\u308b\u8996\u70b9\u30fb\u7c92\u5ea6\u3067\u76e3\u8996\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059:</p> <ul> <li>Synthetics: \u5916\u90e8\u304b\u3089\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u8996\u70b9\u3067\u30b5\u30fc\u30d3\u30b9\u5168\u4f53\u304c\u6b63\u5e38\u304b\u78ba\u8a8d</li> <li>ALB HealthCheck: \u5404\u30bf\u30fc\u30b2\u30c3\u30c8\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u500b\u5225\u306b\u5fdc\u7b54\u3057\u3066\u3044\u308b\u304b\u78ba\u8a8d</li> </ul> <p>\u591a\u5c64\u76e3\u8996\u306e\u30e1\u30ea\u30c3\u30c8:</p> <ul> <li>\u691c\u77e5\u6f0f\u308c\u3092\u9632\u3050: Synthetics\u304c\u6210\u529f\u3057\u3066\u3082\u3001\u4e00\u90e8\u306e\u30bf\u30fc\u30b2\u30c3\u30c8\u304cUnhealthy\u306b\u306a\u3063\u3066\u3044\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b</li> <li>\u539f\u56e0\u7279\u5b9a\u304c\u65e9\u3044: \u554f\u984c\u304c\u3069\u306e\u30ec\u30a4\u30e4\u30fc\u3067\u767a\u751f\u3057\u3066\u3044\u308b\u304b\u5373\u5ea7\u306b\u5224\u65ad\u3067\u304d\u308b</li> <li>\u5197\u9577\u6027: \u4e00\u3064\u306e\u76e3\u8996\u304c\u5931\u6557\u3057\u3066\u3082\u3001\u5225\u306e\u30ec\u30a4\u30e4\u30fc\u3067\u691c\u77e5\u3067\u304d\u308b</li> </ul>"},{"location":"monitoring/multi-layer-monitoring/#3","title":"\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u306e3\u3064\u306e\u30ec\u30a4\u30e4\u30fc","text":""},{"location":"monitoring/multi-layer-monitoring/#1","title":"1. \u30e6\u30fc\u30b6\u30fc\u4f53\u9a13\u30ec\u30a4\u30e4\u30fc","text":"<p>\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u304c\u5b9f\u969b\u306b\u4f53\u9a13\u3059\u308b\u30b5\u30fc\u30d3\u30b9\u306e\u54c1\u8cea</p> <p>\u76e3\u8996\u5bfe\u8c61:</p> <ul> <li>\u30ec\u30b9\u30dd\u30f3\u30b9\u30bf\u30a4\u30e0</li> <li>\u30a8\u30e9\u30fc\u7387</li> <li>\u53ef\u7528\u6027</li> <li>\u6a5f\u80fd\u306e\u6b63\u5e38\u52d5\u4f5c</li> </ul> <p>AWS \u30b5\u30fc\u30d3\u30b9\u4f8b:</p> <ul> <li>CloudWatch Synthetics\uff08\u5408\u6210\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\uff09</li> <li>CloudWatch RUM\uff08Real User Monitoring\uff09</li> <li>X-Ray\uff08\u5206\u6563\u30c8\u30ec\u30fc\u30b7\u30f3\u30b0\uff09</li> </ul> <p>\u76e3\u8996\u306e\u7279\u5fb4:</p> <ul> <li>\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u8996\u70b9\u3067\u306e\u76e3\u8996</li> <li>\u30b5\u30fc\u30d3\u30b9\u5168\u4f53\u306e\u5065\u5168\u6027\u3092\u78ba\u8a8d</li> <li>\u5916\u90e8\u304b\u3089\u306e\u30a2\u30af\u30bb\u30b9\u3067\u691c\u8a3c</li> </ul>"},{"location":"monitoring/multi-layer-monitoring/#2","title":"2. \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30ec\u30a4\u30e4\u30fc","text":"<p>\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b3\u30fc\u30c9\u306e\u52d5\u4f5c\u3068\u51e6\u7406</p> <p>\u76e3\u8996\u5bfe\u8c61:</p> <ul> <li>API\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u30bf\u30a4\u30e0</li> <li>\u30a8\u30e9\u30fc\u30fb\u4f8b\u5916\u306e\u767a\u751f</li> <li>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u51e6\u7406</li> <li>\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u306e\u5b9f\u884c\u72b6\u6cc1</li> </ul> <p>AWS \u30b5\u30fc\u30d3\u30b9\u4f8b:</p> <ul> <li>API Gateway \u30e1\u30c8\u30ea\u30af\u30b9</li> <li>Lambda \u30e1\u30c8\u30ea\u30af\u30b9</li> <li>X-Ray\uff08APM\uff09</li> <li>CloudWatch Logs</li> </ul> <p>\u76e3\u8996\u306e\u7279\u5fb4:</p> <ul> <li>\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5185\u90e8\u306e\u52d5\u4f5c\u3092\u78ba\u8a8d</li> <li>\u3069\u306e\u51e6\u7406\u3067\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u3066\u3044\u308b\u304b\u7279\u5b9a</li> <li>\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u30dc\u30c8\u30eb\u30cd\u30c3\u30af\u306e\u691c\u51fa</li> </ul>"},{"location":"monitoring/multi-layer-monitoring/#3_1","title":"3. \u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u30ec\u30a4\u30e4\u30fc","text":"<p>\u30b7\u30b9\u30c6\u30e0\u3092\u652f\u3048\u308b\u30a4\u30f3\u30d5\u30e9\u306e\u5065\u5168\u6027</p> <p>\u76e3\u8996\u5bfe\u8c61:</p> <ul> <li>CPU\u3001\u30e1\u30e2\u30ea\u3001\u30c7\u30a3\u30b9\u30af\u4f7f\u7528\u7387</li> <li>\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30c8\u30e9\u30d5\u30a3\u30c3\u30af</li> <li>\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u63a5\u7d9a\u6570</li> <li>\u30ad\u30e3\u30c3\u30b7\u30e5\u30d2\u30c3\u30c8\u7387</li> <li>\u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af\u72b6\u614b</li> </ul> <p>AWS \u30b5\u30fc\u30d3\u30b9\u4f8b:</p> <ul> <li>EC2 \u30e1\u30c8\u30ea\u30af\u30b9</li> <li>RDS \u30e1\u30c8\u30ea\u30af\u30b9</li> <li>ElastiCache \u30e1\u30c8\u30ea\u30af\u30b9</li> <li>ALB \u30e1\u30c8\u30ea\u30af\u30b9\u3001TargetHealth</li> </ul> <p>\u76e3\u8996\u306e\u7279\u5fb4:</p> <ul> <li>\u30a4\u30f3\u30d5\u30e9\u30ea\u30bd\u30fc\u30b9\u306e\u72b6\u614b\u3092\u78ba\u8a8d</li> <li>\u30ea\u30bd\u30fc\u30b9\u903c\u8feb\u306e\u4e88\u5146\u3092\u691c\u77e5</li> <li>\u500b\u3005\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u5065\u5168\u6027\u3092\u78ba\u8a8d</li> </ul>"},{"location":"monitoring/multi-layer-monitoring/#_5","title":"\u30ec\u30a4\u30e4\u30fc\u9593\u306e\u95a2\u9023\u6027","text":"<p>\u554f\u984c\u306f\u4e0b\u4f4d\u30ec\u30a4\u30e4\u30fc\uff08\u30a4\u30f3\u30d5\u30e9\uff09\u304b\u3089\u4e0a\u4f4d\u30ec\u30a4\u30e4\u30fc\uff08\u30e6\u30fc\u30b6\u30fc\u4f53\u9a13\uff09\u3078\u4f1d\u64ad\u3057\u307e\u3059\u3002\u591a\u5c64\u7684\u306b\u76e3\u8996\u3059\u308b\u3053\u3068\u3067\u3001\u8fc5\u901f\u306b\u6839\u672c\u539f\u56e0\u3092\u7279\u5b9a\u3067\u304d\u307e\u3059\u3002</p> <pre><code>graph TD\n    C[\u30a4\u30f3\u30d5\u30e9&lt;br/&gt;RDS CPU 100%] --&gt; B[\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3&lt;br/&gt;\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30af\u30a8\u30ea\u9045\u5ef6]\n    B --&gt; A[\u30e6\u30fc\u30b6\u30fc\u4f53\u9a13&lt;br/&gt;\u30ec\u30b9\u30dd\u30f3\u30b9\u9045\u5ef6]\n\n    style C fill:#4d96ff\n    style B fill:#ffd93d\n    style A fill:#ff6b6b</code></pre>"},{"location":"monitoring/multi-layer-monitoring/#_6","title":"\u4f8b: \u30ec\u30b9\u30dd\u30f3\u30b9\u9045\u5ef6\u306e\u539f\u56e0\u8abf\u67fb","text":"<p>\u554f\u984c\u306e\u767a\u751f\u3068\u5f71\u97ff\u306e\u4f1d\u64ad:</p> <ol> <li>\u6839\u672c\u539f\u56e0\uff08\u30a4\u30f3\u30d5\u30e9\uff09: RDS \u306eCPU\u4f7f\u7528\u7387\u304c100%\u306b\u5f35\u308a\u4ed8\u304d</li> <li>\u5f71\u97ff\uff08\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\uff09: \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30af\u30a8\u30ea\u304c\u9045\u5ef6\u3057\u3001API Gateway\u3067\u6c7a\u6e08API\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u30bf\u30a4\u30e0\u304c9\u79d2</li> <li>\u5f71\u97ff\uff08\u30e6\u30fc\u30b6\u30fc\u4f53\u9a13\uff09: Synthetics\u3067\u6c7a\u6e08\u30da\u30fc\u30b8\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u30bf\u30a4\u30e0\u304c10\u79d2\u4ee5\u4e0a</li> </ol> <p>\u2192 \u30a4\u30f3\u30d5\u30e9\u306e\u554f\u984c\u304c\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3001\u30e6\u30fc\u30b6\u30fc\u4f53\u9a13\u3078\u3068\u4f1d\u64ad</p>"},{"location":"monitoring/multi-layer-monitoring/#_7","title":"\u4f8b: \u53ef\u7528\u6027\u306e\u554f\u984c\u8abf\u67fb","text":"<p>\u554f\u984c\u306e\u767a\u751f\u3068\u5f71\u97ff\u306e\u4f1d\u64ad:</p> <ol> <li>\u6839\u672c\u539f\u56e0\uff08\u30a4\u30f3\u30d5\u30e9\uff09: ALB\u306eTargetHealth\u30672\u53f0\u4e2d1\u53f0\u304cUnhealthy\uff08EC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b91\u53f0\u306e\u969c\u5bb3\uff09</li> <li>\u5f71\u97ff\uff08\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\uff09: API Gateway\u306e\u30a8\u30e9\u30fc\u7387\u304c\u4e0a\u6607\uff08\u4e00\u90e8\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u5931\u6557\uff09</li> <li>\u5f71\u97ff\uff08\u30e6\u30fc\u30b6\u30fc\u4f53\u9a13\uff09: \u4e00\u90e8\u30e6\u30fc\u30b6\u30fc\u304c\u30a8\u30e9\u30fc\u3092\u4f53\u9a13\uff08Synthetics\u306f\u6210\u529f\u3057\u305f\u304c\u3001\u90e8\u5206\u7684\u306a\u969c\u5bb3\uff09</li> </ol> <p>\u2192 \u30a4\u30f3\u30d5\u30e9\u306e\u554f\u984c\uff081\u53f0\u969c\u5bb3\uff09\u304c\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3001\u30e6\u30fc\u30b6\u30fc\u4f53\u9a13\u3078\u3068\u90e8\u5206\u7684\u306b\u5f71\u97ff</p> <p>\u3053\u306e\u4f8b\u3067\u306f\u3001Synthetics\u3060\u3051\u3067\u306f\u691c\u77e5\u3067\u304d\u306a\u304b\u3063\u305f\u90e8\u5206\u7684\u306a\u969c\u5bb3\u3092\u3001ALB\u306eHealthCheck\u3067\u691c\u77e5\u3067\u304d\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"monitoring/multi-layer-monitoring/#_8","title":"\u5404\u30ec\u30a4\u30e4\u30fc\u306e\u512a\u5148\u5ea6\u3068\u30a2\u30e9\u30fc\u30c8\u8a2d\u5b9a","text":""},{"location":"monitoring/multi-layer-monitoring/#critical","title":"Critical\uff08\u9ad8\uff09: \u30e6\u30fc\u30b6\u30fc\u4f53\u9a13\u30ec\u30a4\u30e4\u30fc","text":"<p>\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u306b\u76f4\u63a5\u5f71\u97ff\u3059\u308b\u305f\u3081\u3001\u6700\u512a\u5148\u3067\u76e3\u8996\u30fb\u5bfe\u5fdc\u304c\u5fc5\u8981\u3067\u3059\u3002</p> <p>\u30a2\u30e9\u30fc\u30c8\u4f8b:</p> <ul> <li>Synthetics\u306e\u5931\u6557</li> <li>Real User Monitoring \u3067\u306e\u30a8\u30e9\u30fc\u73875%\u8d85\u904e</li> <li>\u30ec\u30b9\u30dd\u30f3\u30b9\u30bf\u30a4\u30e0\u304cSLO\u3092\u9055\u53cd</li> </ul>"},{"location":"monitoring/multi-layer-monitoring/#warning","title":"Warning\uff08\u4e2d\uff09: \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30fb\u30a4\u30f3\u30d5\u30e9\u30ec\u30a4\u30e4\u30fc","text":"<p>\u30e6\u30fc\u30b6\u30fc\u4f53\u9a13\u306b\u5f71\u97ff\u304c\u51fa\u308b\u524d\u306e\u4e88\u5146\u6bb5\u968e\u3067\u691c\u77e5\u3057\u307e\u3059\u3002</p> <p>\u30a2\u30e9\u30fc\u30c8\u4f8b:</p> <ul> <li>API Gateway \u306e\u30a8\u30e9\u30fc\u73871%\u8d85\u904e</li> <li>Lambda \u306e\u5b9f\u884c\u6642\u9593\u304c\u5e73\u5747\u306e2\u500d</li> <li>RDS \u306e\u63a5\u7d9a\u6570\u304c80%\u8d85\u904e</li> <li>ALB\u306eTarget\u304cUnhealthy\uff08\u305f\u3060\u3057\u4ed6\u306e\u30bf\u30fc\u30b2\u30c3\u30c8\u306f\u6b63\u5e38\uff09</li> </ul> <p>\u5bfe\u5fdc:</p> <ul> <li>\u57fa\u672c\u306f\u9031\u6b21/\u6708\u6b21\u30ec\u30d3\u30e5\u30fc\u6642</li> <li>\u30b7\u30b9\u30c6\u30e0\u7279\u6027\u306b\u3088\u308a\u7fcc\u55b6\u696d\u65e5\u301c\u6570\u65e5\u4ee5\u5185</li> </ul>"},{"location":"monitoring/multi-layer-monitoring/#info","title":"Info\uff08\u4f4e\uff09: \u9577\u671f\u7684\u306a\u50be\u5411\u76e3\u8996","text":"<p>\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3067\u5b9a\u671f\u78ba\u8a8d\u3057\u3001\u50be\u5411\u3092\u628a\u63e1\u3057\u307e\u3059\u3002</p> <p>\u78ba\u8a8d\u5185\u5bb9:</p> <ul> <li>\u30ea\u30bd\u30fc\u30b9\u4f7f\u7528\u7387\u306e\u63a8\u79fb</li> <li>\u30a8\u30e9\u30fc\u767a\u751f\u30d1\u30bf\u30fc\u30f3\u306e\u50be\u5411</li> <li>\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306e\u5909\u5316</li> </ul> <p>\u78ba\u8a8d\u65b9\u6cd5:</p> <ul> <li>\u671d\u4f1a\u3001\u9031\u6b21\u3067\u306e\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u78ba\u8a8d</li> </ul>"},{"location":"monitoring/multi-layer-monitoring/#_9","title":"\u591a\u5c64\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u306e\u5b9f\u8df5","text":""},{"location":"monitoring/multi-layer-monitoring/#1_1","title":"1. \u4e0a\u4f4d\u30ec\u30a4\u30e4\u30fc\u304b\u3089\u8a2d\u8a08\u3059\u308b","text":"<p>\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u8996\u70b9\uff08\u30e6\u30fc\u30b6\u30fc\u4f53\u9a13\u30ec\u30a4\u30e4\u30fc\uff09\u304b\u3089\u8a2d\u8a08\u3092\u958b\u59cb\u3057\u307e\u3059\u3002</p> <pre><code>\u30e6\u30fc\u30b6\u30fc\u4f53\u9a13 \u2192 \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3 \u2192 \u30a4\u30f3\u30d5\u30e9\n</code></pre>"},{"location":"monitoring/multi-layer-monitoring/#2_1","title":"2. \u5404\u30ec\u30a4\u30e4\u30fc\u3067\u7570\u306a\u308b\u8996\u70b9\u3092\u6301\u3064","text":"<p>\u540c\u3058\u300c\u53ef\u7528\u6027\u300d\u3092\u76e3\u8996\u3059\u308b\u5834\u5408\u3067\u3082\u3001\u5404\u30ec\u30a4\u30e4\u30fc\u3067\u7570\u306a\u308b\u8996\u70b9\u3092\u6301\u3061\u307e\u3059\u3002</p> \u30ec\u30a4\u30e4\u30fc \u76e3\u8996\u5185\u5bb9 \u691c\u77e5\u3067\u304d\u308b\u3053\u3068 \u30e6\u30fc\u30b6\u30fc\u4f53\u9a13 Synthetics \u30b5\u30fc\u30d3\u30b9\u5168\u4f53\u304c\u5229\u7528\u53ef\u80fd\u304b \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3 API Gateway \u30a8\u30e9\u30fc\u7387 API\u30ec\u30d9\u30eb\u3067\u306e\u30a8\u30e9\u30fc\u767a\u751f \u30a4\u30f3\u30d5\u30e9 ALB TargetHealth \u500b\u3005\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u72b6\u614b"},{"location":"monitoring/multi-layer-monitoring/#3_2","title":"3. \u30ec\u30a4\u30e4\u30fc\u9593\u306e\u76f8\u95a2\u3092\u7406\u89e3\u3059\u308b","text":"<p>\u554f\u984c\u767a\u751f\u6642\u306b\u3001\u3069\u306e\u30ec\u30a4\u30e4\u30fc\u304c\u3069\u306e\u3088\u3046\u306b\u5f71\u97ff\u3057\u5408\u3046\u304b\u3092\u7406\u89e3\u3057\u307e\u3059\u3002</p> <p>\u554f\u984c\u8abf\u67fb\u306e\u30d5\u30ed\u30fc:</p> <pre><code>\u30e6\u30fc\u30b6\u30fc\u4f53\u9a13: \u4f55\u304c\u8d77\u304d\u3066\u3044\u308b\u304b\uff1f\n      \u2193\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3: \u3069\u306eAPI\u304c\u5f71\u97ff\u3092\u53d7\u3051\u3066\u3044\u308b\u304b\uff1f\n      \u2193\n\u30a4\u30f3\u30d5\u30e9: \u3069\u306e\u30ea\u30bd\u30fc\u30b9\u306b\u554f\u984c\u304c\u3042\u308b\u304b\uff1f\n</code></pre>"},{"location":"monitoring/multi-layer-monitoring/#4","title":"4. \u9069\u5207\u306a\u30a2\u30e9\u30fc\u30c8\u30ec\u30d9\u30eb\u3092\u8a2d\u5b9a\u3059\u308b","text":"<p>\u5404\u30ec\u30a4\u30e4\u30fc\u306e\u30a2\u30e9\u30fc\u30c8\u306b\u9069\u5207\u306a\u512a\u5148\u5ea6\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002</p> \u30ec\u30a4\u30e4\u30fc \u512a\u5148\u5ea6 \u7406\u7531 \u30e6\u30fc\u30b6\u30fc\u4f53\u9a13 Critical \u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u76f4\u63a5\u5f71\u97ff \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3 Warning \u4e88\u5146\u6bb5\u968e\u3067\u306e\u691c\u77e5 \u30a4\u30f3\u30d5\u30e9 Warning \u4e88\u5146\u6bb5\u968e\u3067\u306e\u691c\u77e5"},{"location":"monitoring/multi-layer-monitoring/#_10","title":"\u307e\u3068\u3081","text":"<ul> <li>\u30b7\u30b9\u30c6\u30e0\u306f\u8907\u6570\u306e\u30ec\u30a4\u30e4\u30fc\u3067\u69cb\u6210\u3055\u308c\u3066\u304a\u308a\u3001\u5404\u30ec\u30a4\u30e4\u30fc\u3092\u76e3\u8996\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b</li> <li>\u5404\u30ec\u30a4\u30e4\u30fc\u306f\u7570\u306a\u308b\u8996\u70b9\u30fb\u7c92\u5ea6\u3067\u76e3\u8996\u3057\u3001\u91cd\u8907\u3067\u306f\u306a\u304f\u88dc\u5b8c\u95a2\u4fc2\u306b\u3042\u308b</li> <li>Synthetics\u3067\u6b7b\u6d3b\u76e3\u8996\u3057\u3066\u3044\u3066\u3082\u3001ALB\u306eHealthCheck\u306a\u3069\u5404\u30ec\u30a4\u30e4\u30fc\u306e\u76e3\u8996\u306f\u5fc5\u8981</li> <li>\u30e6\u30fc\u30b6\u30fc\u4f53\u9a13\u30ec\u30a4\u30e4\u30fc\u304c\u6700\u512a\u5148\u3001\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u8996\u70b9\u3067\u8a2d\u8a08\u3059\u308b</li> <li>\u30ec\u30a4\u30e4\u30fc\u9593\u306e\u95a2\u9023\u6027\u3092\u7406\u89e3\u3059\u308b\u3053\u3068\u3067\u3001\u8fc5\u901f\u306a\u6839\u672c\u539f\u56e0\u306e\u7279\u5b9a\u304c\u53ef\u80fd</li> <li>\u5404\u30ec\u30a4\u30e4\u30fc\u306b\u9069\u5207\u306a\u30a2\u30e9\u30fc\u30c8\u30ec\u30d9\u30eb\u3092\u8a2d\u5b9a\u3059\u308b</li> <li>\u4e0a\u4f4d\u30ec\u30a4\u30e4\u30fc\u304b\u3089\u8a2d\u8a08\u3057\u3001\u4e0b\u4f4d\u30ec\u30a4\u30e4\u30fc\u3078\u5c55\u958b\u3059\u308b</li> </ul>"},{"location":"monitoring/resource-monitoring/","title":"\u30ea\u30bd\u30fc\u30b9\u76e3\u8996","text":"<p>\u30af\u30e9\u30a6\u30c9\u74b0\u5883\u306b\u304a\u3051\u308b\u30ea\u30bd\u30fc\u30b9\u76e3\u8996\u306e\u8003\u3048\u65b9\u3068\u5b9f\u8df5\u65b9\u6cd5\u3092\u5b66\u3073\u307e\u3059\u3002</p> <p>\u95be\u5024\u306b\u3064\u3044\u3066</p> <p>\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u95be\u5024\u306f\u3042\u304f\u307e\u3067\u4e00\u4f8b\u3067\u3059\u3002\u5b9f\u969b\u306e\u30b7\u30b9\u30c6\u30e0\u3067\u306f\u3001\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u30d1\u30bf\u30fc\u30f3\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u7279\u6027\u3001\u30a4\u30f3\u30d5\u30e9\u69cb\u6210\u306a\u3069\u306b\u5fdc\u3058\u3066\u9069\u5207\u306b\u8abf\u6574\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"monitoring/resource-monitoring/#_2","title":"\u30ea\u30bd\u30fc\u30b9\u76e3\u8996\u306e\u76ee\u7684","text":""},{"location":"monitoring/resource-monitoring/#1","title":"1. \u30e6\u30fc\u30b6\u30fc\u5f71\u97ff\u306e\u4e88\u5146\u691c\u77e5","text":"<p>\u30ea\u30bd\u30fc\u30b9\u903c\u8feb\u306b\u3088\u308b\u30b5\u30fc\u30d3\u30b9\u505c\u6b62\u3092\u4e8b\u524d\u306b\u9632\u3050\u3053\u3068\u304c\u6700\u512a\u5148\u3067\u3059\u3002</p> <p>\u76e3\u8996\u306e\u89b3\u70b9: - \u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u306b\u5f71\u97ff\u304c\u51fa\u308b\u524d\u306b\u691c\u77e5 - \u6642\u9593\u7684\u7336\u4e88\u3092\u6301\u3063\u3066\u5bfe\u5fdc\u3067\u304d\u308b\u95be\u5024\u8a2d\u5b9a - \u4e88\u5146\u6bb5\u968e\u3067\u306e\u8b66\u544a</p>"},{"location":"monitoring/resource-monitoring/#2","title":"2. \u30ad\u30e3\u30d1\u30b7\u30c6\u30a3\u30d7\u30e9\u30f3\u30cb\u30f3\u30b0","text":"<p>\u9577\u671f\u7684\u306a\u30ea\u30bd\u30fc\u30b9\u4f7f\u7528\u50be\u5411\u3092\u628a\u63e1\u3057\u3001\u9069\u5207\u306a\u898f\u6a21\u306b\u30b7\u30b9\u30c6\u30e0\u3092\u8abf\u6574\u3057\u307e\u3059\u3002</p> <p>\u76e3\u8996\u306e\u89b3\u70b9: - \u9031\u6b21/\u6708\u6b21\u3067\u306e\u50be\u5411\u5206\u6790 - \u6210\u9577\u306b\u5408\u308f\u305b\u305f\u30b9\u30b1\u30fc\u30eb\u8a08\u753b - \u30b3\u30b9\u30c8\u6700\u9069\u5316\u306e\u5224\u65ad\u6750\u6599</p>"},{"location":"monitoring/resource-monitoring/#_3","title":"\u4e3b\u8981\u306a\u30ea\u30bd\u30fc\u30b9\u30e1\u30c8\u30ea\u30af\u30b9","text":""},{"location":"monitoring/resource-monitoring/#1_1","title":"1. \u30b3\u30f3\u30d4\u30e5\u30fc\u30c8\u30ea\u30bd\u30fc\u30b9","text":""},{"location":"monitoring/resource-monitoring/#ec2-ecs","title":"EC2 / ECS","text":"<p>CPU\u4f7f\u7528\u7387</p> <pre><code>\u76e3\u8996\u9805\u76ee: CPUUtilization\n\u30a2\u30e9\u30fc\u30c8\u8a2d\u5b9a\u4f8b:\n- CPU &gt; 90%\uff085\u5206\u9593\u7d99\u7d9a\uff09 \u2192 Critical\uff08Auto Scaling\u5931\u6557\u6642\uff09\n- CPU &gt; 80%\uff0815\u5206\u9593\u7d99\u7d9a\uff09 \u2192 Warning\uff08\u9031\u6b21\u30ec\u30d3\u30e5\u30fc\u6642\u78ba\u8a8d\uff09\n- CPU\u4f7f\u7528\u7387\u306e\u63a8\u79fb \u2192 Info\uff08\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u8868\u793a\uff09\n\n\u8003\u3048\u65b9:\n- Auto Scaling\u304c\u6b63\u5e38\u306b\u6a5f\u80fd\u3057\u3066\u3044\u308c\u3070\u300180%\u306f\u60f3\u5b9a\u5185\n- 90%\u8d85\u3048\u3067\u30b9\u30b1\u30fc\u30eb\u30a2\u30a6\u30c8\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u554f\u984c\n- \u95be\u5024\u306f\u30b7\u30b9\u30c6\u30e0\u7279\u6027\u306b\u5fdc\u3058\u3066\u8abf\u6574\u304c\u5fc5\u8981\n</code></pre> <p>\u30e1\u30e2\u30ea\u4f7f\u7528\u7387</p> <pre><code>\u76e3\u8996\u9805\u76ee: MemoryUtilization\uff08CloudWatch Agent\u3067\u53d6\u5f97\uff09\n\u30a2\u30e9\u30fc\u30c8\u8a2d\u5b9a\u4f8b:\n- Memory &gt; 90%\uff085\u5206\u9593\u7d99\u7d9a\uff09 \u2192 Critical\n- Memory &gt; 80%\uff0815\u5206\u9593\u7d99\u7d9a\uff09 \u2192 Warning\uff08\u9031\u6b21\u30ec\u30d3\u30e5\u30fc\u6642\u78ba\u8a8d\uff09\n\n\u8003\u3048\u65b9:\n- \u30e1\u30e2\u30ea\u4e0d\u8db3\u306f\u30b9\u30ef\u30c3\u30d7\u3084OOM Killer\u306b\u3064\u306a\u304c\u308b\n- Auto Scaling\u3067\u30b9\u30b1\u30fc\u30eb\u30a2\u30a6\u30c8\u3059\u308c\u3070\u3001\u51e6\u7406\u304c\u5206\u6563\u3055\u308c\u30e1\u30e2\u30ea\u8ca0\u8377\u3082\u5206\u6563\u3055\u308c\u308b\n- \u95be\u5024\u306f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u7279\u6027\u306b\u3088\u308a\u8abf\u6574\n</code></pre>"},{"location":"monitoring/resource-monitoring/#lambda","title":"Lambda","text":"<p>\u5b9f\u884c\u6642\u9593</p> <pre><code>\u76e3\u8996\u9805\u76ee: Duration\n\u30a2\u30e9\u30fc\u30c8\u8a2d\u5b9a\u4f8b:\n- \u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u767a\u751f \u2192 Critical\uff08\u30e6\u30fc\u30b6\u30fc\u5f71\u97ff\u3042\u308a\uff09\n- \u5b9f\u884c\u6642\u9593\u304c\u5e73\u5747\u306e2\u500d \u2192 Warning\uff08\u9031\u6b21\u30ec\u30d3\u30e5\u30fc\u6642\u78ba\u8a8d\uff09\n- \u5b9f\u884c\u6642\u9593\u306e\u63a8\u79fb \u2192 Info\uff08\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u8868\u793a\uff09\n\n\u8003\u3048\u65b9:\n- \u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u306f\u76f4\u63a5\u30e6\u30fc\u30b6\u30fc\u5f71\u97ff\u304c\u3042\u308b\n- \u5b9f\u884c\u6642\u9593\u306e\u5897\u52a0\u50be\u5411\u306f\u30b3\u30fc\u30c9\u6539\u5584\u3084\u30ea\u30bd\u30fc\u30b9\u8abf\u6574\u306e\u691c\u8a0e\u6750\u6599\n</code></pre> <p>\u540c\u6642\u5b9f\u884c\u6570</p> <pre><code>\u76e3\u8996\u9805\u76ee: ConcurrentExecutions\n\u30a2\u30e9\u30fc\u30c8\u8a2d\u5b9a\u4f8b:\n- \u540c\u6642\u5b9f\u884c\u6570 &gt; \u30a2\u30ab\u30a6\u30f3\u30c8\u5236\u9650\u306e80% \u2192 Warning\n- \u30b9\u30ed\u30c3\u30c8\u30ea\u30f3\u30b0\u767a\u751f \u2192 Critical\uff08\u30e6\u30fc\u30b6\u30fc\u5f71\u97ff\u3042\u308a\uff09\n\n\u8003\u3048\u65b9:\n- \u5236\u9650\u306b\u9054\u3059\u308b\u3068\u30b9\u30ed\u30c3\u30c8\u30ea\u30f3\u30b0\u304c\u767a\u751f\u3057\u3001\u30e6\u30fc\u30b6\u30fc\u5f71\u97ff\u304c\u3042\u308b\n</code></pre>"},{"location":"monitoring/resource-monitoring/#2_1","title":"2. \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30ea\u30bd\u30fc\u30b9","text":""},{"location":"monitoring/resource-monitoring/#rds-aurora","title":"RDS / Aurora","text":"<p>\u63a5\u7d9a\u6570</p> <pre><code>\u76e3\u8996\u9805\u76ee: DatabaseConnections\n\u30a2\u30e9\u30fc\u30c8\u8a2d\u5b9a\u4f8b:\n- \u63a5\u7d9a\u6570 &gt; \u6700\u5927\u63a5\u7d9a\u6570\u306e95% \u2192 Critical\n- \u63a5\u7d9a\u6570 &gt; \u6700\u5927\u63a5\u7d9a\u6570\u306e80% \u2192 Warning\uff08\u9031\u6b21\u30ec\u30d3\u30e5\u30fc\u6642\u78ba\u8a8d\uff09\n- \u63a5\u7d9a\u6570\u306e\u63a8\u79fb \u2192 Info\uff08\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u8868\u793a\uff09\n\n\u8003\u3048\u65b9:\n- 95%\u3092\u8d85\u3048\u308b\u3068\u65b0\u898f\u63a5\u7d9a\u304c\u62d2\u5426\u3055\u308c\u308b\u53ef\u80fd\u6027\u304c\u9ad8\u3044\n- 80%\u8d85\u3048\u306f\u9069\u5207\u306a\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u30d7\u30fc\u30ea\u30f3\u30b0\u8a2d\u5b9a\u306e\u898b\u76f4\u3057\u3092\u691c\u8a0e\n- \u95be\u5024\u306f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u63a5\u7d9a\u30d1\u30bf\u30fc\u30f3\u306b\u3088\u308a\u8abf\u6574\n</code></pre> <p>CPU\u4f7f\u7528\u7387</p> <pre><code>\u76e3\u8996\u9805\u76ee: CPUUtilization\n\u30a2\u30e9\u30fc\u30c8\u8a2d\u5b9a\u4f8b:\n- CPU &gt; 90%\uff085\u5206\u9593\u7d99\u7d9a\uff09 \u2192 Critical\n- CPU &gt; 80%\uff0815\u5206\u9593\u7d99\u7d9a\uff09 \u2192 Warning\uff08\u9031\u6b21\u30ec\u30d3\u30e5\u30fc\u6642\u78ba\u8a8d\uff09\n\n\u8003\u3048\u65b9:\n- Aurora \u306e\u5834\u5408\u3001Read Replica\u306e\u30aa\u30fc\u30c8\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u3067\u5bfe\u5fdc\u53ef\u80fd\n- Aurora Serverless v2 \u306e\u5834\u5408\u3001ACU\uff08Aurora Capacity Units\uff09\u304c\u81ea\u52d5\u8abf\u6574\u3055\u308c\u308b\n- RDS\uff08\u975eAurora\uff09\u306e\u5834\u5408\u3001\u30b9\u30b1\u30fc\u30eb\u30a2\u30c3\u30d7\uff08\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30b5\u30a4\u30ba\u5909\u66f4\uff09\u304c\u5fc5\u8981\n- \u30b9\u30ed\u30fc\u30af\u30a8\u30ea\u306e\u53ef\u80fd\u6027\u3001\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u8ffd\u52a0\u3084\u30af\u30a8\u30ea\u6700\u9069\u5316\u3092\u691c\u8a0e\n</code></pre> <p>\u30b9\u30c8\u30ec\u30fc\u30b8\u5bb9\u91cf</p> <pre><code>\u76e3\u8996\u9805\u76ee: FreeStorageSpace\n\u30a2\u30e9\u30fc\u30c8\u8a2d\u5b9a\u4f8b:\n- \u7a7a\u304d\u5bb9\u91cf &lt; 10% \u2192 Critical\n- \u7a7a\u304d\u5bb9\u91cf &lt; 20% \u2192 Warning\uff08\u9031\u6b21\u30ec\u30d3\u30e5\u30fc\u6642\u78ba\u8a8d\uff09\n- \u5bb9\u91cf\u4f7f\u7528\u7387\u306e\u63a8\u79fb \u2192 Info\uff08\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u8868\u793a\uff09\n\n\u8003\u3048\u65b9:\n- \u30b9\u30c8\u30ec\u30fc\u30b8\u67af\u6e07\u306f\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u304c\u505c\u6b62\u3059\u308b\n- \u30b9\u30c8\u30ec\u30fc\u30b8\u81ea\u52d5\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u3092\u6709\u52b9\u306b\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u81ea\u52d5\u62e1\u5f35\u3055\u308c\u308b\n- \u95be\u5024\u306f\u30c7\u30fc\u30bf\u5897\u52a0\u901f\u5ea6\u306b\u3088\u308a\u8abf\u6574\n</code></pre>"},{"location":"monitoring/resource-monitoring/#dynamodb","title":"DynamoDB","text":"<p>\u30ad\u30e3\u30d1\u30b7\u30c6\u30a3\u4f7f\u7528\u7387</p> <pre><code>\u76e3\u8996\u9805\u76ee: ConsumedReadCapacityUnits / ConsumedWriteCapacityUnits\n\u30a2\u30e9\u30fc\u30c8\u8a2d\u5b9a\u4f8b:\n- \u30b9\u30ed\u30c3\u30c8\u30ea\u30f3\u30b0\u767a\u751f \u2192 Critical\uff08\u30e6\u30fc\u30b6\u30fc\u5f71\u97ff\u3042\u308a\uff09\n- \u30ad\u30e3\u30d1\u30b7\u30c6\u30a3\u4f7f\u7528\u7387 &gt; 80% \u2192 Warning\uff08\u9031\u6b21\u30ec\u30d3\u30e5\u30fc\u6642\u78ba\u8a8d\uff09\n\n\u8003\u3048\u65b9:\n- \u30b9\u30ed\u30c3\u30c8\u30ea\u30f3\u30b0\u306f\u76f4\u63a5\u30e6\u30fc\u30b6\u30fc\u5f71\u97ff\u304c\u3042\u308b\n- On-Demand\u30e2\u30fc\u30c9\u3067\u306f\u30b9\u30ed\u30c3\u30c8\u30ea\u30f3\u30b0\u306f\u7a00\u3060\u304c\u3001\u30b3\u30b9\u30c8\u306b\u6ce8\u610f\n- Provisioned \u30e2\u30fc\u30c9\u306e\u5834\u5408\u3001Auto Scaling\u306e\u8a2d\u5b9a\u3092\u78ba\u8a8d\n</code></pre>"},{"location":"monitoring/resource-monitoring/#3","title":"3. \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30ea\u30bd\u30fc\u30b9","text":""},{"location":"monitoring/resource-monitoring/#alb","title":"ALB","text":"<p>TargetHealth</p> <pre><code>\u76e3\u8996\u9805\u76ee: UnhealthyHostCount / HealthyHostCount\n\u30a2\u30e9\u30fc\u30c8\u8a2d\u5b9a\u4f8b:\n- \u5168\u30bf\u30fc\u30b2\u30c3\u30c8Unhealthy \u2192 Critical\n- \u4e00\u90e8\u30bf\u30fc\u30b2\u30c3\u30c8Unhealthy \u2192 Warning\uff08\u30b7\u30b9\u30c6\u30e0\u7279\u6027\u306b\u3088\u308b\uff09\n\n\u8003\u3048\u65b9:\n- \u5168\u30bf\u30fc\u30b2\u30c3\u30c8\u30c0\u30a6\u30f3\u306f\u30b5\u30fc\u30d3\u30b9\u505c\u6b62\n- \u4e00\u90e8\u30c0\u30a6\u30f3\u306f\u5197\u9577\u6027\u8a2d\u8a08\u306b\u3088\u308a\u5f71\u97ff\u304c\u7570\u306a\u308b\n</code></pre> <p>\u30ec\u30b9\u30dd\u30f3\u30b9\u30bf\u30a4\u30e0</p> <pre><code>\u76e3\u8996\u9805\u76ee: TargetResponseTime\n\u30a2\u30e9\u30fc\u30c8\u8a2d\u5b9a\u4f8b:\n- \u30ec\u30b9\u30dd\u30f3\u30b9\u30bf\u30a4\u30e0 &gt; SLO \u2192 Critical\n- \u30ec\u30b9\u30dd\u30f3\u30b9\u30bf\u30a4\u30e0 &gt; \u901a\u5e38\u306e2\u500d \u2192 Warning\n- \u30ec\u30b9\u30dd\u30f3\u30b9\u30bf\u30a4\u30e0\u306e\u63a8\u79fb \u2192 Info\uff08\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u8868\u793a\uff09\n\n\u8003\u3048\u65b9:\n- SLO\u9055\u53cd\u306f\u30e6\u30fc\u30b6\u30fc\u5f71\u97ff\u304c\u3042\u308b\n- \u7d99\u7d9a\u7684\u306a\u9045\u5ef6\u50be\u5411\u306f\u30dc\u30c8\u30eb\u30cd\u30c3\u30af\u306e\u8abf\u67fb\u304c\u5fc5\u8981\n- \u95be\u5024\u306fSLO\u306b\u57fa\u3065\u3044\u3066\u8a2d\u5b9a\n</code></pre>"},{"location":"monitoring/resource-monitoring/#4","title":"4. \u30b9\u30c8\u30ec\u30fc\u30b8\u30ea\u30bd\u30fc\u30b9","text":""},{"location":"monitoring/resource-monitoring/#s3","title":"S3","text":"<p>\u30d0\u30b1\u30c3\u30c8\u5bb9\u91cf</p> <pre><code>\u76e3\u8996\u9805\u76ee: BucketSizeBytes\n\u30a2\u30e9\u30fc\u30c8\u8a2d\u5b9a\u4f8b:\n- \u5bb9\u91cf\u306e\u63a8\u79fb \u2192 Info\uff08\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u8868\u793a\uff09\n\n\u8003\u3048\u65b9:\n- S3\u306f\u5b9f\u8cea\u7121\u5236\u9650\u306e\u305f\u3081\u3001\u5bb9\u91cf\u67af\u6e07\u306e\u5fc3\u914d\u306f\u306a\u3044\n- \u30b3\u30b9\u30c8\u6700\u9069\u5316\u306e\u89b3\u70b9\u3067\u76e3\u8996\uff08\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u30dd\u30ea\u30b7\u30fc\u306e\u691c\u8a0e\uff09\n</code></pre>"},{"location":"monitoring/resource-monitoring/#ebs","title":"EBS","text":"<p>\u30c7\u30a3\u30b9\u30af\u4f7f\u7528\u7387</p> <pre><code>\u76e3\u8996\u9805\u76ee: disk_used_percent\uff08CloudWatch Agent\u3067\u53d6\u5f97\uff09\n\u30a2\u30e9\u30fc\u30c8\u8a2d\u5b9a\u4f8b:\n- \u4f7f\u7528\u7387 &gt; 90% \u2192 Critical\n- \u4f7f\u7528\u7387 &gt; 80% \u2192 Warning\uff08\u9031\u6b21\u30ec\u30d3\u30e5\u30fc\u6642\u78ba\u8a8d\uff09\n\n\u8003\u3048\u65b9:\n- \u30c7\u30a3\u30b9\u30af\u67af\u6e07\u306f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u505c\u6b62\u306b\u3064\u306a\u304c\u308b\n- \u30ed\u30b0\u30d5\u30a1\u30a4\u30eb\u306e\u80a5\u5927\u5316\u306a\u3069\u306b\u6ce8\u610f\n</code></pre>"},{"location":"monitoring/resource-monitoring/#auto-scaling","title":"Auto Scaling\u74b0\u5883\u3067\u306e\u30ea\u30bd\u30fc\u30b9\u76e3\u8996","text":""},{"location":"monitoring/resource-monitoring/#_4","title":"\u57fa\u672c\u7684\u306a\u8003\u3048\u65b9","text":"<p>Auto Scaling\u304c\u6b63\u5e38\u306b\u6a5f\u80fd\u3057\u3066\u3044\u308c\u3070\u3001\u30ea\u30bd\u30fc\u30b9\u4f7f\u7528\u7387\u306e\u4e0a\u6607\u306f\u4e00\u6642\u7684\u3067\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002</p> <p>\u76e3\u8996\u306e\u91cd\u70b9:</p> <ol> <li>Auto Scaling\u81ea\u4f53\u306e\u52d5\u4f5c\u76e3\u8996</li> <li>\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u30a2\u30af\u30c6\u30a3\u30d3\u30c6\u30a3\u306e\u6210\u529f/\u5931\u6557</li> <li> <p>Desired Capacity \u3068\u5b9f\u969b\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u6570\u306e\u4e00\u81f4</p> </li> <li> <p>\u30b9\u30b1\u30fc\u30eb\u5931\u6557\u6642\u306e\u691c\u77e5</p> </li> <li>\u30ea\u30bd\u30fc\u30b9\u4f7f\u7528\u7387\u304c\u9ad8\u3044\u307e\u307e\u30b9\u30b1\u30fc\u30eb\u30a2\u30a6\u30c8\u3057\u306a\u3044</li> <li>\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u8d77\u52d5\u306e\u5931\u6557</li> </ol>"},{"location":"monitoring/resource-monitoring/#_5","title":"\u30a2\u30e9\u30fc\u30c8\u8a2d\u8a08\u4f8b","text":"<pre><code>\u2705 \u6b63\u5e38\u306a\u30b1\u30fc\u30b9:\n- CPU 80% \u2192 Auto Scaling\u767a\u52d5 \u2192 \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5897\u52a0 \u2192 CPU\u4f4e\u4e0b\n  \u2192 Warning\uff08\u9031\u6b21\u30ec\u30d3\u30e5\u30fc\u3067\u78ba\u8a8d\u3001\u5fc5\u8981\u306a\u3089\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u30dd\u30ea\u30b7\u30fc\u8abf\u6574\uff09\n\n\u274c \u7570\u5e38\u306a\u30b1\u30fc\u30b9:\n- CPU 90% \u2192 Auto Scaling\u767a\u52d5\u305b\u305a \u2192 Critical\uff08\u5373\u6642\u5bfe\u5fdc\uff09\n- CPU 90% \u2192 Auto Scaling\u5931\u6557 \u2192 Critical\uff08\u5373\u6642\u5bfe\u5fdc\uff09\n</code></pre>"},{"location":"monitoring/resource-monitoring/#_6","title":"\u30ea\u30bd\u30fc\u30b9\u76e3\u8996\u306e\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9","text":""},{"location":"monitoring/resource-monitoring/#1_2","title":"1. \u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u5f71\u97ff\u3092\u57fa\u6e96\u306b\u3059\u308b","text":"<p>\u30ea\u30bd\u30fc\u30b9\u4f7f\u7528\u7387\u81ea\u4f53\u306f\u554f\u984c\u3067\u306f\u306a\u304f\u3001\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u3078\u306e\u5f71\u97ff\u3092\u91cd\u8996\u3057\u307e\u3059\u3002</p> <pre><code>\u2705 CPU 80%\u3060\u304c\u3001\u30ec\u30b9\u30dd\u30f3\u30b9\u30bf\u30a4\u30e0\u306f\u6b63\u5e38 \u2192 Warning\uff08\u9031\u6b21\u30ec\u30d3\u30e5\u30fc\uff09\n\u2705 CPU 50%\u3060\u304c\u3001\u30ec\u30b9\u30dd\u30f3\u30b9\u30bf\u30a4\u30e0\u304c\u9045\u3044 \u2192 Critical\uff08\u5373\u6642\u8abf\u67fb\uff09\n</code></pre>"},{"location":"monitoring/resource-monitoring/#2_2","title":"2. \u9069\u5207\u306a\u95be\u5024\u3092\u8a2d\u5b9a\u3059\u308b","text":"<p>\u904e\u53bb\u306e\u30c7\u30fc\u30bf\u3092\u5206\u6790\u3057\u3001\u8aa4\u691c\u77e5\u3092\u9632\u3050\u95be\u5024\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002</p> <pre><code>\u2705 \u904e\u53bb30\u65e5\u9593\u306e\u30c7\u30fc\u30bf\u3092\u5206\u6790\n\u2705 \u901a\u5e38\u6642\u306e\u6700\u5927\u5024 + \u30de\u30fc\u30b8\u30f3\u3067\u95be\u5024\u3092\u8a2d\u5b9a\n\u2705 \u95be\u5024\u306f\u5b9a\u671f\u7684\u306b\u898b\u76f4\u3059\n\u2705 \u30b7\u30b9\u30c6\u30e0\u7279\u6027\u306b\u5fdc\u3058\u3066\u67d4\u8edf\u306b\u8abf\u6574\n</code></pre>"},{"location":"monitoring/resource-monitoring/#3_1","title":"3. \u8a55\u4fa1\u671f\u9593\u3092\u9069\u5207\u306b\u8a2d\u5b9a\u3059\u308b","text":"<p>\u4e00\u6642\u7684\u306a\u30b9\u30d1\u30a4\u30af\u3067\u8aa4\u691c\u77e5\u3057\u306a\u3044\u3088\u3046\u3001\u9069\u5207\u306a\u8a55\u4fa1\u671f\u9593\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002</p> <pre><code>\u2705 CPU &gt; 90% \u3092 5\u5206\u9593\u7d99\u7d9a \u2192 \u30a2\u30e9\u30fc\u30c8\u767a\u706b\n\u274c CPU &gt; 90% \u3092 1\u56de \u2192 \u8aa4\u691c\u77e5\u306e\u53ef\u80fd\u6027\n</code></pre>"},{"location":"monitoring/resource-monitoring/#4_1","title":"4. \u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3067\u5168\u4f53\u3092\u53ef\u8996\u5316\u3059\u308b","text":"<p>\u5404\u30ea\u30bd\u30fc\u30b9\u306e\u4f7f\u7528\u72b6\u6cc1\u3092\u4e00\u3064\u306e\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3067\u78ba\u8a8d\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002</p> <p>\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306b\u542b\u3081\u308b\u60c5\u5831: - CPU\u3001\u30e1\u30e2\u30ea\u3001\u30c7\u30a3\u30b9\u30af\u4f7f\u7528\u7387\u306e\u63a8\u79fb - \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u306e\u63a8\u79fb - \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u63a5\u7d9a\u6570\u306e\u63a8\u79fb - \u30a8\u30e9\u30fc\u7387\u3001\u30ec\u30b9\u30dd\u30f3\u30b9\u30bf\u30a4\u30e0\u306e\u63a8\u79fb</p>"},{"location":"monitoring/resource-monitoring/#5","title":"5. \u9031\u6b21/\u6708\u6b21\u30ec\u30d3\u30e5\u30fc\u3067\u50be\u5411\u3092\u628a\u63e1\u3059\u308b","text":"<p>\u5b9a\u671f\u7684\u306b\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3092\u78ba\u8a8d\u3057\u3001\u9577\u671f\u7684\u306a\u50be\u5411\u3092\u5206\u6790\u3057\u307e\u3059\u3002</p> <p>\u30ec\u30d3\u30e5\u30fc\u306e\u89b3\u70b9: - \u30ea\u30bd\u30fc\u30b9\u4f7f\u7528\u7387\u306e\u5897\u52a0\u50be\u5411 - \u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u30dd\u30ea\u30b7\u30fc\u306e\u59a5\u5f53\u6027 - \u30b3\u30b9\u30c8\u6700\u9069\u5316\u306e\u6a5f\u4f1a - \u30ad\u30e3\u30d1\u30b7\u30c6\u30a3\u30d7\u30e9\u30f3\u30cb\u30f3\u30b0\u306e\u5fc5\u8981\u6027</p>"},{"location":"monitoring/resource-monitoring/#_7","title":"\u3088\u304f\u3042\u308b\u5931\u6557\u30d1\u30bf\u30fc\u30f3","text":""},{"location":"monitoring/resource-monitoring/#1_3","title":"1. \u5168\u3066\u306e\u30ea\u30bd\u30fc\u30b9\u3092\u540c\u3058\u512a\u5148\u5ea6\u3067\u76e3\u8996","text":"<p>\u554f\u984c: \u91cd\u8981\u5ea6\u306e\u4f4e\u3044\u30a2\u30e9\u30fc\u30c8\u306b\u6642\u9593\u3092\u53d6\u3089\u308c\u308b</p> <p>\u5bfe\u7b56: \u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u5f71\u97ff\u3092\u57fa\u6e96\u306b\u512a\u5148\u5ea6\u3092\u8a2d\u5b9a</p> <pre><code>\u274c S3\u30d0\u30b1\u30c3\u30c8\u5bb9\u91cf\u5897\u52a0 \u2192 Critical\n\u2705 S3\u30d0\u30b1\u30c3\u30c8\u5bb9\u91cf\u5897\u52a0 \u2192 Info\uff08\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u78ba\u8a8d\uff09\n</code></pre>"},{"location":"monitoring/resource-monitoring/#2-auto-scaling","title":"2. Auto Scaling\u74b0\u5883\u3067\u56fa\u5b9a\u95be\u5024\u3092\u4f7f\u7528","text":"<p>\u554f\u984c: \u30b9\u30b1\u30fc\u30eb\u30a2\u30a6\u30c8\u6642\u306b\u8aa4\u691c\u77e5\u304c\u591a\u767a</p> <p>\u5bfe\u7b56: Auto Scaling\u306e\u52d5\u4f5c\u3092\u8003\u616e\u3057\u305f\u95be\u5024\u8a2d\u5b9a</p> <pre><code>\u274c \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u6570 &lt; 2\u53f0 \u2192 Critical\n\u2705 Desired Capacity != \u5b9f\u969b\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u6570 \u2192 Critical\n</code></pre>"},{"location":"monitoring/resource-monitoring/#3_2","title":"3. \u95be\u5024\u304c\u4f4e\u3059\u304e\u308b","text":"<p>\u554f\u984c: \u8aa4\u691c\u77e5\u304c\u591a\u767a\u3057\u3001\u30a2\u30e9\u30fc\u30c8\u304c\u7121\u8996\u3055\u308c\u308b</p> <p>\u5bfe\u7b56: \u904e\u53bb\u306e\u30c7\u30fc\u30bf\u3092\u5206\u6790\u3057\u3001\u9069\u5207\u306a\u95be\u5024\u3092\u8a2d\u5b9a</p>"},{"location":"monitoring/resource-monitoring/#4_2","title":"4. \u8a55\u4fa1\u671f\u9593\u304c\u77ed\u3059\u304e\u308b","text":"<p>\u554f\u984c: \u4e00\u6642\u7684\u306a\u30b9\u30d1\u30a4\u30af\u3067\u4e0d\u8981\u306a\u30a2\u30e9\u30fc\u30c8\u304c\u767a\u751f</p> <p>\u5bfe\u7b56: 5\u5206\u9593\u7d99\u7d9a\u306a\u3069\u3001\u9069\u5207\u306a\u8a55\u4fa1\u671f\u9593\u3092\u8a2d\u5b9a</p>"},{"location":"monitoring/resource-monitoring/#5_1","title":"5. \u30b7\u30b9\u30c6\u30e0\u7279\u6027\u3092\u8003\u616e\u3057\u306a\u3044\u4e00\u5f8b\u306e\u95be\u5024","text":"<p>\u554f\u984c: \u7570\u306a\u308b\u7279\u6027\u306e\u30b7\u30b9\u30c6\u30e0\u306b\u540c\u3058\u95be\u5024\u3092\u9069\u7528</p> <p>\u5bfe\u7b56: \u5404\u30b7\u30b9\u30c6\u30e0\u306e\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u30d1\u30bf\u30fc\u30f3\u3084\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u7279\u6027\u306b\u5fdc\u3058\u3066\u8abf\u6574</p>"},{"location":"monitoring/resource-monitoring/#_8","title":"\u307e\u3068\u3081","text":"<ul> <li>\u30ea\u30bd\u30fc\u30b9\u76e3\u8996\u306e\u76ee\u7684\u306f\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u5f71\u97ff\u306e\u4e88\u5146\u691c\u77e5\u3068\u30ad\u30e3\u30d1\u30b7\u30c6\u30a3\u30d7\u30e9\u30f3\u30cb\u30f3\u30b0</li> <li>\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u5f71\u97ff\u3092\u57fa\u6e96\u306b\u30a2\u30e9\u30fc\u30c8\u30ec\u30d9\u30eb\u3092\u8a2d\u5b9a\u3059\u308b</li> <li>Auto Scaling\u304c\u6b63\u5e38\u306a\u3089\u3001\u30ea\u30bd\u30fc\u30b9\u4f7f\u7528\u7387\u306e\u4e0a\u6607\u306f\u554f\u984c\u306a\u3044</li> <li>\u9069\u5207\u306a\u95be\u5024\u3068\u8a55\u4fa1\u671f\u9593\u3092\u8a2d\u5b9a\u3057\u3001\u8aa4\u691c\u77e5\u3092\u9632\u3050</li> <li>\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3067\u5168\u4f53\u3092\u53ef\u8996\u5316\u3057\u3001\u9031\u6b21/\u6708\u6b21\u30ec\u30d3\u30e5\u30fc\u3067\u50be\u5411\u3092\u628a\u63e1\u3059\u308b</li> <li>\u30ea\u30bd\u30fc\u30b9\u4f7f\u7528\u7387\u81ea\u4f53\u3067\u306f\u306a\u304f\u3001\u30e6\u30fc\u30b6\u30fc\u4f53\u9a13\u3078\u306e\u5f71\u97ff\u3092\u91cd\u8996\u3059\u308b</li> <li>\u95be\u5024\u306f\u3042\u304f\u307e\u3067\u4e00\u4f8b\u3067\u3042\u308a\u3001\u30b7\u30b9\u30c6\u30e0\u7279\u6027\u306b\u5fdc\u3058\u3066\u8abf\u6574\u304c\u5fc5\u8981</li> </ul>"}]}